{"version":3,"sources":["hooks/useConfigStorage.tsx","containers/CkitProviderContainer/index.tsx","wallets/ObservableNonAcpPwLockWallet.ts","wallets/ObservableAcpPwLockWallet.ts","wallets/ObservableUnipassWallet.ts","containers/WalletContainer/index.tsx","hooks/useUnipass.tsx","utils/AssetAmount.ts","utils/index.ts","hooks/useSendTransaction.tsx","components/OnLoaded/index.tsx","components/Styled/index.tsx","components/Wallet/WalletConnect.tsx","hooks/useSendIssueTx.tsx","hooks/useAssetMetaStorage.tsx","components/Wallet/WalletChange.tsx","components/Wallet/WalletList.tsx","views/Account/index.tsx","components/Assets/AssetList/AssetBalance.tsx","components/Assets/AssetList/SendButton.tsx","hooks/useSendTransferTx.tsx","components/Assets/AssetList/index.tsx","components/Assets/AddAssetButton.tsx","views/Assets/index.tsx","components/Issue/AssetMetaDisplay.tsx","components/Issue/IssueOperation.tsx","components/Issue/index.tsx","views/Issue/index.tsx","views/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../../packages/ckit/dist/utils.js","../../../packages/ckit/dist/errors.js","../../../packages/ckit/dist/helpers/pw.js","../../../packages/base/dist/index.js","../../../packages/ckit/dist/tx-builders/AbstractTransactionBuilder.js","../../../packages/ckit/dist/tx-builders/pw/AbstractPwSenderBuilder.js","../../../packages/ckit/dist/wallets/AbstractSingleEntrySigner.js","../../../packages/ckit/dist/providers/mercury/MercuryProvider.js","../../../packages/ckit/dist/helpers/index.js","../../../packages/ckit/dist/tx-builders/builder-utils.js","../../../packages/ckit/dist/index.js","../../../packages/base/dist/ScriptManager.js","../../../packages/base/dist/AbstractProvider.js","../../../packages/base/dist/AbstractWallet.js","../../../packages/utils/dist/index.js","../../../packages/utils/dist/debug.js","../../../packages/utils/dist/invariant.js","../../../packages/utils/dist/assertion.js","../../../packages/ckit/dist/wallets/index.js","../../../packages/ckit/dist/wallets/PwWallet.js","../../../packages/ckit/dist/helpers/pw.serde.js","../../../packages/ckit/dist/wallets/UnipassWallet.js","../../../packages/ckit/dist/wallets/unipass/UnipassAdapter.js","../../../packages/ckit/dist/providers/index.js","../../../packages/mercury-client/dist/index.js","../../../packages/ckit/dist/helpers/Amount.js","../../../packages/ckit/dist/providers/mercury/IndexerCellProvider.js","../../../packages/ckit/dist/providers/CkitProvider.js","../../../packages/ckit/dist/tx-builders/index.js","../../../packages/ckit/dist/tx-builders/AcpTransferSudtBuilder.js","../../../packages/ckit/dist/tx-builders/pw/TransferSudtPwBuilder.js","../../../packages/ckit/dist/tx-builders/unipass/config.js","../../../packages/ckit/dist/tx-builders/TransferCkbBuilder.js","../../../packages/ckit/dist/tx-builders/pw/TransferCkbPwBuilder.js","../../../packages/ckit/dist/tx-builders/MintSudtBuilder.js","../../../packages/ckit/dist/tx-builders/pw/MintSudtPwBuilder.js","../../../packages/ckit/dist/predefined/index.js","../../../packages/ckit/dist/predefined/aggron.js"],"names":["useConfigStorage","initialConfig","useMemo","ckitConfig","predefined","Aggron","mecuryRPC","ckbRPC","nervosExploreTxUrlPrefix","nervosExploreAddressUrlPrefix","nervosExploreSudtUrlPrefix","useLocalStorage","CkitProviderContainer","createContainer","useState","ckitProvider","setCkitProvider","localConfig","useEffect","provider","CkitProvider","init","then","ObservableNonAcpPwLockWallet","NonAcpPwLockWallet","constructor","super","this","setDescriptor","name","makeObservable","connectStatus","observable","signer","ObservableAcpPwLockWallet","AcpPwLockWallet","ObservableUnipassWallet","UnipassWallet","WalletContainer","useContainer","currentWalletName","setCurrentWalletName","wallets","useLocalObservable","signerAddress","setSignerAddress","error","setError","visible","setVisible","isInitialized","setIsInitialized","setModalVisible","useCallback","runInAction","splice","push","find","value","descriptor","connect","autorun","forEach","wallet","index","on","remainConnectedWallet","w","connectedWallet","Error","err","currentWallet","undefined","getAddress","address","displayWalletName","useUnipass","cachedTx","cacheTx","adapter","UnipassRedirectAdapter","host","shouldLogin","hasLoginInfo","cacheLogin","saveLoginInfo","shouldSendTx","hasSigData","clearTx","AssetAmount","rawAmount","decimals","BigNumber","toString","humanizeAmount","times","originDecimalPlaces","decimalPlaces","ROUND_FLOOR","toFormat","truncateMiddle","str","start","end","length","slice","useSendTransaction","useMutation","option","a","tx","serializedTx","AbstractTransactionBuilder","serde","serialize","JSON","stringify","seal","sendTransaction","txHash","onSuccess","href","Modal","success","title","content","target","rel","onError","obj","key","errorMsg","String","message","width","OnIncomplete","children","isLoaded","setIsLoaded","mutateAsync","txToSend","deserialize","catch","StyledCardWrapper","styled","div","WalletConnect","observer","size","onClick","type","useSendIssueTx","input","buildTx","recipientsParams","recipient","amount","operationKind","capacityPolicy","additionalCapacity","helpers","CkbAmount","fromCkb","toHex","txBuilder","MintSudtBuilder","recipients","build","useAssetMetaStorage","initialAssetMeta","symbol","decimal","WalletChange","truncatedAddress","style","marginTop","marginBottom","span","offset","textAlign","AddressTip","copyable","float","Typography","Text","ModalBorderWrapper","WalletList","closable","onCancel","footer","pagination","dataSource","renderItem","item","Item","WalletListItem","props","UsbOutlined","SyncOutlined","spin","CheckCircleTwoTone","AccountView","Title","level","paddingTop","AssetBalance","script","query","useQuery","getUdtBalance","getCkbLiveCellsBalance","enabled","isError","data","fromRaw","toHumanizeString","LoadingOutlined","SendButton","issuableSudtScript","newSudtScript","isMint","code_hash","hash_type","args","buttonContent","assetMeta","ModalForm","AcpTransferSudtBuilder","sudt","TransferCkbBuilder","useSendTransferTx","sendTransferTransaction","isTransferLoading","isLoading","sendIssueTransaction","isIssueLoading","onSubmit","values","fromHumanize","toRawString","loading","initialValues","validate","_values","formik","htmlFor","placeholder","errorMessage","submitForm","AssetList","columns","render","record","showHeader","pageSize","AddAssetButton","buttonProps","assets","setAssets","codeHash","hashType","setSubmitting","newAssetMeta","concat","AssetsView","icon","PlusCircleOutlined","fontSize","AssetMetaDisplay","scriptHash","utils","computeScriptHash","ScriptTip","Link","IssueOperation","setOperationKind","assetDecimal","assetSymbol","recipientFieldDisplayName","IssueArea","issuerAddress","udtScript","IssueView","isSupportIssue","checkSupported","AppView","BodyWrapper","className","App","queryClient","QueryClient","QueryClientProvider","client","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","boom","Object","defineProperty","exports","unimplemented","asyncSleep","ms","Promise","resolve","setTimeout","randomHexString","lengthWithOut0x","Array","map","Math","floor","random","join","nonNullable","x","bytesToHex","bytes","b","padStart","hexToBytes","hex","match","startsWith","Uint8Array","from","byte","parseInt","asserts","condition","RecipientSameWithSenderError","NoEnoughUdtError","NoEnoughCkbError","NoAvailableCellError","CkitError","metadata","expected","actual","enumerable","get","_pw","Pw","_pwCore","require","fromPwScript","toPwScript","Script","HashType","fromPwCellDep","dep_type","depType","out_point","tx_hash","outPoint","toPwCellDep","CellDep","DepType","depGroup","code","OutPoint","fromPwCell","cell_output","capacity","toHexString","lock","getData","toPwCell","isLumosCell","Cell","Amount","output","output_data","toPwOutPoint","_ScriptManager","ScriptManager","_AbstractProvider","AbstractProvider","ProviderConfig","InitOptions","_AbstractWallet","AbstractWallet","deserialized","serialized","configurable","writable","AbstractPwSenderBuilder","_utils","_config","Builder","Number","config","MIN_FEE_RATE","getCellDeps","_scripts","getCellDep","getWitnessPlaceholder","isTemplateOf","parseToScript","scriptConfig","getScriptConfig","CODE_HASH","HASH_TYPE","repeat","input_type","output_type","AbstractSingleEntrySigner","PwAdapterSigner","rawSigner","hasher","Blake2bHasher","messages","sigs","signerLock","sameWith","signMessage","sig","Signer","options","_options$hasher","sign","signed","transformers","TransformTransaction","MercuryProvider","_rpc","_base","_mercuryClient","_rxjs","_errors","_helpers","_IndexerCellProvider","_defineProperty","mercuryRpc","ckbRpc","MercuryClient","mercury","RPC","rpc","minimalCapacity","searchKey","script_type","filter","output_data_len_range","cells$","get_cells","search_key","pipe","expand","res","after_cursor","last_cursor","takeWhile","objects","concatMap","cell","scan","acc","next","cells","BigInt","lastValueFrom","defaultValue","balance$","reduce","balance","getTxPoolInfo","tx_pool_info","getChainInfo","get_blockchain_info","send_transaction","udt","minimalAmount","resolvedCell","toBigUInt128LE","pollIntervalMs","timeoutMs","Date","now","result","_tx$tx_status","get_transaction","tx_status","status","transaction","rpcTip","get_tip_block_number","mercuryTip","get_tip","block_number","asIndexerCellProvider","MercuryCellProvider","_Amount","keys","byteLenOfSudt","lockArgsByteLen","byteLenOfCkbLiveCell","_exportNames","errors","_predefined","prototype","hasOwnProperty","call","_wallets","_providers","_txBuilders","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","default","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","_configManager","SCRIPTS","newScript","configKey","DEP_TYPE","TX_HASH","INDEX","findCellDepByAddress","scriptConfigs","findIndex","found","findCellDepByScript","parseToAddress","initialized","min_fee_rate","isMainnet","chain","txPoolInfo","LINA","AGGRON4","generateAddress","parseAddress","_eventemitter","features","description","event","listener","emitter","isDisconnected","invariant","emitConnectStatusChanged","tryConnect","emitChangedSigner","e","emitError","removeAllListeners","feature","includes","emit","_debug","debug","createDebugger","_invariant","_assertion","namespace","_tinyInvariant","_PwWallet","_UnipassWallet","hashMessage","InternalNonAcpPwLockSigner","_hd","_detectProvider","_secp256k","_AbstractSingleEntrySigner","_classPrivateFieldGet","receiver","privateMap","_classApplyDescriptorGet","_classExtractFieldDescriptor","_classPrivateFieldSet","TypeError","_classApplyDescriptorSet","action","detect","window","ethereum","AbstractPwWallet","addresses","isArray","produceSigner","describeFeatures","ethProvider","removeEventListener","addListener","enable","AbstractPwSigner","ethereumProvider","selectedAddress","request","method","params","v","Platform","eth","Keccak256Hasher","update","buffer","digest","serializeJson","_privateKey","privateKey","pubkey","publicKeyCreate","getEthAddress","signRecoverable","platform","raw","inputs","since","previousOutput","inputCells","getHexData","outputs","version","cellDeps","headerDeps","witnessArgs","witnesses","Transaction","RawTransaction","toCell","toScript","_UnipassAdapter","loginDataCacheKey","getLockArgs","unipassLockArgs","pubkeyToLockArgs","getRetFromSearchParams","redirect","isUnipassLoginData","isUnipassSigData","ckbHash","check","replace","searchParams","URLSearchParams","location","search","json","parse","info","delete","pathname","protocol","qs","newUrl","history","replaceState","path","_options$host","_options$loginDataCac","getLoginDataFromUrl","getLoginDataFromCache","_ref","_this$getLoginDataFro","redirectToLogin","loginData","_this$getSignatureFro","getSignatureFromUrl","redirectToSign","generateUnipassNewUrl","success_url","_this$getLoginDataFro2","localStorage","setItem","getItem","saveLoginDataToCache","signature","urlObj","URL","toLowerCase","entries","val","_MercuryProvider","_CkitProvider","_clientJs","uri","transport","HTTPTransport","headers","Client","RequestManager","payload","order","limit","_bignumber","BN","checkIsAmount","bn","isInteger","lt","Infinity","separator","valWithDecimals","rounded","min","base","eq","gt","gte","lte","new","plus","minus","__isCkitAmount__","pow","collector","queries","queryData","collect","Symbol","asyncIterator","liveCells","issuerLockHash","dep","SerializedTx","DeserializedTx","_AbstractTransactionBuilder","_AcpTransferSudtBuilder","_TransferCkbBuilder","_MintSudtBuilder","_TransferSudtPwBuilder","builder","TransferSudtPwBuilder","_AbstractPwSenderBuilder","sender","senderSudts","collectUdtCells","recipientSudt","senderInputs","point","recipientInput","recipientOutput","clone","setSUDTAmount","getSUDTAmount","add","senderOutput","sum","sub","fee","calcFee","availableFee","ZERO","AggronCellDeps","console","log","nets","url","model","_TransferCkbPwBuilder","some","TransferCkbPwBuilder","_builderUtils","recipientCreatedCells","acpOptions","recipientAcpCells$","mergeMap","collectCkbLiveCells","resolveds","resolved","toArray","recipientAcpCells","createdCapacity","totalCapacity","injectedAcpCapacity","senderOutpoints","senderCells","_MintSudtPwBuilder","NonAcpPwMintBuilder","buildPwTransaction","udtType","createdRecipientCells","toUInt128LE","resolvedFindAcpCells","foundRecipientCells$","async","foundRecipientCells","createdRecipientCellsCapacity","createdCell","foundRecipientCellsAdditionalCapacity","foundCell","neededCapacityFromIssuer","issuerCells","issuerOutput","inputCell","rawTx","PREFIX","SECP256K1_BLAKE160","ANYONE_CAN_PAY","SUDT","PW_ANYONE_CAN_PAY","PW_NON_ANYONE_CAN_PAY","UNIPASS","RC_LOCK"],"mappings":"0SAcO,SAASA,IACd,MAAMC,EAAgBC,mBAAqB,KAQlC,CACLC,WAPkCC,aAAWC,OAQ7CC,UAPgB,kCAQhBC,OAPa,8BAQbC,yBAP+B,kDAQ/BC,8BAPoC,8CAQpCC,2BAPiC,8CASlC,IAEH,OAAOC,0BAA6B,cAAeV,GC5B9C,IAAMW,EAAwBC,aAA0C,WAC7E,MAAwCC,qBAAxC,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAAsBhB,IAAfiB,EAAP,oBAMA,OALAC,qBAAU,WACR,IAAMC,EAAW,IAAIC,eAAaH,EAAYX,UAAWW,EAAYV,QAChEY,EAASE,KAAT,eAAmBJ,EAAYd,aAAcmB,MAAK,kBAAMN,EAAgBG,QAC5E,CAACF,IAEGF,KCVF,MAAMQ,UAAqCC,qBAChDC,YAAYV,GACVW,MAAMX,GACNY,KAAKC,cAAc,CAAEC,KAAM,sBAC3BC,YAAeH,KAAM,CACnBI,cAAeC,IACfC,OAAQD,OCNP,MAAME,UAAkCC,kBAC7CV,YAAYV,GACVW,MAAMX,GACNY,KAAKC,cAAc,CAAEC,KAAM,kBAC3BC,YAAeH,KAAM,CACnBI,cAAeC,IACfC,OAAQD,O,wCCNDI,EAAb,kDACE,WAAYjB,GAAyB,IAAD,8BAClC,cAAMA,IACDS,cAAc,CAAEC,KAAM,YAC3BC,YAAe,eAAM,CACnBC,cAAeC,IACfC,OAAQD,MALwB,EADtC,UAA6CK,iBCuGtC,IAAMC,EAAkBzB,aA5F/B,WACE,IAAME,EAAeH,EAAsB2B,eAC3C,EAAkD5B,0BAA+B,qBAAjF,mBAAO6B,EAAP,KAA0BC,EAA1B,KAGMC,EAAUC,aAAqC,iBAAM,MAC3D,EAA0C7B,qBAA1C,mBAAO8B,EAAP,KAAsBC,EAAtB,KACA,EAA0B/B,mBAAoC,MAA9D,mBAAOgC,EAAP,KAAcC,EAAd,KACA,EAA8BjC,oBAAS,GAAvC,mBAAOkC,EAAP,KAAgBC,EAAhB,KACA,EAA0CnC,oBAAS,GAAnD,mBAAOoC,EAAP,KAAsBC,EAAtB,KAEMC,EAAkBC,uBAAY,SAACL,GACnCC,EAAWD,GACXD,EAAS,QACR,IAEH7B,qBAAU,WACHH,GAELuC,aAAY,WAAO,IAAD,EAChBZ,EAAQa,OAAO,GACfb,EAAQc,KACN,IAAIpB,EAAwBrB,GAC5B,IAAIQ,EAA6BR,GACjC,IAAImB,EAA0BnB,IAEhC,UAAA2B,EAAQe,MAAK,SAACC,GAAD,OAAWA,EAAMC,WAAW9B,OAASW,YAAlD,SAAsEoB,eAEvE,CAAC7C,IAEJG,qBACE,kBACE2C,aAAQ,WACDnB,GACLA,EAAQoB,SAAQ,SAACC,EAAQC,GAoBvBD,EAAOE,GAAG,wBAnBqB,SAAClC,GAC9B,GAAsB,iBAAlBA,EAAkC,CACpC,IAAMmC,EAAwBxB,EAAQe,MAAK,SAACU,GAAD,MAA2B,cAApBA,EAAEpC,iBAIlDU,EAHGyB,EAGkBA,EAAsBP,WAAW9B,KAFjC,MAKzB,GAAsB,cAAlBE,EAA+B,CACjCqB,GAAgB,GAChB,IAAMgB,EAAkB1B,EAAQe,MAAK,SAACU,GAAD,OAAOA,EAAER,WAAW9B,OAASkC,EAAOJ,WAAW9B,QACpF,IAAKuC,EACH,MAAM,IAAIC,MAAM,wCAEhB5B,EAAqB2B,EAAgBT,WAAW9B,UAKtDkC,EAAOE,GAAG,SAAS,SAACK,GAAD,OACjBvB,EAAS,CACPD,MAAOwB,EACPN,MAAOA,eAKjB,CAACZ,EAAiBV,IAGpB,IAAM6B,EAAgB7B,EAAQe,MAAK,SAACC,GAAD,OAAWA,EAAMC,WAAW9B,OAASW,KAaxE,OAXAtB,qBAAU,WACR2C,aAAQ,WAAO,IAAD,EACZhB,OAAiB2B,GACjB,IAAMT,EAASrB,EAAQe,MAAK,SAACC,GAAD,OAAWA,EAAMC,WAAW9B,OAASW,KACjE,OAAKuB,QAAL,IAAKA,GAAL,UAAKA,EAAQ9B,cAAb,OAAK,EAAgBwC,aAAanD,MAAK,SAACoD,GACtC7B,EAAiB6B,GACjBvB,GAAiB,WAGpB,CAACX,IAEG,CACLU,gBACAR,UACA6B,gBACA9B,uBACAG,gBACAE,QACAC,WACAC,UACAI,sBAMSuB,EAAoB,SAAC9C,GAChC,OAAOA,GAAQ,W,oBCjGV,SAAS+C,IACd,MAA4BjE,0BAA+B,aAA3D,mBAAOkE,EAAP,KAAiBC,EAAjB,KACMC,EAAU,IAAI1C,gBAAc2C,uBAAuB,CAAEC,KAAM,wBACjE,MAAO,CACLC,YAAaH,EAAQI,eACrBC,WAAY,kBAAML,EAAQM,iBAC1BC,aAAcP,EAAQQ,aACtBT,UACAU,QAAS,kBAAMV,EAAQ,OACvBD,Y,sBCnBSY,EAAb,WAIE,WAAYC,EAA+BC,GAAmB,yBAH9DD,eAG6D,OAF7DC,cAE6D,EAC3DhE,KAAK+D,UAAY,IAAIE,YAAUF,GAC/B/D,KAAKgE,SAAWA,EANpB,+CAkBE,WACE,OAAOhE,KAAK+D,UAAUG,aAnB1B,yBAsBE,WACE,MAAO,KAAOlE,KAAK+D,UAAUG,SAAS,MAvB1C,8BA0BE,WACE,IAAMC,EAAiBnE,KAAK+D,UAAUK,MAAf,SAAqB,IAAOpE,KAAKgE,WAClDK,EAAsBF,EAAeG,gBAE3C,OADgBH,EAAeG,cAAcD,EAAqBJ,YAAUM,aAC7DC,WAAWN,cA9B9B,sBASE,SAAeH,EAAmBC,GAChC,OAAO,IAAIF,EAAYC,EAAWC,KAVtC,0BAaE,SAAoBG,EAAwBH,GAE1C,OAAO,IAAIF,EADO,IAAIG,YAAUE,GAAgBC,MAA9B,SAAoC,GAAMJ,IAC1BA,OAftC,KCIO,SAASS,EAAeC,EAAaC,EAAeC,EAAMD,GAC/D,IAAKA,IAAUC,GAAOD,GAAS,GAAKC,GAAO,EAAG,MAAM,IAAIlC,MAAM,2BAC9D,OAAIgC,EAAIG,QAAUF,EAAQC,EAAYF,EAC/BA,EAAII,MAAM,EAAGH,GAAS,MAAQD,EAAII,OAAOF,G,WCI3C,SAASG,IACd,IAAM3F,EAAeH,EAAsB2B,eACnCgC,EAAkBjC,EAAgBC,eAAlCgC,cACR,EAAsBvE,IAAfiB,EAAP,oBACA,EAA6B2D,IAArBE,EAAR,EAAQA,QAASU,EAAjB,EAAiBA,QAEjB,OAAOmB,YAAW,uCAChB,WAAOC,GAAP,mBAAAC,EAAA,gEACOtC,QADP,IACOA,KAAetC,OADtB,sBACoC,IAAIoC,MAAM,+BAD9C,UAEOtD,EAFP,sBAE2B,IAAIsD,MAAM,qCAFrC,UAI+B,oBAAXuC,EAJpB,iCAIkDA,EAAO7F,EAAcwD,EAActC,QAJrF,gDAI+F2E,EAJ/F,eAIQE,EAJR,KAKwC,YAAlCvC,EAAcZ,WAAW9B,OACrBkF,EAAeC,6BAA2BC,MAAMC,UAAUJ,GAChEhC,EAAQqC,KAAKC,UAAUL,KAP3B,KASuBhG,EATvB,UAS0DwD,EAActC,OAAOoF,KAAKP,GATpF,0CASoCQ,gBATpC,+BASQC,EATR,OAUwC,YAAlChD,EAAcZ,WAAW9B,MAC3B2D,IAXJ,kBAaS,CAAE+B,OAAQA,IAbnB,4CADgB,sDAgBhB,CACEC,UADF,YACyB,IAAXD,EAAU,EAAVA,OACJE,EAAOxG,EAAYT,yBAA2B+G,EACpDG,IAAMC,QAAQ,CACZC,MAAO,UACPC,QACE,0EAEE,mBAAGJ,KAAMA,EAAMK,OAAO,SAASC,IAAI,aAAnC,sBAGA,oCACE,qDACCR,WAMXS,QAnBF,SAmBUlF,GACN,IDrDuDmF,EAAQC,ECqDzDC,GDrDyDD,ECqDvB,UDpDhC,OAD+CD,ECqDtBnF,IDpDF,kBAARmF,GAAoBC,KAAOD,ECoDGG,OAAOtF,EAAMuF,SAAW,iBAC7EX,IAAM5E,MAAM,CAAE8E,MAAO,YAAaC,QAASM,EAAUG,MAAO,SChD7D,IAAMC,EAAyB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACvC,EAAgC1H,oBAAS,GAAzC,mBAAO2H,EAAP,KAAiBC,EAAjB,KACA,EAAgDpG,EAAgBC,eAAxDW,EAAR,EAAQA,cAAeT,EAAvB,EAAuBA,qBACF6E,EAAoBZ,IAAjCiC,YACR,EAA4D/D,IAApDM,EAAR,EAAQA,YAAaE,EAArB,EAAqBA,WAAYE,EAAjC,EAAiCA,aAAcT,EAA/C,EAA+CA,SAoB/C,OAlBA3D,qBAAU,WACH,sBAAC,4BAAA2F,EAAA,yDACA3B,IACFzC,EAAqB,WACrB2C,MAGEE,EANA,mBAOGpC,EAPH,oDAQG2B,EARH,sBAQmB,IAAIR,MAAM,sCAR7B,cASIuE,EAAW5B,6BAA2BC,MAAM4B,YAAYhE,GAT5D,SAUIyC,EAAgBsB,GAAyBE,OAAM,kBAAMJ,GAAY,MAVrE,OAaJA,GAAY,GAbR,2CAAD,KAeJ,CAACxF,IAECuF,EACE,mCAAGD,IADY,cAAC,IAAD,K,uCC9BjB,MAAMO,EAAoBC,IAAOC,IAAV,gFAAGD,CAAH,6H,YCqBjBE,EAAgBC,aAlBY,WACvC,MAA2C7G,EAAgBC,eAAnDgC,EAAR,EAAQA,cAAenB,EAAvB,EAAuBA,gBAEvB,OAAImB,EAEA,eAAC,IAAD,CAAQ6E,KAAK,QAAQC,QAAS,kBAAMjG,GAAgB,IAApD,0BACgBmB,EAAcZ,WAAW9B,QAM3C,cAAC,IAAD,CAAQuH,KAAK,QAAQE,KAAK,UAAUD,QAAS,kBAAMjG,GAAgB,IAAnE,wB,kBCNG,SAASmG,IACd,IAAqBjC,EAAoBZ,IAAjCiC,YAER,OAAOhC,YAAY,CAAC,eAAF,uCAAkB,WAAO6C,GAAP,eAAA3C,EAAA,6DAC5B4C,EAD4B,+BAAA5C,EAAA,MAClB,WAAO1F,EAAwBc,GAA/B,iBAAA4E,EAAA,6DACR6C,EAAqC,CACzCC,UAAWH,EAAMG,UACjBC,OAAQJ,EAAMI,QAEY,WAAxBJ,EAAMK,eACRH,EAAiBI,eAAiB,YAClCJ,EAAiBK,mBAAqBC,UAAQC,UAAUC,QAAQ,GAAGC,QACnET,EAAiBE,OAAS,KAE1BF,EAAiBI,eAAiB,UAE9BM,EAAY,IAAIC,kBAAgB,CAAEC,WAAY,CAACZ,IAAqBvI,EAAUc,GAZtE,kBAaPmI,EAAUG,SAbH,2CADkB,iEAiB5BjD,EAAgBmC,GAjBY,2CAAlB,uDCJb,SAASe,IACd,MAAMC,EAAmBvK,mBAAqB,IAAM,CAAC,CAAEwK,OAAQ,MAAOC,QAAS,KAAM,IACrF,OAAOhK,0BAA6B,YAAa8J,GCJ5C,MAAMG,EAAezB,aAAS,KACnC,MAAM,cAAEvG,EAAF,gBAAiBQ,GAAoBd,EAAgBC,gBACpDtB,GAAejB,IACtB,IAAK4C,EAAe,OAAO,cAAC,IAAD,IAC3B,MAAMiI,EAAmBzE,EAAexD,EAAe,GACjD6E,EAAOxG,EAAYR,8BAAgCmC,EACzD,OACE,qBAAKkI,MAAO,CAAEC,UAAW,OAAQC,aAAc,QAA/C,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKC,KAAM,EAAGC,OAAQ,EAAtB,SACE,qBAAKJ,MAAO,CAAEK,UAAW,UAAzB,SACE,cAAC,IAAD,CAASvD,MAAO,cAACwD,EAAD,CAAYC,UAAQ,EAApB,SAAsBzI,IAAtC,SACE,mBAAG6E,KAAMA,EAAMK,OAAO,SAASC,IAAI,aAAnC,SACG8C,UAKT,cAAC,IAAD,CAAKI,KAAM,EAAGC,OAAQ,EAAtB,SACE,qBAAKJ,MAAO,CAAEQ,MAAO,SAArB,SACE,cAAC,IAAD,CAAQlC,KAAK,QAAQC,QAAS,IAAMjG,GAAgB,GAApD,gCAUNgI,EAAapC,YAAOuC,IAAWC,MAArB,+EAAGxC,CAAH,oB,2DC9BVyC,GAAqBzC,IAAOC,IAAV,oFAAGD,CAAH,6KAeX0C,GAAavC,aAAS,WACjC,MAA8E7G,EAAgBC,eAAtFG,EAAR,EAAQA,QAASD,EAAjB,EAAiBA,qBAAsBO,EAAvC,EAAuCA,QAASD,EAAhD,EAAgDA,SAAUK,EAA1D,EAA0DA,gBAE1D,OACE,cAAC,IAAD,CACEuI,UAAQ,EACR/D,MAAO,iBACPU,MAAO,IACPtF,QAASA,EACT4I,SAAU,kBAAMxI,GAAgB,IAChCyI,OAAQ,KANV,SAQE,cAACJ,GAAD,UACE,cAAC,KAAD,CACEK,YAAY,EACZC,WAAYrJ,EACZsJ,WAAY,SAACC,EAAMjI,GAAP,OACV,cAAC,KAAKkI,KAAN,CACE7C,QAAS,WACPtG,EAAS,MACkB,iBAAvBkJ,EAAKlK,eACPkK,EAAKrI,UAEoB,cAAvBqI,EAAKlK,gBACPU,EAAqBwJ,EAAKtI,WAAW9B,MACrCuB,GAAgB,KARtB,SAYE,cAAC+I,GAAD,CAAgBpI,OAAQkI,EAAMjI,MAAOA,gBActCmI,GAAiBhD,aAAS,SAACiD,GACtC,IAAQrI,EAAkBqI,EAAlBrI,OAAQC,EAAUoI,EAAVpI,MACRlB,EAAUR,EAAgBC,eAA1BO,MACR,MAA6B,iBAAzBiB,EAAOhC,cAEP,gCACE,eAAC,KAAD,WACG4C,EAAkBZ,EAAOJ,WAAW9B,MACrC,cAACwK,GAAA,EAAD,OAEDvJ,GAASA,EAAMkB,QAAUA,GAAS,eAAC,IAAWwH,KAAZ,CAAiBlC,KAAK,SAAtB,cAAiCxG,EAAMA,MAAMuF,cAIzD,eAAzBtE,EAAOhC,cAEP,8BACE,eAAC,KAAD,WACG4C,EAAkBZ,EAAOJ,WAAW9B,MACrC,cAACyK,GAAA,EAAD,CAAcC,MAAI,SAMxB,8BACE,eAAC,KAAD,WACG5H,EAAkBZ,EAAOJ,WAAW9B,MACrC,cAAC2K,GAAA,EAAD,YCzFD,MAAMC,GAAwB,IAEjC,eAAC1D,EAAD,WACE,qBAAK+B,MAAO,CAAEE,aAAc,QAA5B,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKC,KAAM,GAAX,SACE,cAAC,IAAWyB,MAAZ,CAAkBC,MAAO,EAAzB,yBAEF,cAAC,IAAD,CAAK1B,KAAM,GAAX,SACE,qBAAKH,MAAO,CAAEQ,MAAO,QAASsB,WAAY,OAA1C,SACE,cAAC1D,EAAD,aAKR,cAACwC,GAAD,IACA,cAACd,EAAD,O,+CCXC,MAAMiC,GAA6CT,IACxD,MAAM,OAAEU,EAAF,QAAUnC,GAAYyB,EACtBrL,EAAeH,EAAsB2B,gBACrC,cAAEK,GAAkBN,EAAgBC,eACpCwK,EAAQC,aACZ,CAAC,eAAgB,CAAEF,OAAQA,EAAQpI,QAAS9B,KAC5C,KACE,IAAK7B,IAAiB6B,EAAe,MAAM,IAAIyB,MAAM,kCACrD,OAAIyI,EACK/L,EAAakM,cAAcrK,EAAekK,GAE5C/L,EAAamM,uBAAuBtK,KAE7C,CACEuK,UAAWvK,IAGf,OAAImK,EAAMK,QACD,cAAC,IAAW5B,KAAZ,CAAiBlC,KAAK,SAAtB,mBAELyD,EAAMM,KACD,cAAC,IAAW7B,KAAZ,UAAkB/F,EAAY6H,QAAQP,EAAMM,KAAM1C,GAAS4C,qBAE7D,cAACC,GAAA,EAAD,K,aCtBIC,GAAuC,SAACrB,GAAW,IAAD,EAC7D,EAA8BtL,oBAAkB,GAAhD,mBAAOkC,EAAP,KAAgBC,EAAhB,KACM9B,EAAWP,EAAsB2B,eAC/BK,EAAkBN,EAAgBC,eAAlCK,cAEF8K,EAAqBxN,mBAAuB,WAChD,IAAKiB,EAAU,MAAM,IAAIkD,MAAM,iCAC/B,IAAKzB,EAAe,MAAM,IAAIyB,MAAM,sCACpC,OAAOlD,EAASwM,cAAc/K,KAC7B,CAACzB,EAAUyB,IAERgL,GACJ,UAAAxB,EAAMU,cAAN,eAAce,aAAcH,EAAmBG,WAC/CzB,EAAMU,OAAOgB,YAAcJ,EAAmBI,WAC9C1B,EAAMU,OAAOiB,OAASL,EAAmBK,KAErCC,EAAgBJ,EAAS,OAAS,OAExC,OACE,gCACE,cAAC,IAAD,CAAQtE,KAAK,OAAOD,QAAS,kBAAMpG,GAAW,IAA9C,SACG+K,IAEH,cAAC,GAAD,CAAWhL,QAASA,EAASC,WAAYA,EAAYgL,UAAW7B,EAAOwB,OAAQA,QAsBxEM,GAAsC,SAAC9B,GAClD,IAAQpJ,EAA2CoJ,EAA3CpJ,QAASC,EAAkCmJ,EAAlCnJ,WAAYgL,EAAsB7B,EAAtB6B,UAAWL,EAAWxB,EAAXwB,OAExC,EC/CK,WACL,IAAqBtG,EAAoBZ,IAAjCiC,YAER,OAAOhC,YAAY,CAAC,kBAAF,uCAAqB,WAAO6C,GAAP,eAAA3C,EAAA,6DAC/B4C,EAD+B,+BAAA5C,EAAA,MACrB,WAAO1F,EAAwBc,GAA/B,iBAAA4E,EAAA,0DACV2C,EAAMsD,OADI,uBAEN1C,EAAY,IAAI+D,yBACpB,CACExE,UAAWH,EAAMG,UACjByE,KAAM5E,EAAMsD,OACZlD,OAAQJ,EAAMI,QAEhBzI,EACAc,GATU,kBAWLmI,EAAUG,SAXL,cAaNH,EAAY,IAAIiE,qBACpB,CAAE/D,WAAY,CAAC,CAAEX,UAAWH,EAAMG,UAAWC,OAAQJ,EAAMI,OAAQE,eAAgB,eACnF3I,EACAc,GAhBU,kBAkBLmI,EAAUG,SAlBL,2CADqB,iEAuB/BjD,EAAgBmC,GAvBe,2CAArB,uDD4C6D6E,GAA1DC,EAArB,EAAQ5F,YAAiD6F,EAAzD,EAA8CC,UAC9C,EAAyElF,IAApDmF,EAArB,EAAQ/F,YAA8CgG,EAAtD,EAA2CF,UAGrC7G,GAASgG,EAAS,QAAU,SAAWK,EAAUvD,OACjDkE,EAAWvL,uBACf,SAACwL,GACKjB,EACFc,EAAqB,CACnB/E,UAAWkF,EAAOlF,UAClBC,OAAQnE,EAAYqJ,aAAaD,EAAOjF,OAAQqE,EAAUtD,SAASoE,cACnElF,cAAe,UACdvI,MAAK,kBAAM2B,GAAW,MAEzBsL,EAAwB,CACtB5E,UAAWkF,EAAOlF,UAClBC,OAAQnE,EAAYqJ,aAAaD,EAAOjF,OAAQqE,EAAUtD,SAASoE,cACnEjC,OAAQmB,EAAUnB,SACjBxL,MAAK,kBAAM2B,GAAW,QAG7B,CAAC2K,EAAQc,EAAsBH,EAAyBN,EAAWhL,IAE/D+L,EAAUpB,EAASe,EAAiBH,EAO1C,OACE,cAAC,IAAD,CAAO5G,MAAOA,EAAO+D,UAAQ,EAACrD,MAAO,IAAKtF,QAASA,EAAS4I,SAAU,kBAAM3I,GAAW,IAAQ4I,OAAQ,KAAvG,SACE,cAAC,KAAD,CAAQoD,cA7B2B,CAAEtF,UAAW,GAAIC,OAAQ,IA6BtBsF,SAPzB,SAACC,GAEhB,MAAO,IAKqDP,SAAUA,EAApE,SACG,SAACQ,GAAD,OACC,eAAC,KAAD,WACE,gCACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKnE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,YAAf,0BAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,YAAYyH,KAAK,OAAOgG,YAAY,qBAGpD,cAAC,KAAD,CACEzN,KAAK,YACL2G,SAAU,SAAC+G,GACT,OAAO,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,UAK7C,sBAAKzE,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,SAAf,uBAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,SAASyH,KAAK,cAG9B,cAAC,KAAD,CACEzH,KAAK,SACL2G,SAAU,SAAC+G,GACT,OAAO,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,UAK7C,qBAAKzE,MAAO,CAAEC,UAAW,OAAQI,UAAW,UAA5C,SACE,cAAC,IAAD,CAAQ6D,QAASA,EAAS3F,QAAS+F,EAAOI,WAA1C,+BE1HP,MAAMC,GAAsB,KACjC,MAAOxB,GAAazD,IACdkF,EAAkC,CACtC,CACEC,OAAQ,CAACjM,EAAOkM,IAAW,8BAAMA,EAAOlF,UAE1C,CACEiF,OAAQ,CAACjM,EAAOkM,IAAW,cAAC/C,GAAD,CAAclC,QAASiF,EAAOjF,QAASmC,OAAQ8C,EAAO9C,UAEnF,CACE6C,OAAQ,CAACjM,EAAOkM,IAAW,cAAC,GAAD,CAAYlF,OAAQkF,EAAOlF,OAAQC,QAASiF,EAAOjF,QAASmC,OAAQ8C,EAAO9C,WAI1G,OACE,8BACE,cAAC,KAAD,CAAO1D,KAAK,QAAQyG,YAAY,EAAOH,QAASA,EAAS3D,WAAYkC,EAAWnC,WAAY,CAAEgE,SAAU,QCZjGC,GAAiD3D,IAC5D,MAAM,iBAAE3B,EAAF,cAAoBuD,KAAkBgC,GAAgB5D,GACrDpJ,EAASC,GAAcnC,oBAAkB,GAChD,OACE,gCACE,cAAC,IAAD,IAAYkP,EAAa3G,QAAS,IAAMpG,GAAW,GAAnD,SACG+K,GAAgC,KAEnC,cAAC,GAAD,CAAWhL,QAASA,EAASC,WAAYA,EAAYwH,iBAAkBA,QA2BhEyD,GAAuC9B,IAClD,MAAM,QAAEpJ,EAAF,WAAWC,EAAX,iBAAuBwH,GAAqB2B,GAE3C6D,EAAQC,GAAa1F,IAEtByE,EAAiC,CACrCvE,OAAwB,OAAhBD,QAAgB,IAAhBA,KAAkBC,OAASD,EAAiBC,OAAS,GAC7DC,QAAyB,OAAhBF,QAAgB,IAAhBA,KAAkBE,QAAUF,EAAiBE,QAAU,EAChEwF,SAA0B,OAAhB1F,QAAgB,IAAhBA,KAAkB0F,SAAW1F,EAAiB0F,SAAW,GACnEC,SAA0B,OAAhB3F,QAAgB,IAAhBA,KAAkB2F,SAAW3F,EAAiB2F,SAAW,OACnErC,KAAsB,OAAhBtD,QAAgB,IAAhBA,KAAkBsD,KAAOtD,EAAiBsD,KAAO,IAQzD,OACE,cAAC,IAAD,CAAOnG,MAAM,YAAY+D,UAAQ,EAACrD,MAAO,IAAKtF,QAASA,EAAS4I,SAAU,IAAM3I,GAAW,GAAQ4I,OAAQ,KAA3G,SACE,cAAC,KAAD,CACEoD,cAAeA,EACfC,SATYC,IAET,IAQHP,SAAU,CAACC,GAA2BwB,oBACpC,MAAMC,EAA0B,CAC9B5F,OAAQmE,EAAOnE,OACfC,QAASkE,EAAOlE,QAChBmC,OAAQ,CACNe,UAAWgB,EAAOsB,SAClBrC,UAAWe,EAAOuB,SAClBrC,KAAMc,EAAOd,OAGjBmC,EAAUD,EAAOM,OAAOD,IACxBD,GAAc,GACdpN,GAAW,IAff,SAkBImM,GACA,eAAC,KAAD,WACE,gCACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKnE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,SAAf,uBAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,SAASyH,KAAK,cAG9B,cAAC,KAAD,CACEzH,KAAK,SACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK7C,sBAAKzE,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,UAAf,wBAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,UAAUyH,KAAK,gBAG/B,cAAC,KAAD,CACEzH,KAAK,UACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK7C,sBAAKzE,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,WAAf,0BAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,WAAWyH,KAAK,cAGhC,cAAC,KAAD,CACEzH,KAAK,WACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK7C,sBAAKzE,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,WAAf,0BAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,WAAWyH,KAAK,cAGhC,cAAC,KAAD,CACEzH,KAAK,WACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK7C,sBAAKzE,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,OAAf,qBAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,OAAOyH,KAAK,cAG5B,cAAC,KAAD,CACEzH,KAAK,OACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK7C,qBAAKzE,MAAO,CAAEC,UAAW,OAAQI,UAAW,UAA5C,SACE,cAAC,IAAD,CAAQ9B,QAAS+F,EAAOI,WAAxB,8BCpKDgB,GAAuBrH,aAAS,KAC3C,MAAM,cAAEvG,GAAkBN,EAAgBC,eAC1C,OACE,8BACE,eAACwG,EAAD,WACE,qBAAK+B,MAAO,CAAEE,aAAc,QAA5B,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKC,KAAM,GAAX,SACE,cAAC,IAAWyB,MAAZ,CAAkBC,MAAO,EAAzB,wBAEF,cAAC,IAAD,CAAK1B,KAAM,GAAX,SACE,qBAAKH,MAAO,CAAEQ,MAAO,SAArB,SACG1I,GACC,cAACmN,GAAD,CAAgBzG,KAAK,OAAOF,KAAK,QAAQqH,KAAM,cAACC,GAAA,EAAD,CAAoB5F,MAAO,CAAE6F,SAAU,qBAMhG,gCACG/N,GAAiB,cAAC6M,GAAD,KAChB7M,GAAiB,cAAC,IAAD,e,cCftB,MAAMgO,GAAqDxE,IAChE,MAAM,OAAE1B,EAAF,QAAUC,EAAV,OAAmBmC,GAAWV,GAC7BnL,GAAejB,IAChB6Q,EAAaC,SAAMC,kBAAkBjE,GAE3C,OACE,sBAAKhC,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAGC,OAAQ,EAAtB,SACE,cAAC,IAAWM,KAAZ,wBAEF,cAAC,IAAD,CAAKP,KAAM,GAAX,SACE,cAAC,IAAWO,KAAZ,UAAkBd,SAGtB,eAAC,IAAD,CAAKI,MAAO,CAAEC,UAAW,OAAzB,UACE,cAAC,IAAD,CAAKE,KAAM,EAAGC,OAAQ,EAAtB,SACE,cAAC,IAAWM,KAAZ,yBAEF,cAAC,IAAD,CAAKP,KAAM,GAAX,SACE,cAAC,IAAWO,KAAZ,UAAkBb,SAGtB,eAAC,IAAD,CAAKG,MAAO,CAAEC,UAAW,OAAzB,UACE,cAAC,IAAD,CAAKE,KAAM,EAAGC,OAAQ,EAAtB,SACE,cAAC,IAAWM,KAAZ,6BAEF,cAAC,IAAD,CAAKP,KAAM,GAAX,SACE,cAAC,IAAD,CAASrD,MAAO,cAACoJ,GAAD,CAAW3F,UAAQ,EAAnB,SAAqBlE,KAAKC,UAAU0F,KAApD,SACE,cAAC,IAAWmE,KAAZ,CACExJ,KAAMxG,EAAYP,2BAA6BmQ,EAC/C/I,OAAO,SACPC,IAAI,aAHN,SAKG3B,EAAeyK,EAAY,gBASpCG,GAAYhI,YAAOuC,IAAWC,MAArB,iFAAGxC,CAAH,oBC3CFkI,GAAiB/H,aAAUiD,IACtC,MAAM,UAAE6B,GAAc7B,GACfpJ,EAASC,GAAcnC,oBAAkB,IACzC+I,EAAesH,GAAoBrQ,mBAAwB,UAWlE,OACE,sBAAKgK,MAAO,CAAEE,aAAc,QAA5B,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKC,KAAM,EAAGC,OAAQ,EAAtB,SACE,cAAC,IAAD,CAAQ7B,QAbM,KACpB8H,EAAiB,UACjBlO,GAAW,IAWL,sBAEF,cAAC,IAAD,CAAKgI,KAAM,EAAGC,OAAQ,EAAtB,SACE,cAAC,IAAD,CAAQ7B,QAZK,KACnB8H,EAAiB,SACjBlO,GAAW,IAUL,wBAGJ,cAAC,GAAD,CACED,QAASA,EACTC,WAAYA,EACZ4G,cAAeA,EACfuH,aAAcnD,EAAUtD,QACxB0G,YAAapD,EAAUvD,eAwBlBwD,GAAuC9B,IAClD,MAAM,QAAEpJ,EAAF,WAAWC,EAAX,cAAuB4G,EAAvB,aAAsCuH,EAAtC,YAAoDC,GAAgBjF,GAElEzD,YAAa+F,EAAsBD,UAAWE,GAAmBpF,IAGnE3B,EAA0B,WAAlBiC,EAA6B,cAAgB,SAAWwH,EAChEC,EAA8C,WAAlBzH,EAA6B,QAAU,aAOzE,OACE,cAAC,IAAD,CAAOjC,MAAOA,EAAO+D,UAAQ,EAACrD,MAAO,IAAKtF,QAASA,EAAS4I,SAAU,IAAM3I,GAAW,GAAQ4I,OAAQ,KAAvG,SACE,cAAC,KAAD,CACEoD,cAZiC,CAAEtF,UAAW,GAAIC,OAAQ,IAa1DsF,SATYL,IAET,IAQHD,SAAWC,IACTH,EAAqB,CACnB/E,UAAWkF,EAAOlF,UAClBC,OAAQnE,EAAYqJ,aAAaD,EAAOjF,OAAQwH,GAAcrC,cAC9DlF,cAAeA,IACdvI,MAAK,IAAM2B,GAAW,MAR7B,SAWImM,GACA,eAAC,KAAD,WACE,gCACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKnE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,YAAf,SAA4BiC,MAE9B,cAAC,IAAD,CAAKrG,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,YAAYyH,KAAK,OAAOgG,YAAY,qBAGpD,cAAC,KAAD,CACEzN,KAAK,YACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAK1B,UAAlB1F,GACC,sBAAKiB,MAAO,CAAEC,UAAW,QAAzB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAKE,KAAM,EAAX,SACE,uBAAOoE,QAAQ,SAAf,uBAEF,cAAC,IAAD,CAAKpE,KAAM,GAAX,SACE,cAAC,KAAD,CAAOpJ,KAAK,SAASyH,KAAK,cAG9B,cAAC,KAAD,CACEzH,KAAK,SACL2G,SAAW+G,GACF,cAAC,IAAW/D,KAAZ,CAAiBlC,KAAK,SAAtB,SAAgCiG,SAM/C,qBAAKzE,MAAO,CAAEC,UAAW,OAAQI,UAAW,UAA5C,SACE,cAAC,IAAD,CAAQ6D,QAASL,EAAgBtF,QAAS+F,EAAOI,WAAjD,8BCzHD+B,GAAuCnF,IAClD,MAAM,cAAEoF,GAAkBpF,EACpBjL,EAAWP,EAAsB2B,gBAChC0N,GAAUzF,IAEXiH,EAAYvR,mBAAuB,KACvC,IAAKiB,EAAU,MAAM,IAAIkD,MAAM,iCAC/B,OAAOlD,EAASwM,cAAc6D,KAC7B,CAACrQ,EAAUqQ,IAERvD,EAAY/N,mBAA+B,IACxC+P,EAAOxM,MACXC,IAAD,aACE,UAAAA,EAAMoJ,cAAN,eAAcgB,aAAc2D,EAAU3D,WACtCpK,EAAMoJ,OAAOe,YAAc4D,EAAU5D,WACrCnK,EAAMoJ,OAAOiB,OAAS0D,EAAU1D,SAEnC,CAAC0D,EAAWxB,IAETvF,EAASuD,EAAYA,EAAUvD,OAAS,IACxCC,EAAUsD,EAAYA,EAAUtD,QAAQ9E,WAAa,IAE3D,OACE,qCACE,cAAC+K,GAAD,CAAkBlG,OAAQA,EAAQC,QAASA,EAASmC,OAAQ2E,IAC5D,sBAAK3G,MAAO,CAAEC,UAAW,OAAQI,UAAW,UAA5C,WACI8C,GACA,cAAC8B,GAAD,CACEzG,KAAK,UACL0E,cAAc,iBACdvD,iBAAkB,CAChB0F,SAAUsB,EAAU5D,UACpBuC,SAAUqB,EAAU3D,UACpBC,KAAM0D,EAAU1D,QAIrBE,GAAa,cAACiD,GAAD,CAAgBjD,UAAWA,WC1C1C,IAAMyD,GAAsBvI,aAAS,WAC1C,MAAyC7G,EAAgBC,eAAjDgC,EAAR,EAAQA,cAAe3B,EAAvB,EAAuBA,cACjB+O,EAAc,OAAGpN,QAAH,IAAGA,OAAH,EAAGA,EAAeqN,eAAe,cAErD,OACE,8BACGD,GACC,eAAC5I,EAAD,WACE,8BACE,cAAC,IAAW2D,MAAZ,CAAkBC,MAAO,EAAzB,wBAEA/J,GAAiB,cAAC,IAAD,IAClBA,GAAiB,cAAC2O,GAAD,CAAWC,cAAe5O,YCbzCiP,GAAoB,WAC/B,OACE,cAACC,GAAD,UACE,sBAAKC,UAAU,MAAf,UACE,cAACtF,GAAD,IACA,cAACiF,GAAD,IACA,cAAClB,GAAD,UAMFsB,GAAc9I,IAAOC,IAAV,wEAAGD,CAAH,gKCKFgJ,I,QAhBO,WACpB,IAAMC,EAAc,IAAIC,IAExB,OACE,cAACC,EAAA,EAAD,CAAqBC,OAAQH,EAA7B,SACE,cAACrR,EAAsByR,SAAvB,UACE,cAAC/P,EAAgB+P,SAAjB,UACE,cAAC,EAAD,UACE,cAAC,GAAD,cCDGC,OAZUC,IACnBA,GAAeA,aAAuBC,UACnC,+BAAqBlR,MAAK,EAAGmR,SAAQC,SAAQC,SAAQC,SAAQC,cAChEJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASnD,OACP,cAAC,IAAMoD,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BX,M,iCCqCA,SAASY,EAAK7K,GACZ,MAAM,IAAIhE,MAAMgE,GApDlB8K,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQC,cASR,WACE,MAAM,IAAIjP,MAAM,kBATlBgP,EAAQE,WAYR,SAAoBC,GAClB,OAAO,IAAIC,SAAQC,GAAWC,WAAWD,EAASF,MAZpDH,EAAQO,gBA0BR,SAAyBC,GACvB,MAAO,KAAO,IAAIC,MAAMD,IAAkBE,KAAI,IAAMC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAerO,SAAS,MAAKsO,KAAK,KA1BxGd,EAAQe,YA6BR,SAAqBC,GACnB,GAAS,MAALA,EAAW,MAAM,IAAIhQ,MAAM,qBAC/B,OAAOgQ,GA9BThB,EAAQiB,WAiCR,SAAoBC,GAClB,MAAQ,KAAI,IAAIA,GAAOR,KAAIS,GAAKA,EAAE3O,SAAS,IAAI4O,SAAS,EAAG,OAAMN,KAAK,OAjCxEd,EAAQqB,WAoCR,SAAoBC,GAElB,MAAMC,GADND,EAAMA,EAAIE,WAAW,MAAQF,EAAIlO,MAAM,GAAKkO,GAC1BC,MAAM,WACxB,IAAKA,EAAO,MAAM,IAAIvQ,MAAO,gBAAesQ,qBAC5C,OAAOG,WAAWC,KAAKH,EAAMb,KAAIiB,GAAQC,SAASD,EAAM,QAvC1D3B,EAAQH,KAAOA,EACfG,EAAQ6B,QA6CR,SAAiBC,EAAW7Q,GAC1B,GAAI6Q,EAAW,OAEf,GAAmB,oBAAR7Q,EACT,MAAMA,IAGW,kBAARA,GAAkB4O,EAAK5O,GAClC,GAAIA,aAAeD,MAAO,MAAMC,EAChC4O,M,iCChEFC,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ+B,6BAA+B/B,EAAQgC,iBAAmBhC,EAAQiC,iBAAmBjC,EAAQkC,qBAAuBlC,EAAQmC,eAAY,EAEhJ,MAAMA,UAAkBnR,MACtB5C,YAAYgU,EAAUpN,GACpB3G,MAAM2G,GACN1G,KAAK8T,SAAWA,GAKpBpC,EAAQmC,UAAYA,EASpBnC,EAAQkC,qBAPR,cAAmCC,EACjC/T,YAAYgU,EAAUpN,EAAU,8BAC9B3G,MAAM+T,EAAUpN,KAcpBgL,EAAQiC,iBAPR,cAA+BE,EAC7B/T,YAAYgU,EAAUpN,EAAW,+CAA8CoN,EAASC,qBAAqBD,EAASE,UACpHjU,MAAM+T,EAAUpN,KAcpBgL,EAAQgC,iBAPR,cAA+BG,EAC7B/T,YAAYgU,EAAUpN,EAAW,+CAA8CoN,EAASC,qBAAqBD,EAASE,UACpHjU,MAAM+T,EAAUpN,KAcpBgL,EAAQ+B,6BAPR,cAA2CI,EACzC/T,YAAYgU,EAAUpN,EAAW,mDAC/B3G,MAAM+T,EAAUpN,M,8CC5CpB8K,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAETyP,OAAOC,eAAeC,EAAS,YAAa,CAC1CuC,YAAY,EACZC,IAAK,WACH,OAAOC,EAAI5O,aAGfiM,OAAOC,eAAeC,EAAS,cAAe,CAC5CuC,YAAY,EACZC,IAAK,WACH,OAAOC,EAAIjN,eAGfwK,EAAQ0C,QAAK,EAEb,IAAIC,EAAUC,EAAQ,IAElBH,EAAMG,EAAQ,KAiBlB,SAASC,EAAa7B,GACpB,MAAO,CACLxG,UAAWwG,EAAElE,SACbpC,KAAMsG,EAAEtG,KACRD,UAAWuG,EAAEjE,UAIjB,SAAS+F,EAAW9B,GAClB,OAAO,IAAI2B,EAAQI,OAAO/B,EAAExG,UAAWwG,EAAEtG,KAAsB,SAAhBsG,EAAEvG,UAAuBkI,EAAQK,SAAS/M,KAAO0M,EAAQK,SAAShJ,MAwCnH,IAAM0I,EAAK,CACTO,cAhEF,SAAuBjC,GACrB,MAAO,CACLkC,SAAUlC,EAAEmC,QACZC,UAAW,CACTC,QAASrC,EAAEsC,SAASpP,OACpBvD,MAAOqQ,EAAEsC,SAAS3S,SA4DtB4S,YAvDF,SAAqBvC,GACnB,OAAO,IAAI2B,EAAQa,QAAuB,cAAfxC,EAAEkC,SAA2BP,EAAQc,QAAQC,SAAWf,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS5C,EAAEoC,UAAUC,QAASrC,EAAEoC,UAAUzS,SAuD/JkT,WAxCF,SAAoB7C,GAClB,MAAO,CACL8C,YAAa,CACXC,SAAU/C,EAAE+C,SAASC,cACrB/N,KAAM+K,EAAE/K,KAAO4M,EAAa7B,EAAE/K,WAAQ9E,EACtC8S,KAAMpB,EAAa7B,EAAEiD,OAEvBb,UAAWpC,EAAEsC,SAAW,CACtBD,QAASrC,EAAEsC,SAASpP,OACpBvD,MAAOqQ,EAAEsC,SAAS3S,YAChBQ,EACJ6I,KAAMgH,EAAEkD,YA8BVC,SArBF,SAAkBnD,GAChB,OANF,SAAqBA,GACnB,MAAiB,WAAb,EAAOA,IAAuB,MAALA,GACtB,gBAAiBA,EAIpBoD,CAAYpD,GACP,IAAI2B,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOtD,EAAE8C,YAAYC,SAAU,GAAIjB,EAAW9B,EAAE8C,YAAYG,MAAOjD,EAAE8C,YAAY7N,KAAO6M,EAAW9B,EAAE8C,YAAY7N,WAAQ9E,EAAW6P,EAAEoC,UAAY,IAAIT,EAAQiB,SAAS5C,EAAEoC,UAAUC,QAASrC,EAAEoC,UAAUzS,YAASQ,EAAW6P,EAAEhH,MAG7P,IAAI2I,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOtD,EAAEuD,OAAOR,SAAU,GAAIjB,EAAW9B,EAAEuD,OAAON,MAAOjD,EAAEuD,OAAOtO,KAAO6M,EAAW9B,EAAEuD,OAAOtO,WAAQ9E,EAAW6P,EAAEoC,UAAY,IAAIT,EAAQiB,SAAS5C,EAAEoC,UAAUC,QAASrC,EAAEoC,UAAUzS,YAASQ,EAAW6P,EAAEwD,cAiB9O1B,aACAD,eACA4B,aAhBF,SAAsBzD,GACpB,OAAO,IAAI2B,EAAQiB,SAAS5C,EAAEqC,QAASrC,EAAErQ,SAiB3CqP,EAAQ0C,GAAKA,G,iCC9Fb5C,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAETyP,OAAOC,eAAeC,EAAS,gBAAiB,CAC9CuC,YAAY,EACZC,IAAK,WACH,OAAOkC,EAAeC,iBAG1B7E,OAAOC,eAAeC,EAAS,mBAAoB,CACjDuC,YAAY,EACZC,IAAK,WACH,OAAOoC,EAAkBC,oBAG7B/E,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CuC,YAAY,EACZC,IAAK,WACH,OAAOoC,EAAkBE,kBAG7BhF,OAAOC,eAAeC,EAAS,cAAe,CAC5CuC,YAAY,EACZC,IAAK,WACH,OAAOoC,EAAkBG,eAG7BjF,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CuC,YAAY,EACZC,IAAK,WACH,OAAOwC,EAAgBC,kBAI3B,IAAIP,EAAiB9B,EAAQ,KAEzBgC,EAAoBhC,EAAQ,KAE5BoC,EAAkBpC,EAAQ,M,qDCtC9B9C,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQrM,gCAA6B,EAErC,IAAI8O,EAAMG,EAAQ,K,IAEOhO,EAAKC,EAAKxE,EAG7BsD,E,qEACJ,SAAUF,GACR,OAAOE,EAA2BC,MAAMC,UAAUJ,O,KAKtDuM,EAAQrM,2BAA6BA,EAVFtD,EAYkB,CACnDwD,UADmD,SACzCqR,GACR,OAAO,EAAIzC,EAAI5O,WAAWqR,IAG5B1P,YALmD,SAKvC2P,GACV,OAAO,EAAI1C,EAAIjN,aAAa2P,MAlBFtQ,EAYc,WAZnBD,EAYTjB,GAZ8CmM,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,G,iCCP3LyP,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQsF,6BAA0B,EAElC,IAAI3C,EAAUC,EAAQ,IAElBH,EAAMG,EAAQ,KAEd2C,EAAS3C,EAAQ,KAEjB4C,EAAU5C,EAAQ,KAGtB,MAAM0C,UAAgC3C,EAAQ8C,QAC5CrX,YAAYN,GACVO,MAAMqX,OAAO5X,EAAS6X,OAAOC,eAC7BtX,KAAKR,SAAWA,EAIlB+X,YAAYC,GACV,MAAO,CAACrD,EAAIC,GAAGa,YAAYjV,KAAKR,SAASiY,WAAW,SAAUtD,EAAIC,GAAGa,YAAYjV,KAAKR,SAASiY,WAAW,mBAAoBtD,EAAIC,GAAGa,YAAYjV,KAAKR,SAASiY,WAAW,0BAA2BtD,EAAIC,GAAGa,YAAYjV,KAAKR,SAASiY,WAAW,sBAAuBtD,EAAIC,GAAGa,YAAYjV,KAAKR,SAASiY,WAAW,2BACjT,EAAIP,EAAQK,gBAIjBG,sBAAsB3U,GACpB,MAAM4U,EAAe,CAACpR,EAAKxD,KACzB,MAAMoI,EAASnL,KAAKR,SAASoY,cAAc7U,GACrC8U,EAAe7X,KAAKR,SAASsY,gBAAgBvR,GACnD,OAAOsR,EAAaE,YAAc5M,EAAOe,WAAa2L,EAAaG,YAAc7M,EAAOgB,WAG1F,OAAIwL,EAAa,qBAAsB5U,GAC9B,CACL4S,KAAM,KAAO,IAAIsC,OAAO,KACxBC,WAAY,GACZC,YAAa,IAIbR,EAAa,wBAAyB5U,IAQtC4U,EAAa,wBAAyB5U,GAPjC,CACL4S,KAAM,KAAO,IAAIsC,OAAO,KACxBC,WAAY,GACZC,YAAa,IAYbR,EAAa,iBAAkB5U,GAC1B,CACL4S,KAAM,KAAO,IAAIsC,OAAO,KACxBC,WAAY,GACZC,YAAa,IAIbR,EAAa,UAAW5U,GACnB,CACL4S,KAAM,KAAO,IAAIsC,OAAO,MACxBC,WAAY,GACZC,YAAa,SAIjB,EAAIlB,EAAO1F,MAAO,oBAAmBxO,MAKzC2O,EAAQsF,wBAA0BA,G,iGC/ElCxF,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ0G,+BAA4B,EAEpC,IAAI/D,EAAUC,EAAQ,IAElBH,EAAMG,EAAQ,K,IAIZ+D,E,8BACJ,WAAYC,EAAW9Y,GAAgD,MAAtC+Y,EAAsC,uDAA7B,IAAIlE,EAAQmE,cAAiB,kBACrE,cAAMD,IACDD,UAAYA,EACjB,EAAK9Y,SAAWA,EAHqD,E,iEAMvE,WAAmBiZ,GAAnB,sFACQC,EAAO,GADf,KAGqBvE,EAAIC,GAHzB,KAGuCpU,KAAKR,SAH5C,SAGyEQ,KAAKsY,UAAUxV,aAHxF,6BAGqD8U,cAHrD,gBAGQe,EAHR,KAG4BnE,WAH5B,oBAKqBiE,GALrB,+DAKanO,EALb,SAMaqL,KAAKiD,SAASD,GAN3B,kCAOwB3Y,KAAKsY,UAAUO,YAAYvO,EAAK5D,SAPxD,QAOYoS,EAPZ,OAQMJ,EAAK7W,KAAKiX,GARhB,wBAUMJ,EAAK7W,KAAK,MAVhB,yKAcS6W,GAdT,gE,4DAP4BrE,EAAQ0E,QA0BhCX,E,WACJ,WAAYY,GACV,IAAIC,EA9BiB3S,EAAKC,EAAKxE,EA6BZ,UA7BYA,OAgCE,GAhCPwE,EAgCJ,aAhCDD,EAgCLtG,MAhC0CwR,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAkCvL,IAAMwW,EAAgD,QAAtCU,EAAkBD,EAAQT,cAAwC,IAApBU,EAA6BA,EAAkB,IAAI5E,EAAQmE,cACzHxY,KAAKoD,QAAU,IAAIiV,EAAgBrY,KAAMgZ,EAAQxZ,SAAU+Y,G,yDAS7D,WAAWpT,GAAX,qFACuBnF,KAAKoD,QAAQ8V,KAAK/T,GADzC,cACQgU,EADR,yBAES9E,EAAQ+E,aAAaC,qBAAqBF,IAFnD,gD,8DAOFzH,EAAQ0G,0BAA4BA,G,iCC5DpC5G,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ4H,qBAAkB,EAE1B,IAAIC,EAAOjF,EAAQ,KAEfkF,EAAQlF,EAAQ,KAEhBmF,EAAiBnF,EAAQ,KAEzBD,EAAUC,EAAQ,IAElBoF,EAAQpF,EAAQ,KAEhBqF,EAAUrF,EAAQ,KAElBsF,EAAWtF,EAAQ,KAEnB2C,EAAS3C,EAAQ,KAEjBuF,EAAuBvF,EAAQ,KAEnC,SAASwF,EAAgBxT,EAAKC,EAAKxE,GAAiK,OAApJwE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAAgBuE,EAE3M,MAAMgT,UAAwBE,EAAMjD,iBAClCzW,YAAYia,EAAa,wBAAyBC,EAAS,yBACzDja,QAEA+Z,EAAgB9Z,KAAM,eAAW,GAEjC8Z,EAAgB9Z,KAAM,WAAO,GAEzB+Z,aAAsBN,EAAeQ,cAAeja,KAAKka,QAAUH,EAAgB/Z,KAAKka,QAAU,IAAIT,EAAeQ,cAAcF,GACnIC,aAAkBT,EAAKY,IAAKna,KAAKoa,IAAMJ,EAAYha,KAAKoa,IAAM,IAAIb,EAAKY,IAAIH,GAGxD,0BAACjX,EAASsX,GACjC,MAAM1E,EAAO3V,KAAK4X,cAAc7U,GAC1BuX,EAAY,CAChBnP,OAAQwK,EACR4E,YAAa,OACbC,OAAQ,CACNC,sBAAuB,CAAC,MAAO,SAI7BC,GAAS,EAAIhB,EAAMtG,MAAMpT,KAAKka,QAAQS,UAAU,CACpDC,WAAYN,KACVO,MAAK,EAAInB,EAAMoB,SAAQC,GAAO/a,KAAKka,QAAQS,UAAU,CACvDC,WAAYN,EACZU,aAAcD,EAAIE,eAChB,IAAI,EAAIvB,EAAMwB,YAAWH,GAAOA,EAAII,QAAQtW,OAAS,KAAI,EAAI6U,EAAM0B,YAAWL,GAAOA,EAAII,WAAU,EAAIzB,EAAMc,SAAQa,GAA4B,MAApBA,EAAKpF,OAAOtO,QAC7I,EAAI+R,EAAM4B,OAAM,CAACC,EAAKC,KAAN,CACdC,MAAOF,EAAIE,MAAM7M,OAAO4M,GACxBvT,OAAQsT,EAAItT,OAASyT,OAAOF,EAAKvF,OAAOR,aACtC,CACFxN,OAAQ,GACRwT,MAAO,MACL,EAAI/B,EAAMwB,YAAWK,GAAOA,EAAItT,OAASyT,OAAOrB,KAAkB,IAChEkB,QAAY,EAAI7B,EAAMiC,eAAejB,EAAQ,CACjDkB,aAAc,CACZ3T,OAAQ,GACRwT,MAAO,MAIX,GAAIF,EAAItT,OAASyT,OAAOrB,GACtB,MAAM,IAAIV,EAAQhG,iBAAiB,CACjCgC,OACA5B,SAAUsG,EACVrG,OAAQ4F,EAAS5D,OAAO5C,KAAKmI,EAAItT,QAAQO,UAI7C,OAAO+S,EAAIE,MAOe,6BAAC1Y,GAC3B,MAAMuX,EAAY,CAChBnP,OAAQnL,KAAK4X,cAAc7U,GAC3BwX,YAAa,OACbC,OAAQ,CACNC,sBAAuB,CAAC,MAAO,SAI7BoB,GAAW,EAAInC,EAAMtG,MAAMpT,KAAKka,QAAQS,UAAU,CACtDC,WAAYN,KACVO,MAAK,EAAInB,EAAMoB,SAAQC,GAAO/a,KAAKka,QAAQS,UAAU,CACvDC,WAAYN,EACZU,aAAcD,EAAIE,eAChB,IAAI,EAAIvB,EAAMwB,YAAWH,GAAOA,EAAII,QAAQtW,OAAS,KAAI,EAAI6U,EAAM0B,YAAWL,GAAOA,EAAII,WAAU,EAAIzB,EAAMc,SAAQa,GAA4B,MAApBA,EAAKpF,OAAOtO,QAAe,EAAI+R,EAAMoC,SAAQ,CAACC,EAASV,IAASU,EAAUL,OAAOL,EAAKpF,OAAOR,WAAW,KACnOsG,QAAgB,EAAIrC,EAAMiC,eAAeE,EAAU,CACvDD,aAAc,QAEhB,OAAOnV,OAAOsV,GAGhBC,gBACE,OAAOhc,KAAKoa,IAAI6B,eAGlBC,eACE,OAAOlc,KAAKoa,IAAI+B,sBAGlBxW,gBAAgBR,GACd,OAAOnF,KAAKoa,IAAIgC,iBAAiBjX,GAGd,sBAACpC,EAASsZ,EAAKC,GAClC,MAAM3G,EAAO3V,KAAK4X,cAAc7U,GAC1BuX,EAAY,CAChBnP,OAAQwK,EACR6E,OAAQ,CACNrP,OAAQkR,GAEV9B,YAAa,QAETG,GAAS,EAAIhB,EAAMtG,MAAMpT,KAAKka,QAAQS,UAAU,CACpDC,WAAYN,KACVO,MAAK,EAAInB,EAAMoB,SAAQC,GAAO/a,KAAKka,QAAQS,UAAU,CACvDC,WAAYN,EACZU,aAAcD,EAAIE,eAChB,IAAI,EAAIvB,EAAMwB,YAAWH,GAAOA,EAAII,QAAQtW,OAAS,KAAI,EAAI6U,EAAM0B,YAAWL,GAAOA,EAAII,WAAU,EAAIzB,EAAM4B,OAAM,CAACC,EAAKgB,KAAN,CACrHd,MAAOF,EAAIE,MAAM7M,OAAO2N,GACxBtU,OAAQsT,EAAItT,OAASyT,QAAO,EAAIrH,EAAQmI,gBAAgBD,EAAarG,YAAYpR,MAAM,EAAG,SACxF,CACFmD,OAAQ,GACRwT,MAAO,MACL,EAAI/B,EAAMwB,YAAWK,GAAOA,EAAItT,OAASyT,OAAOY,KAAgB,IAE9Df,QAAY,EAAI7B,EAAMiC,eAAejB,EAAQ,CACjDkB,aAAc,CACZ3T,OAAQ,GACRwT,MAAO,MAIX,GAAIF,EAAItT,OAASyT,OAAOY,GACtB,MAAM,IAAI3C,EAAQjG,iBAAiB,CACjCiC,OACA5B,SAAUuI,EACVtI,OAAQ4F,EAAS5D,OAAO5C,KAAKmI,EAAItT,QAAQO,UAI7C,OAAO+S,EAAIE,MAGbnQ,cAAcvI,EAASsZ,GACrB,MAAM/B,EAAY,CAChBnP,OAAQnL,KAAK4X,cAAc7U,GAC3ByX,OAAQ,CACNrP,OAAQkR,GAEV9B,YAAa,QAETsB,GAAW,EAAInC,EAAMtG,MAAMpT,KAAKka,QAAQS,UAAU,CACtDC,WAAYN,KACVO,MAAK,EAAInB,EAAMoB,SAAQC,GAAO/a,KAAKka,QAAQS,UAAU,CACvDC,WAAYN,EACZU,aAAcD,EAAIE,eAChB,IAAI,EAAIvB,EAAMwB,YAAWH,GAAOA,EAAII,QAAQtW,OAAS,KAAI,EAAI6U,EAAM0B,YAAWL,GAAOA,EAAII,WAAU,EAAIzB,EAAMoC,SAAQ,CAACP,EAAKgB,IAAiBhB,EAAMG,QAAO,EAAIrH,EAAQmI,gBAAgBD,EAAarG,YAAYpR,MAAM,EAAG,OAAO,KAClO,OAAO,EAAI4U,EAAMiC,eAAeE,EAAU,CACxCD,aAAc,KACbjc,MAAK+S,GAAKjM,OAAOiM,KAGW,kCAAC9M,EAAQoT,EAAU,IAClD,MAAM,eACJyD,EAAiB,IADb,UAEJC,EAAY,KACV1D,EACErU,EAAQgY,KAAKC,MACnB,IAAIC,EAAS,KAEb,KAAOF,KAAKC,MAAQjY,GAAS+X,GAAW,CACtC,IAAII,EAEJ,MAAM3X,QAAWnF,KAAKoa,IAAI2C,gBAAgBnX,GAE1C,GAAsJ,eAA1I,OAAPT,QAAsB,IAAPA,GAA4D,QAAlC2X,EAAgB3X,EAAG6X,iBAAyC,IAAlBF,OAApD,EAAwFA,EAAcG,QAAyB,CACjKJ,EAAS1X,EAAG+X,YACZ,YAGI,EAAIjG,EAAOrF,YAAY6K,GAG/B,MAAMU,EAAS/F,aAAapX,KAAKoa,IAAIgD,wBAErC,KAAOT,KAAKC,MAAQjY,GAAS+X,GAAW,CACtC,MAAMW,QAAmBrd,KAAKka,QAAQoD,UACtC,GAAIlG,OAAOiG,EAAWE,eAAiBJ,EAAQ,YACzC,EAAIlG,EAAOrF,YAAY6K,GAG/B,OAAOI,EAGTW,wBACE,OAAO,IAAI3D,EAAqB4D,oBAAoBzd,KAAKka,UAK7DxI,EAAQ4H,gBAAkBA,G,iCCpN1B9H,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAGT,IAAI2b,EAAUpJ,EAAQ,KAEtB9C,OAAOmM,KAAKD,GAASvb,SAAQ,SAAUoE,GACzB,YAARA,GAA6B,eAARA,IACrBA,KAAOmL,GAAWA,EAAQnL,KAASmX,EAAQnX,IAC/CiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOwJ,EAAQnX,W,iCCZrBiL,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQkM,cAGR,SAAuBC,EAAkB,IACvC,OAAO,GAMLA,EAAkB,EAIpB,GAEE,GAEA,EAIF,IArBFnM,EAAQoM,qBA0BR,SAA8BD,EAAkB,IAE9C,OAAO,GAILA,EAAkB,I,gCCpCtBrM,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET,IAAIgc,EAAe,CACjB1V,SAAS,EACT2V,QAAQ,EACR7O,OAAO,EACP1Q,YAAY,GAEd+S,OAAOC,eAAeC,EAAS,aAAc,CAC3CuC,YAAY,EACZC,IAAK,WACH,OAAO+J,EAAYxf,cAGvBiT,EAAQvC,MAAQuC,EAAQsM,OAAStM,EAAQrJ,aAAU,EAEnD,IAAImR,EAAQlF,EAAQ,KAEpB9C,OAAOmM,KAAKnE,GAAOrX,SAAQ,SAAUoE,GACvB,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAASiT,EAAMjT,IAC7CiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOsF,EAAMjT,UAKnB,IAAI8X,EAAW/J,EAAQ,KAEvB9C,OAAOmM,KAAKU,GAAUlc,SAAQ,SAAUoE,GAC1B,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAAS8X,EAAS9X,IAChDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOmK,EAAS9X,UAKtB,IAAI+X,EAAahK,EAAQ,KAEzB9C,OAAOmM,KAAKW,GAAYnc,SAAQ,SAAUoE,GAC5B,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAAS+X,EAAW/X,IAClDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOoK,EAAW/X,UAKxB,IAAIgY,EAAcjK,EAAQ,KAE1B9C,OAAOmM,KAAKY,GAAapc,SAAQ,SAAUoE,GAC7B,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAASgY,EAAYhY,IACnDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOqK,EAAYhY,UAKzB,IAAIqT,EAAW4E,EAAwBlK,EAAQ,MAE/C5C,EAAQrJ,QAAUuR,EAElB,IAAID,EAAU6E,EAAwBlK,EAAQ,MAE9C5C,EAAQsM,OAASrE,EAEjB,IAAI1C,EAASuH,EAAwBlK,EAAQ,MAE7C5C,EAAQvC,MAAQ8H,EAEhB,IAAIgH,EAAc3J,EAAQ,KAE1B,SAASmK,EAAyBC,GAAe,GAAuB,oBAAZC,QAAwB,OAAO,KAAM,IAAIC,EAAoB,IAAID,QAAeE,EAAmB,IAAIF,QAAW,OAAQF,EAA2B,SAAUC,GAAe,OAAOA,EAAcG,EAAmBD,IAAsBF,GAExS,SAASF,EAAwBlY,EAAKoY,GAAe,IAAKA,GAAepY,GAAOA,EAAIwY,WAAc,OAAOxY,EAAO,GAAY,OAARA,GAA+B,kBAARA,GAAmC,oBAARA,EAAsB,MAAO,CAAEyY,QAASzY,GAAS,IAAI0Y,EAAQP,EAAyBC,GAAc,GAAIM,GAASA,EAAMC,IAAI3Y,GAAQ,OAAO0Y,EAAM9K,IAAI5N,GAAQ,IAAI4Y,EAAS,GAAQC,EAAwB3N,OAAOC,gBAAkBD,OAAO4N,yBAA0B,IAAK,IAAI7Y,KAAOD,EAAO,GAAY,YAARC,GAAqBiL,OAAO0M,UAAUC,eAAeC,KAAK9X,EAAKC,GAAM,CAAE,IAAI8Y,EAAOF,EAAwB3N,OAAO4N,yBAAyB9Y,EAAKC,GAAO,KAAU8Y,IAASA,EAAKnL,KAAOmL,EAAKC,KAAQ9N,OAAOC,eAAeyN,EAAQ3Y,EAAK8Y,GAAgBH,EAAO3Y,GAAOD,EAAIC,GAAyE,OAA7D2Y,EAAOH,QAAUzY,EAAS0Y,GAASA,EAAMM,IAAIhZ,EAAK4Y,GAAkBA,I,uDCzF3xB1N,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,K,iCCDTyP,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ6E,sBAAmB,EAE3B,IAAIgJ,EAAiBjL,EAAQ,KAEzBsF,EAAWtF,EAAQ,KAEvB,SAASwF,EAAgBxT,EAAKC,EAAKxE,GAAiK,OAApJwE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAAgBuE,EA0G3MoL,EAAQ6E,iBAxGR,MACEzW,cACEga,EAAgB9Z,KAAM,eAAe,GAErC8Z,EAAgB9Z,KAAM,eAAW,GAGzB,aACR,IAAKA,KAAKkX,QAAS,MAAM,IAAIxU,MAAM,4DACnC,OAAO1C,KAAKkX,QAGdY,gBAAgBvR,GACd,OAAOvG,KAAKqX,OAAOmI,QAAQjZ,GAG7BkZ,UAAUC,EAAWtT,GACnB,MAAMyL,EAAe7X,KAAK8X,gBAAgB4H,GAC1C,GAAK7H,EACL,MAAO,CACL3L,UAAW2L,EAAaE,UACxB3L,OACAD,UAAW0L,EAAaG,WAI5BP,WAAWiI,GACT,MAAM7H,EAAe7X,KAAK8X,gBAAgB4H,GAC1C,GAAK7H,EACL,MAAO,CACLjD,SAAUiD,EAAa8H,SACvB7K,UAAW,CACTC,QAAS8C,EAAa+H,QACtBvd,MAAOwV,EAAagI,QAK1BC,qBAAqB/c,GACnB,MAAMoI,EAASnL,KAAK4X,cAAc7U,GAC5Bgd,EAAgBvO,OAAOtE,OAAOlN,KAAKqX,OAAOmI,SAChD,GAAqB,MAAjBO,EAAuB,OAC3B,MAAM1d,EAAQ0d,EAAcC,WAAUnI,IAAkC,OAAjBA,QAA0C,IAAjBA,OAA0B,EAASA,EAAaE,aAAe5M,EAAOe,YAA+B,OAAjB2L,QAA0C,IAAjBA,OAA0B,EAASA,EAAaG,aAAe7M,EAAOgB,YAC7P8T,EAAQF,EAAc1d,GAC5B,OAAK4d,EACE,CACLrL,SAAUqL,EAAMN,SAChB7K,UAAW,CACTC,QAASkL,EAAML,QACfvd,MAAO4d,EAAMJ,aALjB,EAUFK,oBAAoB/U,GAClB,OAAOnL,KAAK8f,qBAAqB9f,KAAKmgB,eAAehV,IAQ7C,WAACkM,GACT,IAAIrX,KAAKogB,YAAT,CAEA,GAAI/I,EAAQ,CACV,MAAMC,EAAeD,EAAOC,aAAeD,EAAOC,oBAAsBtX,KAAKgc,iBAAiBqE,aAC9FrgB,KAAKkX,QAAU,IAAKG,EAClBC,oBAEG,CACL,MACMgJ,EAAgC,eADdtgB,KAAKkc,gBACDqE,MACtBC,QAAmBxgB,KAAKgc,gBAC9Bhc,KAAKkX,QAAUoJ,EAAY,IAAKf,EAAe9gB,WAAWgiB,KACxDnJ,aAAckJ,EAAWH,cACvB,IAAKd,EAAe9gB,WAAWiiB,QACjCpJ,aAAckJ,EAAWH,cAI7BrgB,KAAKogB,aAAc,GAGrBD,eAAehV,GACb,OAAO,EAAIyO,EAAS+G,iBAAiBxV,EAAQ,CAC3CkM,OAAQrX,KAAKqX,SASjBO,cAAc7U,GACZ,OAAO,EAAI6W,EAASgH,cAAc7d,EAAS,CACzCsU,OAAQrX,KAAKqX,Y,qDC7GnB7F,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQiF,oBAAiB,EAEzB,IAIgCrQ,EAJ5B2Q,EAAS3C,EAAQ,KAEjBuM,GAE4Bva,EAFWgO,EAAQ,OAEEhO,EAAIwY,WAAaxY,EAAM,CAAEyY,QAASzY,GAEvF,SAASwT,EAAgBxT,EAAKC,EAAKxE,GAAiK,OAApJwE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAAgBuE,E,IAErMqQ,E,WAKJ,aAAc,qBACZmD,EAAgB9Z,KAAM,aAAc,CAClCE,KAAM,iBACN4gB,SAAU,GACVC,YAAa,sBAGfjH,EAAgB9Z,KAAM,gBAAiB,gBAEvC8Z,EAAgB9Z,KAAM,cAAU,GAEhC8Z,EAAgB9Z,KAAM,eAAW,GAEjC8Z,EAAgB9Z,KAAM,MAAM,SAACghB,EAAOC,GAClC,EAAKC,QAAQ5e,GAAG0e,EAAOC,MAGzBjhB,KAAKkhB,QAAU,IAAIL,EAAc9B,Q,iCAGnC,WAAU,WACFoC,EAAwC,iBAAvBnhB,KAAKI,eAC5B,EAAI6W,EAAOmK,WAAWD,EAAtB,WAA0CnhB,KAAKgC,WAAW9B,KAA1D,mCACKihB,IACLnhB,KAAKqhB,yBAAyB,cACzBrhB,KAAKshB,aAAa3hB,MAAK,SAAAW,GAC1B,EAAK+gB,yBAAyB,aAC9B,EAAKE,kBAAkBjhB,MACtB,SAAAkhB,GACD,EAAKC,UAAUD,GACf,EAAKH,yBAAyB,sB,wBAIlC,WACErhB,KAAKqhB,yBAAyB,gBAC9BrhB,KAAKkhB,QAAQQ,uB,4BAGf,SAAeC,GACb,OAAO3hB,KAAKgC,WAAW8e,SAASc,SAASD,K,8BAG3C,WACE,OAAO3hB,KAAKI,gB,uBAGd,WACE,OAAOJ,KAAKM,S,sCAGd,SAAyB2c,GACvBjd,KAAKI,cAAgB6c,EACrBjd,KAAKkhB,QAAQW,KAAK,uBAAwB5E,K,+BAG5C,SAAkB3c,GAChBN,KAAKM,OAASA,EACdN,KAAKkhB,QAAQW,KAAK,gBAAiBvhB,K,uBAGrC,WAAyF,IAA/Ea,EAA+E,uDAAvE,IAAIuB,MAAJ,2CAA8C1C,KAAKgC,WAAW9B,OAC9EF,KAAKkhB,QAAQW,KAAK,QAAS1gB,K,2BAG7B,SAAca,GACZ,MAIIA,EAHF9B,YADF,MACSF,KAAKgC,WAAW9B,KADzB,IAII8B,EAFF8e,gBAFF,MAEa9gB,KAAKgC,WAAW8e,SAF7B,IAII9e,EADF+e,mBAHF,MAGgB/gB,KAAKgC,WAAW+e,YAHhC,EAKA/gB,KAAKgC,WAAa,CAChB9B,OACA4gB,WACAC,mB,KAMNrP,EAAQiF,eAAiBA,G,iCClGzBnF,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAETyP,OAAOC,eAAeC,EAAS,QAAS,CACtCuC,YAAY,EACZC,IAAK,WACH,OAAO4N,EAAOC,SAGlBvQ,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CuC,YAAY,EACZC,IAAK,WACH,OAAO4N,EAAOE,kBAGlBxQ,OAAOC,eAAeC,EAAS,YAAa,CAC1CuC,YAAY,EACZC,IAAK,WACH,OAAO+N,EAAWb,aAGtB5P,OAAOC,eAAeC,EAAS,gBAAiB,CAC9CuC,YAAY,EACZC,IAAK,WACH,OAAOgO,EAAWvQ,iBAItB,IAAImQ,EAASxN,EAAQ,KAEjB2N,EAAa3N,EAAQ,KAErB4N,EAAa5N,EAAQ,M,iCChCzB9C,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQsQ,eAOR,SAAwBG,GACjBA,EAAUjP,WAAW,WAAUiP,EAAY,QAAUA,GAC1D,OAAO,EAAIL,EAAO/C,SAASoD,IAR7BzQ,EAAQqQ,WAAQ,EAEhB,IAEgCzb,EAF5Bwb,GAE4Bxb,EAFIgO,EAAQ,OAEShO,EAAIwY,WAAaxY,EAAM,CAAEyY,QAASzY,GAOvF,IAAMyb,GAAQ,EAAID,EAAO/C,SAAS,QAClCrN,EAAQqQ,MAAQA,G,iCChBhBvQ,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAETyP,OAAOC,eAAeC,EAAS,YAAa,CAC1CuC,YAAY,EACZC,IAAK,WACH,OAAOkO,EAAerD,WAI1B,IAEgCzY,EAF5B8b,GAE4B9b,EAFYgO,EAAQ,OAEChO,EAAIwY,WAAaxY,EAAM,CAAEyY,QAASzY,I,iCCZvFkL,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQC,cAER,WACE,MAAM,IAAIjP,MAAM,mB,iCCNlB8O,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET,IAAIgc,EAAe,CACjBvd,iBAAiB,EACjBX,oBAAoB,GAEtB2R,OAAOC,eAAeC,EAAS,kBAAmB,CAChDuC,YAAY,EACZC,IAAK,WACH,OAAOmO,EAAU7hB,mBAGrBgR,OAAOC,eAAeC,EAAS,qBAAsB,CACnDuC,YAAY,EACZC,IAAK,WACH,OAAOmO,EAAUxiB,sBAIrB,IAAIwiB,EAAY/N,EAAQ,KAEpBgO,EAAiBhO,EAAQ,KAE7B9C,OAAOmM,KAAK2E,GAAgBngB,SAAQ,SAAUoE,GAChC,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAAS+b,EAAe/b,IACtDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOoO,EAAe/b,W,mHC/B5BiL,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ6Q,YAAcA,EACtB7Q,EAAQ8Q,2BAA6B9Q,EAAQ7R,mBAAqB6R,EAAQlR,qBAAkB,EAE5F,IAcgC8F,EAd5Bmc,EAAMnO,EAAQ,KAEdkF,EAAQlF,EAAQ,KAEhBD,EAAUC,EAAQ,IAElBoO,GAQ4Bpc,EARagO,EAAQ,OAQAhO,EAAIwY,WAAaxY,EAAM,CAAEyY,QAASzY,GANnFqc,EAAYrO,EAAQ,KAEpB2C,EAAS3C,EAAQ,KAEjBsO,EAA6BtO,EAAQ,KAIzC,SAASuO,EAAsBC,EAAUC,GAA0F,OAEnI,SAAkCD,EAAU9gB,GAAc,GAAIA,EAAWkS,IAAO,OAAOlS,EAAWkS,IAAIkK,KAAK0E,GAAa,OAAO9gB,EAAWD,MAFAihB,CAAyBF,EAA3FG,EAA6BH,EAAUC,EAAY,QAI3H,SAASG,EAAsBJ,EAAUC,EAAYhhB,GAA4I,OAIjM,SAAkC+gB,EAAU9gB,EAAYD,GAAS,GAAIC,EAAWsd,IAAOtd,EAAWsd,IAAIlB,KAAK0E,EAAU/gB,OAAe,CAAE,IAAKC,EAAW+U,SAAY,MAAM,IAAIoM,UAAU,4CAA+CnhB,EAAWD,MAAQA,GAJ9GqhB,CAAyBN,EAApFG,EAA6BH,EAAUC,EAAY,OAAuDhhB,GAAeA,EAExM,SAASkhB,EAA6BH,EAAUC,EAAYM,GAAU,IAAKN,EAAW9D,IAAI6D,GAAa,MAAM,IAAIK,UAAU,gBAAkBE,EAAS,kCAAqC,OAAON,EAAW7O,IAAI4O,GAMjN,SAASQ,IACP,OAAO,EAAIZ,EAAgB3D,WAAWpf,MAAK,kBAAM4jB,OAAOC,Y,IAGpDC,E,8BACJ,WAAYrkB,GAAc,wBACxB,gBACKA,aAAeA,EATxB,SAAyBkH,EAAKC,EAAKxE,GAAawE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAWvL+X,CAAgB,EAAD,GAAO,YAAY,SAAA4J,GAC3BvR,MAAMwR,QAAQD,KAEM,IAArBA,EAAU7e,OAKd,EAAK0c,kBAAkB,EAAKqC,iBAJ1B,EAAKvC,yBAAyB,oBAOlC,EAAKphB,cAAc,CACjB6gB,SAAU,EAAK+C,mBACf9C,YAAa,oCACb7gB,KAAM,uBAlBgB,E,oCAsB1B,WAAa,WACNojB,IAAS3jB,MAAK,SAAAmkB,GAAW,OAAIA,EAAYC,oBAAoB,kBAAmB,EAAK9C,aAAWthB,MAAK,gE,mDAG5G,yGAC4B2jB,IAD5B,cACQQ,EADR,QAEcE,YAAY,kBAAmBhkB,KAAKihB,UAFlD,kBAGS6C,EAAYG,SAAStkB,MAAK,kBAAM,EAAKikB,oBAH9C,gD,2DA3B6BpK,EAAM7C,gBAmC/BuN,E,8BACJ,WAAY9kB,GAAc,wBACxB,cAAM,CACJI,SAAUJ,KAEPA,aAAeA,EAJI,E,gEAO1B,WAAkBsH,GAAlB,2FACiC4c,IADjC,cACQa,EADR,OAEQ/Q,EAAO+Q,EAAiBC,gBAFhC,SAGuBD,EAAiBE,QAAQ,CAC5CC,OAAQ,gBACRC,OAAQ,CAACnR,EAAM1M,KALnB,cAGQmW,EAHR,QAOM2H,EAAIpN,OAAO9D,SAASuJ,EAAO/X,OAAO,GAAI,MACjC,KAAI0f,GAAK,IARpB,kBASS,KAAOnQ,EAAQoQ,SAASC,IAAIxgB,SAAS,IAAI4O,SAAS,EAAG,KAAO+J,EAAO/X,MAAM,GAAI,GAAK0f,EAAEtgB,SAAS,IAAI4O,SAAS,EAAG,MATtH,4C,4DAR6B8P,EAA2BxK,2BAsBpD5X,E,2HACJ,WACE,OAAO,uJACL,yFACQ6W,EAASrX,KAAKZ,aAAa0Y,gBAAgB,qBADnD,KAES9X,KAAKZ,aAFd,KAGeiY,EAAOW,UAHtB,SAIiBsL,IAJjB,0BAI2Bc,gBAJ3B,KAKe/M,EAAOU,UALtB,MAGI5L,UAHJ,KAIIC,KAJJ,KAKIF,UALJ,6BAE2BiU,eAF3B,iEADK,0DAAI,CAAc+D,GAAlB,CAULlkB,KAAKZ,gB,8BAGT,WACE,MAAO,CAAC,W,GAhBkBqkB,GAqB9B/R,EAAQlR,gBAAkBA,E,IAEpBX,E,2HACJ,WACE,OAAO,uJACL,yFACQwX,EAASrX,KAAKZ,aAAa0Y,gBAAgB,yBADnD,KAES9X,KAAKZ,aAFd,KAGeiY,EAAOW,UAHtB,SAIiBsL,IAJjB,0BAI2Bc,gBAJ3B,KAKe/M,EAAOU,UALtB,MAGI5L,UAHJ,KAIIC,KAJJ,KAKIF,UALJ,6BAE2BiU,eAF3B,iEADK,0DAAI,CAAc+D,GAAlB,CAULlkB,KAAKZ,gB,8BAGT,WACE,MAAO,CAAC,kB,GAhBqBqkB,GAuBjC,SAASlB,EAAY7b,GAEnB,OAAO,IAAI2N,EAAQsQ,iBAAkBC,OAAO,oCAAoCA,QAAO,EAAI3N,EAAOlE,YAAYrM,GAASme,QAAQC,SAASC,gBAJ1IrT,EAAQ7R,mBAAqBA,EAO7B,IAAImlB,EAA2B,IAAIrG,QAE7B6D,E,8BACJ,WAAYyC,EAAY7lB,GAAc,wBACpC,cAAM,CACJI,SAAUJ,KAEPA,aAAeA,EAEpB4lB,EAAY1F,IAAZ,KAAsB,CACpBvI,UAAU,EACVhV,WAAO,IAGTmhB,EAAsB,EAAD,GAAO8B,EAAaC,GAXL,E,uCActC,WACE,IAAMC,GAAS,EAAIvC,EAAUwC,kBAAiB,EAAIlO,EAAOlE,YAAY8P,EAAsB7iB,KAAMglB,KAAe,GAAOlgB,MAAM,GAE7H,MAAO,MADQ,IAAIuP,EAAQsQ,iBACNC,OAAOM,EAAOL,QAAQC,SAASC,gBAAgBjgB,OAAO,M,mDAG7E,yFACQuS,EAASrX,KAAKZ,aAAa0Y,gBAAgB,yBADnD,kBAES9X,KAAKZ,aAAa+gB,eAAe,CACtCjU,UAAWmL,EAAOU,UAClB5L,UAAWkL,EAAOW,UAClB5L,KAAMpM,KAAKolB,mBALf,gD,0GASA,WAAkB1e,GAAlB,kFACQmW,EAAS4F,EAAIlc,IAAI8e,gBAAgB9C,EAAY7b,GAAUmc,EAAsB7iB,KAAMglB,KAErFR,EAAIpN,OAAO9D,SAASuJ,EAAO/X,OAAO,GAAI,MACjC,KAAI0f,GAAK,IAEZc,EAAWjR,EAAQoQ,SAASC,IAAIxgB,SAAS,IAAI4O,SAAS,EAAG,KAEzDgG,EAAM+D,EAAO/X,MAAM,GAAI,GAR/B,kBASS,KAAOwgB,EAAWxM,EAAM0L,EAAEtgB,SAAS,IAAI4O,SAAS,EAAG,MAT5D,gD,4DA9BuC8P,EAA2BxK,2BA4CpE1G,EAAQ8Q,2BAA6BA,G,qSChMrChR,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQnM,UAKR,SAAmBJ,GACjB,IAAMogB,EAAMpgB,EAAGogB,IACf,MAAO,CACLA,IAAK,CACHC,OAAQD,EAAIC,OAAOpT,KAAI,SAAA9H,GAAI,MAAK,CAC9Bmb,MAAOnb,EAAKmb,MACZC,eAAgB,CACdrjB,MAAOiI,EAAKob,eAAerjB,MAC3BuD,OAAQ0E,EAAKob,eAAe9f,YAGhC+f,WAAYJ,EAAII,WAAWvT,KAAI,SAAA9H,GAAI,MAAK,CACtCqL,KAAM,CACJvJ,KAAM9B,EAAKqL,KAAKvJ,KAChBoC,SAAUlE,EAAKqL,KAAKnH,SACpBC,SAAUnE,EAAKqL,KAAKlH,UAEtB9G,KAAM2C,EAAK3C,MAAQ,CACjByE,KAAM9B,EAAK3C,KAAKyE,KAChBqC,SAAUnE,EAAK3C,KAAK8G,SACpBD,SAAUlE,EAAK3C,KAAK6G,UAEtB9C,KAAMpB,EAAKsb,aACXnQ,SAAU,CACRxN,OAAQqC,EAAKmL,SAASC,eAGxBV,SAAU,CACRpP,OAAQ0E,EAAK0K,SAASpP,OACtBvD,MAAOiI,EAAK0K,SAAS3S,WAGzBwjB,QAASN,EAAIM,QAAQzT,KAAI,SAAA9H,GAAI,MAAK,CAChCmL,SAAU,CACRxN,OAAQqC,EAAKmL,SAASC,eAExBhK,KAAMpB,EAAKsb,aACXjQ,KAAM,CACJvJ,KAAM9B,EAAKqL,KAAKvJ,KAChBqC,SAAUnE,EAAKqL,KAAKlH,SACpBD,SAAUlE,EAAKqL,KAAKnH,UAEtB7G,KAAM2C,EAAK3C,MAAQ,CACjByE,KAAM9B,EAAK3C,KAAKyE,KAChBqC,SAAUnE,EAAK3C,KAAK8G,SACpBD,SAAUlE,EAAK3C,KAAK6G,cAGxBsX,QAASP,EAAIO,QACbC,SAAUR,EAAIQ,SAAS3T,KAAI,SAAA9H,GAAI,MAAK,CAClCuK,QAASvK,EAAKuK,QACdG,SAAU,CACR3S,MAAOiI,EAAK0K,SAAS3S,MACrBuD,OAAQ0E,EAAK0K,SAASpP,YAG1BogB,WAAYT,EAAIS,YAElBC,YAAa9gB,EAAG8gB,YAChBC,UAAW/gB,EAAG+gB,YA/DlBxU,EAAQxK,YA2ER,SAAqB/B,GACnB,IAAMogB,EAAMpgB,EAAGogB,IACf,OAAO,IAAIlR,EAAQ8R,YAAY,IAAI9R,EAAQ+R,eAAeb,EAAII,WAAWvT,IAAIiU,GAASd,EAAIM,QAAQzT,IAAIiU,GAASd,EAAIQ,SAAS3T,KAAI,SAAA9H,GAAI,OAAI,IAAI+J,EAAQa,QAAyB,SAAjB5K,EAAKuK,QAAqBR,EAAQc,QAAQE,KAAOhB,EAAQc,QAAQC,SAAU,IAAIf,EAAQiB,SAAShL,EAAK0K,SAASpP,OAAQ0E,EAAK0K,SAAS3S,WAAUkjB,EAAIS,WAAYT,EAAIO,SAAU3gB,EAAG8gB,cA3E7U,IAAI5R,EAAUC,EAAQ,IAiEtB,SAASgS,EAAS5T,GAChB,OAAO,IAAI2B,EAAQI,OAAO/B,EAAElE,SAAUkE,EAAEtG,KAAqB,SAAfsG,EAAEjE,SAAsB4F,EAAQK,SAAS/M,KAAO0M,EAAQK,SAAShJ,MAGjH,SAAS2a,EAAO3T,GACd,OAAO,IAAI2B,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOtD,EAAE+C,SAASxN,OAAQ,GAAIqe,EAAS5T,EAAEiD,MAAOjD,EAAE/K,KAAO2e,EAAS5T,EAAE/K,WAAQ9E,EAAW,aAAc6P,GAAKA,EAAEsC,SAAW,IAAIX,EAAQiB,SAAS5C,EAAEsC,SAASpP,OAAQ8M,EAAEsC,SAAS3S,YAASQ,EAAW6P,EAAEhH,Q,mHC5EtO8F,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQhR,mBAAgB,EAExB,IAAI8Y,EAAQlF,EAAQ,KAEhBsO,EAA6BtO,EAAQ,KAErCiS,EAAkBjS,EAAQ,KAE9B,SAASwF,EAAgBxT,EAAKC,EAAKxE,GAAiK,OAApJwE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAAgBuE,E,IAErM5F,E,8BACJ,WAAYlB,GAAU,wBACpB,gBACKA,SAAWA,EAEhBsa,EAAgB,EAAD,GAAO,eAAW,GAEjC,EAAK7Z,cAAc,CACjBC,KAAM,gBACN6gB,YAAa,oCACbD,SAAU,CAAC,SAGb,EAAK1d,QAAU,IAAImjB,EAAgBljB,uBAAuB,CACxDC,KAAM,sBACNkjB,kBAAmB,gBAdD,E,+DAkBtB,+GACgCxmB,KAAKoD,QAAQqjB,cAD7C,cACQC,EADR,OAEQlnB,EAAWQ,KAAKR,SAEhBsD,EAAa,WACjB,OAAOgP,QAAQC,QAAQvS,EAAS2gB,eAAe3gB,EAASigB,UAAU,UAAWiH,MAGzE7N,EAAc,SAAAnS,GAClB,OAAOoL,QAAQC,QAAQ,EAAK3O,QAAQ8V,KAAKxS,KAT7C,kBAYS,4HACL,WACE,OAAO5D,MAFJ,yBAKL,SAAY4D,GACV,OAAOmS,EAAYnS,KANhB,kBASL,SAAKvB,GACH,+CAAkBA,OAVf,EAAI,CAAcyd,EAA2BxK,2BAA7C,CAaL,CACA5Y,SAAUQ,KAAKR,YA1BnB,gD,2DAnB0Bga,EAAM7C,gBAmDlCjF,EAAQhR,cAAgBA,EAExBoZ,EAAgBpZ,EAAe,yBAA0B6lB,EAAgBljB,yB,wFClEzEmO,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQiV,iBAAmBA,EAC3BjV,EAAQkV,uBAAyBA,EACjClV,EAAQmV,SAAWA,EACnBnV,EAAQrO,4BAAyB,EAEjC,IAAImW,EAAQlF,EAAQ,KAEhB2C,EAAS3C,EAAQ,KAIrB,SAASwS,EAAmBpU,GAC1B,MAAiB,WAAb,EAAOA,IAAwB,OAANA,IACtB,UAAWA,GAAK,WAAYA,GAAK,aAAcA,GAGxD,SAASqU,EAAiBrU,GACxB,MAAiB,WAAb,EAAOA,IAAwB,OAANA,IACtB,QAASA,GAAK,WAAYA,GAGnC,SAASiU,EAAiBzB,GACxB,OAAO1L,EAAMrK,MAAM6X,SAAQ,EAAI/P,EAAOlE,YAAYmS,GAAQL,QAAQE,gBAAgBjgB,MAAM,EAAG,IAG7F,SAAS8hB,EAAuBK,GAAwB,IAAjBC,EAAiB,wDAChDC,EAAe,IAAIC,gBAAgBC,SAASC,OAAOxiB,MAAM,IACzDyiB,EAAOJ,EAAajT,IAAI,eAC9B,GAAKqT,EAAL,CACA,IAAMxM,EAAMvV,KAAKgiB,MAAMD,GACvB,GAAKN,EAAMlM,EAAIrP,MAAf,CACA,GAAiB,MAAbqP,EAAI1F,KAAc,MAAM,IAAI3S,MAAMqY,EAAI0M,MAAQ,4CAClDN,EAAaO,OAAO,eACpB,MAIInE,OAAO8D,SAHTM,EADF,EACEA,SACArkB,EAFF,EAEEA,KACAskB,EAHF,EAGEA,SAEIC,EAAKV,EAAajjB,WAClB4jB,EAAS,GAAH,OAAMF,EAAN,aAAmBtkB,GAAnB,OAA0BqkB,GAA1B,OAAqCE,EAAK,IAAH,OAAOA,GAAO,IAIjE,OAHIX,GAAS3D,OAAOwE,QAAQC,aAAa,CACvCC,KAAMH,GACL,GAAIA,GACA/M,EAAIrP,O,SAGEmb,E,kEAAf,WAAwB/gB,GAAxB,sEACEyd,OAAO8D,SAASvhB,KAAOA,EADzB,kBAGS,IAAIgM,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAAS,SAHpD,4C,0BAMM1O,E,WACJ,WAAY2V,GACV,IAAIkP,EAAeC,EA7CE7hB,EAAKC,EAAKxE,EA4CZ,UA5CYA,OA+CC,GA/CNwE,EA+CJ,YA/CDD,EA+CLtG,MA/C0CwR,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAiDvL/B,KAAKqX,OAAS,CACZ/T,KAAyC,QAAlC4kB,EAAgBlP,EAAQ1V,YAAoC,IAAlB4kB,EAA2BA,EAAgB,sBAC5F1B,kBAA2E,QAAvD2B,EAAwBnP,EAAQwN,yBAAyD,IAA1B2B,EAAmCA,EAAwB,e,uCAQlJ,WACEnoB,KAAKooB,uBAAyBpoB,KAAKqoB,0B,0BAGrC,WACE,QAASzB,EAAuBE,K,wBAGlC,WACE,QAASF,EAAuBG,K,oDAOlC,yFAG0L,QAArKuB,EAAkE,QAA1DC,EAAwBvoB,KAAKqoB,+BAA+D,IAA1BE,EAAmCA,EAAwBvoB,KAAKooB,6BAA4C,IAATE,EAHlM,qBAGoNA,EAHpN,sCAGiOtoB,KAAKwoB,kBAHtO,iCAGQC,EAHR,uBAIS9B,EAAiB8B,EAAUvD,SAJpC,gD,wEAOA,SAAKxe,GACH,IAAIgiB,EAEJ,OAAO5W,QAAQC,QAAiE,QAAxD2W,EAAwB1oB,KAAK2oB,6BAA6D,IAA1BD,EAAmCA,EAAwB1oB,KAAK4oB,eAAeliB,M,6BAGzK,WAIE,OAAOmgB,EAHU7mB,KAAK6oB,sBAAsB7oB,KAAKqX,OAAO/T,KAAM,QAAS,CACrEwlB,YAAavF,OAAO8D,SAASvhB,U,4BAKjC,SAAeY,GACb,IAAIqiB,EAEE7D,EAAqE,QAA3D6D,EAAyB/oB,KAAKqoB,+BAAgE,IAA3BU,OAAoC,EAASA,EAAuB7D,OACvJ,IAAKA,EAAQ,MAAM,IAAIxiB,MAAM,oCAM7B,OAAOmkB,EALS7mB,KAAK6oB,sBAAsB7oB,KAAKqX,OAAO/T,KAAM,OAAQ,CACnEwlB,YAAavF,OAAO8D,SAASvhB,KAC7Bof,SACAxe,e,kCAKJ,SAAqBgF,GACnBsd,aAAaC,QAAQjpB,KAAKqX,OAAOmP,kBAAmBhhB,KAAKC,UAAUiG,M,mCAGrE,WACE,IAAMmL,EAAamS,aAAaE,QAAQlpB,KAAKqX,OAAOmP,mBACpD,GAAkB,MAAd3P,EACJ,OAAOrR,KAAKgiB,MAAM3Q,K,iCAGpB,WACE,IAAM4R,EAAY7B,EAAuBE,GAAoB,GAC7D,GAAK2B,EAEL,OADAzoB,KAAKmpB,qBAAqBV,GACnBA,I,iCAGT,WACE,IAAMW,EAAYxC,EAAuBG,GAAkB,GAC3D,GAAKqC,EAEL,MAAO,OAASA,EAAUtQ,IAAIoO,QAAQ,KAAM,M,mCAG9C,SAAsB5jB,EAAM+f,EAAQkB,GAClC,IAAM8E,EAAS,IAAIC,IAAJ,UAAWhmB,EAAX,YAAmB+f,EAAOkG,gBAEzC,OADA/X,OAAOgY,QAAQjF,GAAQpiB,SAAQ,yBAAEoE,EAAF,KAAOkjB,EAAP,YAAgBJ,EAAOlC,aAAa7H,IAAI/Y,EAAKkjB,MACrEJ,EAAOvjB,S,KAKlB4L,EAAQrO,uBAAyBA,G,iCCxJjCmO,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAGT,IAAI2nB,EAAmBpV,EAAQ,KAE/B9C,OAAOmM,KAAK+L,GAAkBvnB,SAAQ,SAAUoE,GAClC,YAARA,GAA6B,eAARA,IACrBA,KAAOmL,GAAWA,EAAQnL,KAASmjB,EAAiBnjB,IACxDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOwV,EAAiBnjB,UAK9B,IAAIojB,EAAgBrV,EAAQ,KAE5B9C,OAAOmM,KAAKgM,GAAexnB,SAAQ,SAAUoE,GAC/B,YAARA,GAA6B,eAARA,IACrBA,KAAOmL,GAAWA,EAAQnL,KAASojB,EAAcpjB,IACrDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOyV,EAAcpjB,W,iCCzB3BiL,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQuI,mBAAgB,EAExB,IAAI2P,EAAYtV,EAAQ,KAuCxB5C,EAAQuI,cAnCR,MACEna,YAAY+pB,GAHd,IAAyBvjB,EAAKC,EAAKxE,SAIC,GAJNwE,EAIJ,YAJDD,EAILtG,MAJ0CwR,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAMvL,MAAM+nB,EAAY,IAAIF,EAAUG,cAAcF,EAAK,CACjDG,QAAS,CACP,eAAgB,sBAGpBhqB,KAAKyQ,OAAS,IAAImZ,EAAUK,OAAO,IAAIL,EAAUM,eAAe,CAACJ,KAGnEnP,UAAUwP,GACR,MAAM,WACJvP,EADI,MAEJwP,EAAQ,MAFJ,MAGJC,EAAQ,QAHJ,aAMJrP,GACEmP,EACJ,OAAOnqB,KAAKyQ,OAAO4T,QAAQ,CACzBC,OAAQ,YACRC,OAAQ,CAAC3J,EAAYwP,EAAOC,EAAOrP,KAIvCsC,UACE,OAAOtd,KAAKyQ,OAAO4T,QAAQ,CACzBC,OAAQ,e,2GCtCd9S,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQpJ,UAAYoJ,EAAQsE,YAAS,EAErC,IAAIsU,EAAahW,EAAQ,KAErB2C,EAAS3C,EAAQ,KAErB,SAASwF,EAAgBxT,EAAKC,EAAKxE,GAAiK,OAApJwE,KAAOD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAAgBuE,EAE3M,SAASikB,EAAGd,GACV,MAAmB,kBAARA,GACPzT,EAAOwU,cAAcf,GADW,IAAIa,EAAWrmB,UAAUwC,OAAOgjB,IAE7D,IAAIa,EAAWrmB,UAAUwlB,G,IAG5BzT,E,WA8BJ,WAAYyU,GAKV,GALc,UACd3Q,EAAgB9Z,KAAM,oBAAoB,GAE1C8Z,EAAgB9Z,KAAM,WAAO,IAExByqB,EAAGC,YAAa,MAAM,IAAIhoB,MAAM,6BACrC,GAAI+nB,EAAGE,GAAG,GAAI,MAAM,IAAIjoB,MAAM,2CAC9B1C,KAAKulB,IAAM,IAAI+E,EAAWrmB,UAAUwmB,G,kCAGtC,SAASzR,GACP,MAIIA,GAAoB,GAJxB,IACE1U,qBADF,MACkBsmB,IADlB,MAEEC,iBAFF,aAGE7mB,gBAHF,MAGa,EAHb,EAKM8mB,EAAkB9qB,KAAKulB,IAAInhB,MAAT,SAAe,IAAOJ,IACxCK,EAAsBymB,EAAgBxmB,gBACtCymB,EAAUD,EAAgBxmB,cAAc+N,KAAK2Y,IAAI3mB,EAAqBC,GAAgBgmB,EAAWrmB,UAAUM,aACjH,OAAIsmB,EAAkBE,EAAQvmB,WACvBumB,EAAQ7mB,a,iBAGjB,SAAIulB,GACF,OAAO,IAAIzT,EAAOyT,K,sBAGpB,SAASwB,GACP,OAAOjrB,KAAKulB,IAAIrhB,SAAS+mB,K,mBAG3B,WACE,MAAO,KAAOjrB,KAAKkE,SAAS,M,gBAG9B,SAAGulB,GACD,OAAOzpB,KAAKulB,IAAI2F,GAAGX,EAAGd,M,gBAGxB,SAAGA,GACD,OAAOzpB,KAAKulB,IAAI4F,GAAGZ,EAAGd,M,iBAGxB,SAAIA,GACF,OAAOzpB,KAAKulB,IAAI6F,IAAIb,EAAGd,M,gBAGzB,SAAGA,GACD,OAAOzpB,KAAKulB,IAAIoF,GAAGJ,EAAGd,M,iBAGxB,SAAIA,GACF,OAAOzpB,KAAKulB,IAAI8F,IAAId,EAAGd,M,kBAGzB,SAAKA,GACH,OAAOzpB,KAAKsrB,IAAItrB,KAAKulB,IAAIgG,KAAKhB,EAAGd,O,mBAGnC,SAAMA,GACJ,OAAOzpB,KAAKsrB,IAAItrB,KAAKulB,IAAIiG,MAAMjB,EAAGd,O,kBAGpC,WACE,OAAO,IAAIa,EAAWrmB,UAAUjE,KAAKulB,Q,4BA7FvC,SAAqB7S,GACnB,MAAiB,WAAb,EAAOA,KACF,MAALA,IACG,qBAAsBA,GAAKA,EAAE+Y,qB,kBActC,SAAY1pB,GAAqB,IAAdiC,EAAc,uDAAH,EAE5B,OADIA,EAAW,IAAMoT,OAAOsT,UAAU1mB,MAAW,EAAIiT,EAAO1F,MAAM,yBAC5B,IAAIyE,EAArB,kBAAVjU,EAAsCwoB,EAAGxoB,EAAQ,KAAH,IAAG,IAAO2Z,OAAO1X,KACrEA,EACaumB,EAAGxoB,GAAOqC,MAAMmmB,EAAG,IAAImB,IAAI1nB,IADZumB,EAAGxoB,Q,KA8ExC2P,EAAQsE,OAASA,E,IAEX1N,E,iHAgBJ,SAAImhB,GACF,OAAO,IAAInhB,EAAUmhB,K,sBAGvB,SAASzQ,GACP,0DAA2BA,GAA3B,IACEhV,SAAU,Q,mBAlBd,WACE,MAAM,IAAItB,MAAM,uC,qBAGlB,SAAeX,GACb,OAAO,IAAIuG,EAAUiiB,EAAGxoB,GAAOqC,MAAV,SAAgB,GAAM,O,yBAG7C,SAAmBrC,GACjB,OAAO,IAAIuG,EAAUiiB,EAAGxoB,Q,GAbJiU,GA4BxBtE,EAAQpJ,UAAYA,G,iCClJpBkJ,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ+L,yBAAsB,EA2E9B/L,EAAQ+L,oBAzER,MACE3d,YAAYoa,GACVla,KAAKka,QAAUA,EAGjByR,UAAUC,GACR,MAAM,KACJjW,EADI,KAEJhO,GACEikB,EACJ,IAAItR,EAEJ,QAAazX,IAAT8S,EACF2E,EAAY,CACVnP,OAAQwK,EACR4E,YAAa,aAGH1X,GAAR8E,GAA8B,UAATA,IACvB2S,EAAUE,OAAS,CACjBrP,OAAQxD,QAGP,CACL,QAAY9E,GAAR8E,GAA6B,SAARA,EAMvB,MAAM,IAAIjF,MAAO,+DAA8D8C,KAAKC,UAAUmmB,MAL9FtR,EAAY,CACVnP,OAAQxD,EACR4S,YAAa,QAOnB,MAAMsR,EAAYD,EAAQlgB,MAAQ,KAC5BwO,EAAUla,KAAKka,QACrB,MAAO,CACL4R,QAAO,KACE,CACL,OAAQC,OAAOC,iBAGb,OAAS,CACP,MAGMC,SAHY/R,EAAQS,UAAU,CAClCC,WAAYN,KAEQa,QAEtB,IAAK,MAAME,KAAQ4Q,EACC,QAAdJ,GAAuBA,IAAcxQ,EAAKnF,mBACtC,CACJV,YAAa6F,EAAKpF,OAClBvK,KAAM2P,EAAKnF,YACXpB,UAAWuG,EAAKvG,UAChByI,aAAclC,EAAKkC,eAKzB,GAAI0O,EAAUpnB,OAnBE,IAoBd,c,iCCjEhB2M,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQjS,kBAAe,EAEvB,IAAI+Z,EAAQlF,EAAQ,KAEhBoV,EAAmBpV,EAAQ,KAE/B,MAAM7U,UAAqBiqB,EAAiBpQ,gBAChC,aACR,OAAOvZ,MAAMsX,OAGf3X,KAAK2X,GACH,OAAOtX,MAAML,KAAK2X,GAGpBS,gBAAgBvR,GACd,MAAMsR,EAAe9X,MAAM+X,gBAAgBvR,GAC3C,IAAKsR,EAAc,MAAM,IAAInV,MAAO,mBAAkB6D,sCACtD,OAAOsR,EAGT4H,UAAUC,EAAWtT,EAAO,MAC1B,MAAMjB,EAASpL,MAAM0f,UAAUC,EAAWtT,GAC1C,IAAKjB,EAAQ,MAAM,IAAIzI,MAAO,mBAAkBgd,sCAChD,OAAOvU,EAGTa,cAAc6D,GACZ,MAAMqc,EAAiB1S,EAAMrK,MAAMC,kBAAkBpP,KAAK4X,cAAc/H,IAExE,OAAO7P,KAAKyf,UAAU,OAAQyM,GAGhCzU,WAAWiI,GACT,MAAMyM,EAAMpsB,MAAM0X,WAAWiI,GAC7B,IAAKyM,EAAK,MAAM,IAAIzpB,MAAO,mBAAkBgd,sCAC7C,OAAOyM,GAKXza,EAAQjS,aAAeA,G,iCC5CvB+R,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET,IAAIgc,EAAe,CACjB1Y,4BAA4B,EAC5B+mB,cAAc,EACdC,gBAAgB,GAElB7a,OAAOC,eAAeC,EAAS,6BAA8B,CAC3DuC,YAAY,EACZC,IAAK,WACH,OAAOoY,EAA4BjnB,8BAGvCmM,OAAOC,eAAeC,EAAS,eAAgB,CAC7CuC,YAAY,EACZC,IAAK,WACH,OAAOoY,EAA4BF,gBAGvC5a,OAAOC,eAAeC,EAAS,iBAAkB,CAC/CuC,YAAY,EACZC,IAAK,WACH,OAAOoY,EAA4BD,kBAIvC,IAAIC,EAA8BhY,EAAQ,KAEtCiY,EAA0BjY,EAAQ,KAEtC9C,OAAOmM,KAAK4O,GAAyBpqB,SAAQ,SAAUoE,GACzC,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAASgmB,EAAwBhmB,IAC/DiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOqY,EAAwBhmB,UAKrC,IAAIimB,EAAsBlY,EAAQ,KAElC9C,OAAOmM,KAAK6O,GAAqBrqB,SAAQ,SAAUoE,GACrC,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAASimB,EAAoBjmB,IAC3DiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOsY,EAAoBjmB,UAKjC,IAAIkmB,EAAmBnY,EAAQ,KAE/B9C,OAAOmM,KAAK8O,GAAkBtqB,SAAQ,SAAUoE,GAClC,YAARA,GAA6B,eAARA,IACrBiL,OAAO0M,UAAUC,eAAeC,KAAKL,EAAcxX,IACnDA,KAAOmL,GAAWA,EAAQnL,KAASkmB,EAAiBlmB,IACxDiL,OAAOC,eAAeC,EAASnL,EAAK,CAClC0N,YAAY,EACZC,IAAK,WACH,OAAOuY,EAAiBlmB,W,iGClE9BiL,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQlF,4BAAyB,EAEjC,IAAImN,EAAUrF,EAAQ,KAElBgY,EAA8BhY,EAAQ,KAEtCoY,EAAyBpY,EAAQ,K,IAI/B9H,E,8BACJ,WAAYwM,EAASxZ,EAAUc,GAAQ,MAHhBgG,EAAKC,EAAKxE,EAGM,kBACrC,gBACKiX,QAAUA,EACf,EAAKxZ,SAAWA,EAChB,EAAKc,OAASA,EAPOgG,EASL,EAAD,GATgBvE,OASE,GATPwE,EASJ,aAT6BD,EAAOkL,OAAOC,eAAenL,EAAKC,EAAK,CAAExE,MAAOA,EAAOkS,YAAY,EAAM6C,cAAc,EAAMC,UAAU,IAAkBzQ,EAAIC,GAAOxE,EAWvL,EAAK4qB,QAAU,IAAID,EAAuBE,sBAAsB5T,EAASxZ,EAAUc,GAR9C,E,0DAWvC,kGAC8BN,KAAKM,OAAOwC,aAD1C,UACQ7B,EADR,SAEyBjB,KAAKgZ,QAAQhR,YAAc/G,GAFpD,sBAG4B,IAAI0Y,EAAQlG,6BAA6B,CACjE1Q,QAAS9B,IAJb,gCAMSjB,KAAK2sB,QAAQ/jB,SANtB,gD,2DAZmC0jB,EAA4BjnB,4BAuBjEqM,EAAQlF,uBAAyBA,G,iCCpCjCgF,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQkb,2BAAwB,EAEhC,IAAIvY,EAAUC,EAAQ,IAElBH,EAAMG,EAAQ,KAEd2C,EAAS3C,EAAQ,KAEjBuY,EAA2BvY,EAAQ,KAEvC,MAAMsY,UAA8BC,EAAyB7V,wBAC3DlX,YAAYkZ,EAASxZ,EAAUc,GAC7BP,MAAMP,GACNQ,KAAKgZ,QAAUA,EACfhZ,KAAKM,OAASA,EAGL,cACT,MAAM,KACJmM,EADI,UAEJzE,EAFI,OAGJC,GACEjI,KAAKgZ,QACH8T,QAAe9sB,KAAKM,OAAOwC,aAC3BiqB,QAAoB/sB,KAAKR,SAASwtB,gBAAgBF,EAAQrgB,EAAMxE,GAChEglB,SAAuBjtB,KAAKR,SAASwtB,gBAAgBhlB,EAAWyE,EAAM,MAAM,GAC5EsZ,QAAiB/lB,KAAKuX,cACvB0V,IAAe,EAAIhW,EAAO1F,MAAO,aAAYvJ,kCAClD,MAAMklB,EAAeH,EAAY3a,KAAI+a,GAAS,IAAI9Y,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOmX,EAAMlX,OAAOR,SAAU,GAAItB,EAAIC,GAAGI,WAAW2Y,EAAMlX,OAAON,MAAOwX,EAAMlX,OAAOtO,MAAQwM,EAAIC,GAAGI,WAAW2Y,EAAMlX,OAAOtO,MAAOwM,EAAIC,GAAG+B,aAAagX,EAAMrY,WAAYqY,EAAMjX,eACpPkX,EAAiB,IAAI/Y,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOiX,EAAchX,OAAOR,SAAU,GAAItB,EAAIC,GAAGI,WAAWyY,EAAchX,OAAON,MAAOsX,EAAchX,OAAOtO,MAAQwM,EAAIC,GAAGI,WAAWyY,EAAchX,OAAOtO,MAAOwM,EAAIC,GAAG+B,aAAa8W,EAAcnY,WAAYmY,EAAc/W,aAE7QmX,EAAkBD,EAAeE,QACvCD,EAAgBE,cAAcF,EAAgBG,gBAAgBC,IAAI,IAAIpZ,EAAQ2B,OAAOhW,KAAKgZ,QAAQ/Q,OAAQ,KAC1G,MAAMylB,EAAeR,EAAapR,QAAO,CAAC6R,EAAK9lB,KAC7C8lB,EAAIlY,SAAWkY,EAAIlY,SAASgY,IAAI5lB,EAAM4N,UACtCkY,EAAIJ,cAAcI,EAAIH,gBAAgBC,IAAI5lB,EAAM2lB,kBACzCG,KAGTD,EAAaH,cAAcG,EAAaF,gBAAgBI,IAAI,IAAIvZ,EAAQ2B,OAAOhW,KAAKgZ,QAAQ/Q,OAAQ,KACpG,MAAM9C,EAAK,IAAIkP,EAAQ8R,YAAY,IAAI9R,EAAQ+R,eAAe,IAAI8G,EAAcE,GAAiB,CAACM,EAAcL,GAAkBtH,GAAWmH,EAAa9a,KAAI,IAAMpS,KAAK0X,sBAAsBoV,MAGzLe,EAAMxZ,EAAQ8C,QAAQ2W,QAAQ3oB,EAAIiS,OAAOpX,KAAKR,SAAS6X,OAAOC,eAQpE,OANAoW,EAAajY,SAAWiY,EAAajY,SAASmY,IAAIC,GAE9CH,EAAaK,eAAe1C,IAAIhX,EAAQ2B,OAAOgY,QACjD,EAAI/W,EAAO1F,MAAM,uEAGZpM,GAKXuM,EAAQkb,sBAAwBA,G,iCC3DhCpb,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ6F,YAoER,WAGE,GAAsB,qBAAXgM,OAAwB,MAAO,GAE1C,IAAI7X,EAAOuiB,EADI,MAIf,OADAC,QAAQC,IAAI,WAHG,MAGiBziB,GACzBA,GA3ETgG,EAAQ0c,UAAO,EAEf,IAAI/Z,EAAUC,EAAQ,IAyBtB5C,EAAQ0c,KApBK,CAIb,CACEluB,KAAM,MACNmuB,IAAK,yBACLC,MAAO,GACN,CACDpuB,KAAM,iBACNmuB,IAAK,wBACLC,MAAO,GACN,CACDpuB,KAAM,eACNmuB,IAAK,yBACLC,MAAO,GACN,CACDpuB,KAAM,OACNmuB,IAAK,wBAGP,MAAMJ,EAAiB,CAAC,IAAI5Z,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,SACjjB,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,QAAS,IAAIjB,EAAQa,QAAQb,EAAQc,QAAQE,KAAM,IAAIhB,EAAQiB,SAAS,qEAAsE,S,wFCjCrkB9D,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQhF,wBAAqB,EAE7B,IAAIiN,EAAUrF,EAAQ,KAElBgY,EAA8BhY,EAAQ,KAEtCia,EAAwBja,EAAQ,KAG9B5H,E,8BACJ,WAAYsM,EAASxZ,EAAUc,GAAQ,wBACrC,gBACK0Y,QAAUA,EACf,EAAKxZ,SAAWA,EAChB,EAAKc,OAASA,EAJuB,E,0DAOvC,oGAC8BN,KAAKM,OAAOwC,aAD1C,UACQ7B,EADR,QAEyBjB,KAAKgZ,QAAQrQ,WAAW6lB,MAAK,SAAAlkB,GAAI,OAAIA,EAAKtC,YAAc/G,GAAyC,YAAxBqJ,EAAKnC,kBAFvG,sBAG4B,IAAIwR,EAAQlG,6BAA6B,CACjE1Q,QAAS9B,IAJb,cAMQ0rB,EAAU,IAAI4B,EAAsBE,qBAAqBzuB,KAAKgZ,QAAShZ,KAAKR,SAAUQ,KAAKM,QANnG,kBAOSqsB,EAAQ/jB,SAPjB,gD,2DAR+B0jB,EAA4BjnB,4BAoB7DqM,EAAQhF,mBAAqBA,G,iGChC7B8E,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ+c,0BAAuB,EAE/B,IAAIpa,EAAUC,EAAQ,IAElBoF,EAAQpF,EAAQ,KAEhBqF,EAAUrF,EAAQ,KAElBH,EAAMG,EAAQ,KAEdoa,EAAgBpa,EAAQ,KAItBma,E,8BACJ,WAAYzV,EAASxZ,EAAUc,GAAQ,wBACrC,cAAMd,IACDwZ,QAAUA,EACf,EAAK1Y,OAASA,EAHuB,E,0DAMvC,oHACQquB,EAAwB3uB,KAAKgZ,QAAQrQ,WAAW6R,QAAO,SAAAlQ,GAAI,MAA4B,cAAxBA,EAAKnC,kBAAgCiK,KAAI,SAAA9H,GAAI,OAAI,IAAI+J,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAO1L,EAAKrC,OAAQ,GAAIkM,EAAIC,GAAGI,WAAW,EAAKhV,SAASoY,cAActN,EAAKtC,gBACxN4mB,EAAa5uB,KAAKgZ,QAAQrQ,WAAW6R,QAAO,SAAAlQ,GAAI,MAA4B,YAAxBA,EAAKnC,kBACzD0mB,GAAqB,EAAInV,EAAMtG,MAAMwb,GAAY/T,MAAK,EAAInB,EAAMoV,UAAV,2BAAoB,WAAMxkB,GAAN,yFACtD,EAAK9K,SAASuvB,oBAAoBzkB,EAAKtC,UAAW,KADI,UACxEgnB,EADwE,OAExEC,EAAWD,EAAU,GAFmD,sBAGzD,IAAIrV,EAAQ/F,qBAAqB,CACpD+B,KAAM,EAAKnW,SAASoY,cAActN,EAAKtC,aAJqC,cAOxEqT,EAAOlH,EAAIC,GAAGyB,SAASoZ,IAExBxZ,SAAW4F,EAAK5F,SAASgY,IAAI,IAAIpZ,EAAQ2B,OAAO1L,EAAKrC,OAAQ,IATY,kBAUvEoT,GAVuE,2CAApB,wDAWxD,EAAI3B,EAAMwV,YAdhB,UAekC,EAAIxV,EAAMiC,eAAekT,GAf3D,cAeQM,EAfR,OAgBQC,EAAkBT,EAAsB7S,QAAO,SAACuT,EAAehU,GAAhB,OAAyBgU,EAAc5B,IAAIpS,EAAK5F,YAAWpB,EAAQ2B,OAAOgY,MACzHsB,EAAsBV,EAAW9S,QAAO,SAACuT,EAAe/kB,GAAhB,OAAyB+kB,EAAc5B,IAAI,IAAIpZ,EAAQ2B,OAAO1L,EAAKrC,OAAQ,MAAKoM,EAAQ2B,OAAOgY,MAjB/I,KAkBgChuB,KAAKR,SAlBrC,UAkBwEQ,KAAKM,OAAOwC,aAlBpF,gCAkBkGwsB,EAAoB7B,IAAI2B,GACvH3B,IAAI,IAAIpZ,EAAQ2B,OAAOvP,QAAO,EAAIioB,EAAc5Q,2BAEhD2P,IAAI,IAAIpZ,EAAQ2B,OAAO,MAAMN,cArBhC,eAkB8CqZ,oBAlB9C,gCAkBQQ,EAlBR,QAsBQC,EAAcD,EAAgBnd,IAAI+B,EAAIC,GAAGyB,WAE9BhR,QAAW2qB,EAAY,GAxB1C,6BAyBc7V,EAAQ/F,qBAzBtB,KA0BY5T,KAAKR,SA1BjB,UA0B8CQ,KAAKM,OAAOwC,aA1B1D,oCA0B0B8U,cA1B1B,sBA0BMjC,KA1BN,oCA+BQ+X,EAAe8B,EAAY,IACpB/Z,SAAW+Z,EAAY1T,QAAO,SAACP,EAAKF,GAAN,OAAeE,EAAIkS,IAAIpS,EAAK5F,YAAW,IAAIpB,EAAQ2B,OAAO,IAAK,IAhC5G,KAiCiB3B,EAAQ8R,YAjCzB,KAiCqC,IAAI9R,EAAQ+R,eAAZ,YAA+BoJ,GAA/B,EAA+CL,IAA/C,CAAoEzB,GAApE,SAAqFyB,GAArF,EAA2GR,IAC9I3uB,KAAKuX,eAlCP,MAkCwBvX,KAlCxB,UAkCyDA,KAAKM,OAAOwC,aAlCrE,wCAkC6B4U,sBAlC7B,gCAiCQvS,EAjCR,qBAmCQ0oB,EAAMY,EAAqBX,QAAQ3oB,GACzCuoB,EAAajY,SAAWiY,EAAajY,SAASmY,IAAIwB,GAAiBxB,IAAI0B,GAAqB1B,IAAIC,GApClG,kBAqCS1oB,GArCT,iD,2DAT6BmP,EAAQ,KAEqB0C,yBAiD5DtF,EAAQ+c,qBAAuBA,G,wFClE/Bjd,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQhJ,qBAAkB,EAE1B,IAAIiR,EAAUrF,EAAQ,KAElBgY,EAA8BhY,EAAQ,KAEtCmb,EAAqBnb,EAAQ,KAE3B5L,E,8BACJ,WAAYsQ,EAASxZ,EAAUc,GAAQ,wBACrC,gBACK0Y,QAAUA,EACf,EAAKxZ,SAAWA,EAChB,EAAKc,OAASA,EAJuB,E,uEAOvC,oGAC8BN,KAAKM,OAAOwC,aAD1C,cACQ7B,EADR,OAEQ0rB,EAAU,IAAI8C,EAAmBC,oBAAoB1vB,KAAKgZ,QAAShZ,KAAKR,SAAUyB,GAF1F,SAGe0rB,EAAQ/jB,QAHvB,wF,oGAMA,kGAC8B5I,KAAKM,OAAOwC,aAD1C,UACQ7B,EADR,QAEqBjB,KAAKgZ,QAAQrQ,WAAW6lB,MAAK,SAAAlkB,GAAI,OAAIA,EAAKtC,YAAc/G,GAAyC,YAAxBqJ,EAAKnC,kBAFnG,sBAGwB,IAAIwR,EAAQlG,6BAA6B,CAC7D1Q,QAAS9B,IAJb,gCAMSjB,KAAK2vB,sBANd,gD,2DAd4BrD,EAA4BjnB,4BAyB1DqM,EAAQhJ,gBAAkBA,G,iCCpC1B8I,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQge,yBAAsB,EAE9B,IAAIrb,EAAUC,EAAQ,IAElBoF,EAAQpF,EAAQ,KAEhBqF,EAAUrF,EAAQ,KAElBH,EAAMG,EAAQ,KAEdoa,EAAgBpa,EAAQ,KAExBuY,EAA2BvY,EAAQ,KAEvC,MAAMob,UAA4B7C,EAAyB7V,wBACzDlX,YAAYkZ,EAASxZ,EAAUqQ,GAC7B9P,MAAMP,GACNQ,KAAKgZ,QAAUA,EACfhZ,KAAK6P,cAAgBA,EAGZ,cACT,MAAM+f,EAAU5vB,KAAKR,SAASwM,cAAchM,KAAK6P,eAE3CggB,EAAwB7vB,KAAKgZ,QAAQrQ,WAAW6R,QAAOlQ,GAAgC,cAAxBA,EAAKnC,iBAAgCiK,KAAI9H,GAAQ,IAAI+J,EAAQ0B,KAAK,IAAI1B,EAAQ2B,OAAOvP,OAAOiV,OAAOpR,EAAKlC,oBAAsB,IAAK,GAAGqlB,IAAI,IAAIpZ,EAAQ2B,OAAOvP,QAAO,EAAIioB,EAAc9Q,oBAAqBzJ,EAAIC,GAAGI,WAAWxU,KAAKR,SAASoY,cAActN,EAAKtC,YACnUmM,EAAIC,GAAGI,WAAWob,QAClB/sB,EAAW,IAAIwR,EAAQ2B,OAAO1L,EAAKrC,OAAQ,GAAG6nB,iBAExCC,EAAuB/vB,KAAKgZ,QAAQrQ,WAAW6R,QAAOlQ,GAAgC,YAAxBA,EAAKnC,iBACnE6nB,GAAuB,EAAItW,EAAMtG,MAAM2c,GAAsBlV,MACnE,EAAInB,EAAMoV,WAAUmB,UAClB,MAAMhB,SAAkBjvB,KAAKR,SAASwtB,gBAAgB1iB,EAAKtC,UAAW4nB,EAAS,MAAM,GAErF,IAAKX,EACH,MAAM,IAAItV,EAAQ/F,qBAAqB,CACrC+B,KAAM3V,KAAKR,SAASoY,cAActN,EAAKtC,WACvCL,KAAMioB,IAIV,MAAMvU,EAAOlH,EAAIC,GAAGyB,SAASoZ,GAI7B,OAFA5T,EAAK5F,SAAW4F,EAAK5F,SAASgY,IAAI,IAAIpZ,EAAQ2B,OAAO1L,EAAKlC,oBAAsB,IAAK,IACrFiT,EAAKkS,cAAclS,EAAKmS,gBAAgBC,IAAI,IAAIpZ,EAAQ2B,OAAO1L,EAAKrC,OAAQ,KACrEoT,IACN,IAAI,EAAI3B,EAAMwV,YACXgB,QAA4B,EAAIxW,EAAMiC,eAAeqU,GACrDG,EAAgCN,EAAsB/T,QAAO,CAAC6R,EAAKyC,IAAgBzC,EAAIF,IAAI2C,EAAY3a,WAAWpB,EAAQ2B,OAAOgY,MACjIqC,EAAwCN,EAAqBjU,QAAO,CAAC6R,EAAK2C,IAAc3C,EAAIF,IAAI,IAAIpZ,EAAQ2B,OAAOsa,EAAUloB,oBAAsB,IAAK,KAAKiM,EAAQ2B,OAAOgY,MAC5KuC,EAA2BJ,EAA8B1C,IAAI4C,GAClE5C,IAAI,IAAIpZ,EAAQ2B,OAAOvP,QAAO,EAAIioB,EAAc5Q,2BAEhD2P,IAAI,IAAIpZ,EAAQ2B,OAAO,MAElBwa,SADwBxwB,KAAKR,SAASuvB,oBAAoB/uB,KAAK6P,cAAe0gB,EAAyB7a,gBACzEtD,IAAI+B,EAAIC,GAAGyB,UAEzC4a,EAAeD,EAAY,GAAGlD,QACpCmD,EAAahb,SAAW+a,EAAY1U,QAAO,CAAC6R,EAAK+C,IAAc/C,EAAIF,IAAIiD,EAAUjb,WAAWpB,EAAQ2B,OAAOgY,MAC3G,MAAM2C,EAAQ,IAAItc,EAAQ+R,eAAe,IAAIoK,KAAgBN,GAAsB,CAACO,KAAiBZ,KAA0BK,GAAsBlwB,KAAKuX,eACpJpS,EAAK,IAAIkP,EAAQ8R,YAAYwK,EAAO,CAAC3wB,KAAK0X,sBAAsB1X,KAAK6P,iBAErEge,EAAMxZ,EAAQ8C,QAAQ2W,QAAQ3oB,EAAIiS,OAAOpX,KAAKR,SAAS6X,OAAOC,eAGpE,OADAmZ,EAAahb,SAAWgb,EAAahb,SAASmY,IAAIC,GAAKD,IAAIuC,GAA+BvC,IAAIyC,GACvFlrB,GAKXuM,EAAQge,oBAAsBA,G,iCCjE9B,SAASjR,EAAyBC,GAAe,GAAuB,oBAAZC,QAAwB,OAAO,KAAM,IAAIC,EAAoB,IAAID,QAAeE,EAAmB,IAAIF,QAAW,OAAQF,EAA2B,SAAUC,GAAe,OAAOA,EAAcG,EAAmBD,IAAsBF,GAPxSlN,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQjT,gBAAa,EAQrB,MAIMA,EAAa,CACjBC,OALuB,CACvBkyB,OAAQ,MACRpR,QAJF,SAAiClZ,EAAKoY,GAAe,IAAKA,GAAepY,GAAOA,EAAIwY,WAAc,OAAOxY,EAAO,GAAY,OAARA,GAA+B,kBAARA,GAAmC,oBAARA,EAAsB,MAAO,CAAEyY,QAASzY,GAAS,IAAI0Y,EAAQP,EAAyBC,GAAc,GAAIM,GAASA,EAAMC,IAAI3Y,GAAQ,OAAO0Y,EAAM9K,IAAI5N,GAAQ,IAAI4Y,EAAS,GAAQC,EAAwB3N,OAAOC,gBAAkBD,OAAO4N,yBAA0B,IAAK,IAAI7Y,KAAOD,EAAO,GAAY,YAARC,GAAqBiL,OAAO0M,UAAUC,eAAeC,KAAK9X,EAAKC,GAAM,CAAE,IAAI8Y,EAAOF,EAAwB3N,OAAO4N,yBAAyB9Y,EAAKC,GAAO,KAAU8Y,IAASA,EAAKnL,KAAOmL,EAAKC,KAAQ9N,OAAOC,eAAeyN,EAAQ3Y,EAAK8Y,GAAgBH,EAAO3Y,GAAOD,EAAIC,GAAY2Y,EAAOH,QAAUzY,EAAS0Y,GAASA,EAAMM,IAAIhZ,EAAK4Y,GAAW,OAAOA,EAJ9wBV,CAAwBlK,EAAQ,MAQ3BkL,UAKlB9N,EAAQjT,WAAaA,G,iCClBrB+S,OAAOC,eAAeC,EAAS,aAAc,CAC3C3P,OAAO,IAET2P,EAAQ8N,aAAU,EAElB,IAAID,EAAiBjL,EAAQ,KAYvBkL,EAAU,CACdqR,mBAAoBtR,EAAe9gB,WAAWiiB,QAAQlB,QAAQqR,mBAC9DC,eAAgBvR,EAAe9gB,WAAWiiB,QAAQlB,QAAQsR,eAC1DC,KAAMxR,EAAe9gB,WAAWiiB,QAAQlB,QAAQuR,KAEhDC,kBAAmB,CACjBjZ,UAAW,qEACXC,UAAW,OACX4H,QAAS,qEACTC,MAAO,MACPF,SAAU,QAGZsR,sBAAuB,CACrBlZ,UAAW,qEACXC,UAAW,OACX4H,QAAS,qEACTC,MAAO,MACPF,SAAU,QAGZuR,QAAS,CACPrR,MAAO,MACPD,QAAS,qEACTD,SAAU,OACV5H,UAAW,qEACXC,UAAW,QAGbmZ,QAAS,CACPtR,MAAO,MACPD,QAAS,qEACTD,SAAU,OACV5H,UAAW,qEACXC,UAAW,SAGftG,EAAQ8N,QAAUA,I","file":"static/js/main.fe0bdf24.chunk.js","sourcesContent":["import { CkitInitOptions, predefined } from '@ckit/ckit';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { useMemo } from 'react';\n\nexport interface LocalConfig {\n  ckitConfig: CkitInitOptions;\n  mecuryRPC: string;\n  ckbRPC: string;\n  nervosExploreTxUrlPrefix: string;\n  nervosExploreAddressUrlPrefix: string;\n  nervosExploreSudtUrlPrefix: string;\n}\n\n// TODO remove random when predefined config is ready\nexport function useConfigStorage(): [LocalConfig, (newValue: LocalConfig) => void, () => void] {\n  const initialConfig = useMemo<LocalConfig>(() => {\n    // TODO check network first\n    const ckitConfig: CkitInitOptions = predefined.Aggron;\n    const mecuryRPC = 'https://testnet.ckb.dev/indexer';\n    const ckbRPC = 'https://testnet.ckb.dev/rpc';\n    const nervosExploreTxUrlPrefix = 'https://explorer.nervos.org/aggron/transaction/';\n    const nervosExploreAddressUrlPrefix = 'https://explorer.nervos.org/aggron/address/';\n    const nervosExploreSudtUrlPrefix = 'https://explorer.nervos.org/aggron/sudt/';\n    return {\n      ckitConfig: ckitConfig,\n      mecuryRPC: mecuryRPC,\n      ckbRPC: ckbRPC,\n      nervosExploreTxUrlPrefix: nervosExploreTxUrlPrefix,\n      nervosExploreAddressUrlPrefix: nervosExploreAddressUrlPrefix,\n      nervosExploreSudtUrlPrefix: nervosExploreSudtUrlPrefix,\n    };\n  }, []);\n\n  return useLocalStorage<LocalConfig>('localConfig', initialConfig);\n}\n","import { CkitProvider } from '@ckit/ckit';\nimport { useEffect, useState } from 'react';\nimport { createContainer } from 'unstated-next';\nimport { useConfigStorage } from 'hooks/useConfigStorage';\n\nexport const CkitProviderContainer = createContainer<CkitProvider | undefined>(() => {\n  const [ckitProvider, setCkitProvider] = useState<CkitProvider>();\n  const [localConfig] = useConfigStorage();\n  useEffect(() => {\n    const provider = new CkitProvider(localConfig.mecuryRPC, localConfig.ckbRPC);\n    void provider.init({ ...localConfig.ckitConfig }).then(() => setCkitProvider(provider));\n  }, [localConfig]);\n\n  return ckitProvider;\n});\n\nexport function useProvider(): CkitProvider {\n  const provider = CkitProviderContainer.useContainer();\n\n  if (!provider) throw new Error('Cannot find provider, make suer useProvider in CkitProviderContainer');\n\n  return provider;\n}\n","import { CkitProvider, NonAcpPwLockWallet } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableNonAcpPwLockWallet extends NonAcpPwLockWallet {\n  constructor(ckitProvider: CkitProvider) {\n    super(ckitProvider);\n    this.setDescriptor({ name: 'MetaMask(Non-ACP)' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { CkitProvider, AcpPwLockWallet } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableAcpPwLockWallet extends AcpPwLockWallet {\n  constructor(ckitProvider: CkitProvider) {\n    super(ckitProvider);\n    this.setDescriptor({ name: 'MetaMask(ACP)' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { UnipassWallet, CkitProvider } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableUnipassWallet extends UnipassWallet {\n  constructor(provider: CkitProvider) {\n    super(provider);\n    this.setDescriptor({ name: 'UniPass' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { AbstractWallet, ConnectStatus } from '@ckit/ckit';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { autorun, runInAction } from 'mobx';\nimport { useLocalObservable } from 'mobx-react-lite';\nimport { useCallback, useEffect, useState } from 'react';\nimport { createContainer } from 'unstated-next';\nimport { CkitProviderContainer } from '../CkitProviderContainer';\nimport { ObservableAcpPwLockWallet, ObservableNonAcpPwLockWallet, ObservableUnipassWallet } from 'wallets';\n\nexport interface WalletConnectError {\n  error: Error;\n  index: number;\n}\n\nfunction useWallet() {\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const [currentWalletName, setCurrentWalletName] = useLocalStorage<string | null>('currentWalletName');\n\n  // TODO refactor to Wallets class\n  const wallets = useLocalObservable<AbstractWallet[]>(() => []);\n  const [signerAddress, setSignerAddress] = useState<string>();\n  const [error, setError] = useState<WalletConnectError | null>(null);\n  const [visible, setVisible] = useState(false);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  const setModalVisible = useCallback((visible: boolean) => {\n    setVisible(visible);\n    setError(null);\n  }, []);\n\n  useEffect(() => {\n    if (!ckitProvider) return;\n    // when the provider has changed, wallets should be construct with the new provider\n    runInAction(() => {\n      wallets.splice(0);\n      wallets.push(\n        new ObservableUnipassWallet(ckitProvider),\n        new ObservableNonAcpPwLockWallet(ckitProvider),\n        new ObservableAcpPwLockWallet(ckitProvider),\n      );\n      wallets.find((value) => value.descriptor.name === currentWalletName)?.connect();\n    });\n  }, [ckitProvider]);\n\n  useEffect(\n    () =>\n      autorun(() => {\n        if (!wallets) return;\n        wallets.forEach((wallet, index) => {\n          const onConnectStatusChanged = (connectStatus: ConnectStatus) => {\n            if (connectStatus === 'disconnected') {\n              const remainConnectedWallet = wallets.find((w) => w.connectStatus === 'connected');\n              if (!remainConnectedWallet) {\n                setCurrentWalletName(null);\n              } else {\n                setCurrentWalletName(remainConnectedWallet.descriptor.name);\n              }\n            }\n            if (connectStatus === 'connected') {\n              setModalVisible(false);\n              const connectedWallet = wallets.find((w) => w.descriptor.name === wallet.descriptor.name);\n              if (!connectedWallet) {\n                throw new Error('exception: wallet could not be found');\n              } else {\n                setCurrentWalletName(connectedWallet.descriptor.name);\n              }\n            }\n          };\n          wallet.on('connectStatusChanged', onConnectStatusChanged);\n          wallet.on('error', (err) =>\n            setError({\n              error: err as Error,\n              index: index,\n            }),\n          );\n        });\n      }),\n    [setModalVisible, wallets],\n  );\n\n  const currentWallet = wallets.find((value) => value.descriptor.name === currentWalletName);\n\n  useEffect(() => {\n    autorun(() => {\n      setSignerAddress(undefined);\n      const wallet = wallets.find((value) => value.descriptor.name === currentWalletName);\n      void wallet?.signer?.getAddress().then((address) => {\n        setSignerAddress(address);\n        setIsInitialized(true);\n      });\n    });\n  }, [currentWalletName]);\n\n  return {\n    isInitialized,\n    wallets,\n    currentWallet,\n    setCurrentWalletName,\n    signerAddress,\n    error,\n    setError,\n    visible,\n    setModalVisible,\n  };\n}\n\nexport const WalletContainer = createContainer(useWallet);\n\nexport const displayWalletName = (name: string | undefined): string => {\n  return name || 'unknown';\n};\n","import { UnipassWallet } from '@ckit/ckit';\nimport { useLocalStorage } from '@rehooks/local-storage';\n\ninterface UnipassContext {\n  shouldLogin: boolean;\n  cacheLogin: () => void;\n  shouldSendTx: boolean;\n  cacheTx: (tx: string | null) => void;\n  clearTx: () => void;\n  cachedTx: string | null;\n}\n\nexport function useUnipass(): UnipassContext {\n  const [cachedTx, cacheTx] = useLocalStorage<string | null>('unipassTx');\n  const adapter = new UnipassWallet.UnipassRedirectAdapter({ host: 'https://unipass.xyz' }); // TODO  use the config\n  return {\n    shouldLogin: adapter.hasLoginInfo(),\n    cacheLogin: () => adapter.saveLoginInfo(),\n    shouldSendTx: adapter.hasSigData(),\n    cacheTx,\n    clearTx: () => cacheTx(null),\n    cachedTx,\n  };\n}\n","import { BigNumber } from 'bignumber.js';\n\nexport class AssetAmount {\n  rawAmount: BigNumber;\n  decimals: number;\n\n  constructor(rawAmount: string | BigNumber, decimals: number) {\n    this.rawAmount = new BigNumber(rawAmount);\n    this.decimals = decimals;\n  }\n\n  static fromRaw(rawAmount: string, decimals: number): AssetAmount {\n    return new AssetAmount(rawAmount, decimals);\n  }\n\n  static fromHumanize(humanizeAmount: string, decimals: number): AssetAmount {\n    const rawAmount = new BigNumber(humanizeAmount).times(10 ** decimals);\n    return new AssetAmount(rawAmount, decimals);\n  }\n\n  toRawString(): string {\n    return this.rawAmount.toString();\n  }\n\n  toHexString(): string {\n    return '0x' + this.rawAmount.toString(16);\n  }\n\n  toHumanizeString(): string {\n    const humanizeAmount = this.rawAmount.times(10 ** -this.decimals);\n    const originDecimalPlaces = humanizeAmount.decimalPlaces();\n    const rounded = humanizeAmount.decimalPlaces(originDecimalPlaces, BigNumber.ROUND_FLOOR);\n    return rounded.toFormat().toString();\n  }\n}\n","export * from './AssetAmount';\n\nexport function hasProp<O, K extends string | number | symbol>(obj: O, key: K): obj is Record<K, unknown> & O {\n  return obj != null && typeof obj === 'object' && key in obj;\n}\n\nexport function truncateMiddle(str: string, start: number, end = start): string {\n  if (!start || !end || start <= 0 || end <= 0) throw new Error('start or end is invalid');\n  if (str.length <= start + end) return str;\n  return str.slice(0, start) + '...' + str.slice(-end);\n}\n","import { Hash } from '@ckb-lumos/base';\nimport { AbstractTransactionBuilder, CkitProvider, EntrySigner } from '@ckit/ckit';\nimport { Transaction } from '@lay2/pw-core';\nimport { Modal } from 'antd';\nimport React from 'react';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { useConfigStorage } from './useConfigStorage';\nimport { useUnipass } from './useUnipass';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { hasProp } from 'utils';\n\ntype SendTransactionOption = Transaction | ((provider: CkitProvider, signer: EntrySigner) => Promise<Transaction>);\n\nexport function useSendTransaction(): UseMutationResult<{ txHash: Hash }, unknown, SendTransactionOption> {\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const { currentWallet } = WalletContainer.useContainer();\n  const [localConfig] = useConfigStorage();\n  const { cacheTx, clearTx } = useUnipass();\n\n  return useMutation(\n    async (option: SendTransactionOption) => {\n      if (!currentWallet?.signer) throw new Error('exception: signer undefined');\n      if (!ckitProvider) throw new Error('exception: ckitProvider undefined');\n\n      const tx = typeof option === 'function' ? await option(ckitProvider, currentWallet.signer) : option;\n      if (currentWallet.descriptor.name === 'UniPass') {\n        const serializedTx = AbstractTransactionBuilder.serde.serialize(tx);\n        cacheTx(JSON.stringify(serializedTx));\n      }\n      const txHash = await ckitProvider.sendTransaction(await currentWallet.signer.seal(tx));\n      if (currentWallet.descriptor.name === 'UniPass') {\n        clearTx();\n      }\n      return { txHash: txHash };\n    },\n    {\n      onSuccess({ txHash }) {\n        const href = localConfig.nervosExploreTxUrlPrefix + txHash;\n        Modal.success({\n          title: 'Tx sent',\n          content: (\n            <p>\n              The transaction was sent, check it in&nbsp;\n              <a href={href} target=\"_blank\" rel=\"noreferrer\">\n                explorer\n              </a>\n              <details>\n                <summary>transaction id</summary>\n                {txHash}\n              </details>\n            </p>\n          ),\n        });\n      },\n      onError(error) {\n        const errorMsg: string = hasProp(error, 'message') ? String(error.message) : 'Unknown error';\n        Modal.error({ title: 'Tx failed', content: errorMsg, width: 360 });\n      },\n    },\n  );\n}\n","import { AbstractTransactionBuilder } from '@ckit/ckit';\nimport { Transaction } from '@lay2/pw-core';\nimport { Spin } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { WalletContainer } from 'containers';\nimport { useSendTransaction } from 'hooks/useSendTransaction';\nimport { useUnipass } from 'hooks/useUnipass';\n\nexport const OnIncomplete: React.FC = ({ children }) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const { isInitialized, setCurrentWalletName } = WalletContainer.useContainer();\n  const { mutateAsync: sendTransaction } = useSendTransaction();\n  const { shouldLogin, cacheLogin, shouldSendTx, cachedTx } = useUnipass();\n\n  useEffect(() => {\n    void (async () => {\n      if (shouldLogin) {\n        setCurrentWalletName('UniPass');\n        cacheLogin();\n      }\n\n      if (shouldSendTx) {\n        if (!isInitialized) return;\n        if (!cachedTx) throw new Error('Could not find transaction to send');\n        const txToSend = AbstractTransactionBuilder.serde.deserialize(cachedTx);\n        await sendTransaction(txToSend as Transaction).catch(() => setIsLoaded(true));\n      }\n\n      setIsLoaded(true);\n    })();\n  }, [isInitialized]);\n\n  if (!isLoaded) return <Spin />;\n  return <>{children}</>;\n};\n","import styled from 'styled-components';\n\nexport const StyledCardWrapper = styled.div`\n  width: 360px;\n  padding: 24px;\n  margin-bottom: 48px;\n  border-radius: 16px;\n  background: #fff;\n  box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);\n`;\n","import { Button } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const WalletConnectFC: React.FC = () => {\n  const { currentWallet, setModalVisible } = WalletContainer.useContainer();\n\n  if (currentWallet) {\n    return (\n      <Button size=\"small\" onClick={() => setModalVisible(true)}>\n        connected to {currentWallet.descriptor.name}\n      </Button>\n    );\n  }\n\n  return (\n    <Button size=\"small\" type=\"primary\" onClick={() => setModalVisible(true)}>\n      Connect\n    </Button>\n  );\n};\n\nexport const WalletConnect = observer(WalletConnectFC);\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { RecipientOptions, helpers, MintSudtBuilder, CkitProvider, EntrySigner } from '@ckit/ckit';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { useSendTransaction } from './useSendTransaction';\n\nexport interface SendIssueTxInput {\n  recipient: Address;\n  amount: HexNumber;\n  operationKind: 'invite' | 'issue';\n}\n\nexport function useSendIssueTx(): UseMutationResult<unknown, unknown, SendIssueTxInput> {\n  const { mutateAsync: sendTransaction } = useSendTransaction();\n\n  return useMutation(['sendIssueTx'], async (input: SendIssueTxInput) => {\n    const buildTx = async (provider: CkitProvider, signer: EntrySigner) => {\n      const recipientsParams: RecipientOptions = {\n        recipient: input.recipient,\n        amount: input.amount,\n      };\n      if (input.operationKind === 'invite') {\n        recipientsParams.capacityPolicy = 'createAcp';\n        recipientsParams.additionalCapacity = helpers.CkbAmount.fromCkb(1).toHex();\n        recipientsParams.amount = '0';\n      } else {\n        recipientsParams.capacityPolicy = 'findAcp';\n      }\n      const txBuilder = new MintSudtBuilder({ recipients: [recipientsParams] }, provider, signer);\n      return txBuilder.build();\n    };\n\n    await sendTransaction(buildTx);\n  });\n}\n","import { CkbTypeScript } from '@ckit/base';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { useMemo } from 'react';\n\nexport interface AssetMeta {\n  symbol: string;\n  decimal: number;\n  script?: CkbTypeScript;\n}\n\nexport function useAssetMetaStorage(): [AssetMeta[], (newValue: AssetMeta[]) => void, () => void] {\n  const initialAssetMeta = useMemo<AssetMeta[]>(() => [{ symbol: 'ckb', decimal: 8 }], []);\n  return useLocalStorage<AssetMeta[]>('assetMeta', initialAssetMeta);\n}\n","import { Button, Col, Empty, Row, Tooltip, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { WalletContainer } from 'containers/WalletContainer';\nimport { useConfigStorage } from 'hooks';\nimport { truncateMiddle } from 'utils';\n\nexport const WalletChange = observer(() => {\n  const { signerAddress, setModalVisible } = WalletContainer.useContainer();\n  const [localConfig] = useConfigStorage();\n  if (!signerAddress) return <Empty />;\n  const truncatedAddress = truncateMiddle(signerAddress, 8);\n  const href = localConfig.nervosExploreAddressUrlPrefix + signerAddress;\n  return (\n    <div style={{ marginTop: '32px', marginBottom: '32px' }}>\n      <Row>\n        <Col span={8} offset={6}>\n          <div style={{ textAlign: 'center' }}>\n            <Tooltip title={<AddressTip copyable>{signerAddress}</AddressTip>}>\n              <a href={href} target=\"_blank\" rel=\"noreferrer\">\n                {truncatedAddress}\n              </a>\n            </Tooltip>\n          </div>\n        </Col>\n        <Col span={8} offset={2}>\n          <div style={{ float: 'right' }}>\n            <Button size=\"small\" onClick={() => setModalVisible(true)}>\n              change\n            </Button>\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n});\n\nconst AddressTip = styled(Typography.Text)`\n  color: #ffffff;\n`;\n","import { SyncOutlined, CheckCircleTwoTone, UsbOutlined } from '@ant-design/icons';\nimport { AbstractWallet } from '@ckit/base';\nimport { List, Modal, Space, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { displayWalletName, WalletContainer } from 'containers/WalletContainer';\n\nconst ModalBorderWrapper = styled.div`\n  .ant-list-item {\n    padding: 4px 0;\n    margin: 4px 0;\n    border-radius: 8px;\n    border: 1px solid rgba(0, 0, 0, 0);\n\n    &:hover {\n      border: 1px solid rgba(0, 0, 0, 0.2);\n      border-radius: 8px;\n      cursor: pointer;\n    }\n  }\n`;\n\nexport const WalletList = observer(() => {\n  const { wallets, setCurrentWalletName, visible, setError, setModalVisible } = WalletContainer.useContainer();\n\n  return (\n    <Modal\n      closable\n      title={'Choose wallets'}\n      width={312}\n      visible={visible}\n      onCancel={() => setModalVisible(false)}\n      footer={null}\n    >\n      <ModalBorderWrapper>\n        <List\n          pagination={false}\n          dataSource={wallets}\n          renderItem={(item, index) => (\n            <List.Item\n              onClick={() => {\n                setError(null);\n                if (item.connectStatus === 'disconnected') {\n                  item.connect();\n                }\n                if (item.connectStatus === 'connected') {\n                  setCurrentWalletName(item.descriptor.name);\n                  setModalVisible(false);\n                }\n              }}\n            >\n              <WalletListItem wallet={item} index={index} />\n            </List.Item>\n          )}\n        />\n      </ModalBorderWrapper>\n    </Modal>\n  );\n});\n\nexport interface WalletListItemProps {\n  wallet: AbstractWallet;\n  index: number;\n}\n\nexport const WalletListItem = observer((props: WalletListItemProps) => {\n  const { wallet, index } = props;\n  const { error } = WalletContainer.useContainer();\n  if (wallet.connectStatus === 'disconnected') {\n    return (\n      <div>\n        <Space>\n          {displayWalletName(wallet.descriptor.name)}\n          <UsbOutlined />\n        </Space>\n        {error && error.index === index && <Typography.Text type=\"danger\"> {error.error.message}</Typography.Text>}\n      </div>\n    );\n  }\n  if (wallet.connectStatus === 'connecting') {\n    return (\n      <div>\n        <Space>\n          {displayWalletName(wallet.descriptor.name)}\n          <SyncOutlined spin />\n        </Space>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <Space>\n        {displayWalletName(wallet.descriptor.name)}\n        <CheckCircleTwoTone />\n      </Space>\n    </div>\n  );\n});\n","import { Typography, Row, Col } from 'antd';\nimport React from 'react';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletList, WalletChange, WalletConnect } from 'components/Wallet';\n\nexport const AccountView: React.FC = () => {\n  return (\n    <StyledCardWrapper>\n      <div style={{ marginBottom: '24px' }}>\n        <Row>\n          <Col span={12}>\n            <Typography.Title level={3}> Account </Typography.Title>\n          </Col>\n          <Col span={12}>\n            <div style={{ float: 'right', paddingTop: '5px' }}>\n              <WalletConnect />\n            </div>\n          </Col>\n        </Row>\n      </div>\n      <WalletList />\n      <WalletChange />\n    </StyledCardWrapper>\n  );\n};\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Typography } from 'antd';\nimport React from 'react';\nimport { useQuery } from 'react-query';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AssetMeta } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype AssetBalanceProps = Pick<AssetMeta, 'decimal'> & { script: AssetMeta['script'] };\n\nexport const AssetBalance: React.FC<AssetBalanceProps> = (props) => {\n  const { script, decimal } = props;\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const { signerAddress } = WalletContainer.useContainer();\n  const query = useQuery(\n    ['queryBalance', { script: script, address: signerAddress }],\n    () => {\n      if (!ckitProvider || !signerAddress) throw new Error('exception: signer should exist');\n      if (script) {\n        return ckitProvider.getUdtBalance(signerAddress, script);\n      }\n      return ckitProvider.getCkbLiveCellsBalance(signerAddress);\n    },\n    {\n      enabled: !!signerAddress,\n    },\n  );\n  if (query.isError) {\n    return <Typography.Text type=\"danger\">error</Typography.Text>;\n  }\n  if (query.data) {\n    return <Typography.Text>{AssetAmount.fromRaw(query.data, decimal).toHumanizeString()}</Typography.Text>;\n  }\n  return <LoadingOutlined />;\n};\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { CkbTypeScript } from '@ckit/base';\nimport { Button, Col, Modal, Row, Typography } from 'antd';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AssetMeta, useSendIssueTx, useSendTransferTx } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype AssetMetaProps = Pick<AssetMeta, 'symbol' | 'decimal'> & { script: AssetMeta['script'] };\n\nexport const SendButton: React.FC<AssetMetaProps> = (props) => {\n  const [visible, setVisible] = useState<boolean>(false);\n  const provider = CkitProviderContainer.useContainer();\n  const { signerAddress } = WalletContainer.useContainer();\n\n  const issuableSudtScript = useMemo<CkbTypeScript>(() => {\n    if (!provider) throw new Error('excepiton: provider undefined');\n    if (!signerAddress) throw new Error('excepiton: signerAddress undefined');\n    return provider.newSudtScript(signerAddress);\n  }, [provider, signerAddress]);\n\n  const isMint =\n    props.script?.code_hash === issuableSudtScript.code_hash &&\n    props.script.hash_type === issuableSudtScript.hash_type &&\n    props.script.args === issuableSudtScript.args;\n\n  const buttonContent = isMint ? 'mint' : 'send';\n\n  return (\n    <div>\n      <Button type=\"link\" onClick={() => setVisible(true)}>\n        {buttonContent}\n      </Button>\n      <ModalForm visible={visible} setVisible={setVisible} assetMeta={props} isMint={isMint} />\n    </div>\n  );\n};\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  assetMeta: AssetMetaProps;\n  isMint: boolean;\n}\n\ninterface ModalFormValues {\n  recipient: Address;\n  amount: HexNumber;\n}\n\ninterface ModalFormErrors {\n  recipient?: Address;\n  amount?: HexNumber;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, assetMeta, isMint } = props;\n\n  const { mutateAsync: sendTransferTransaction, isLoading: isTransferLoading } = useSendTransferTx();\n  const { mutateAsync: sendIssueTransaction, isLoading: isIssueLoading } = useSendIssueTx();\n\n  const initialValues: ModalFormValues = { recipient: '', amount: '' };\n  const title = (isMint ? 'Mint ' : 'Send ') + assetMeta.symbol;\n  const onSubmit = useCallback(\n    (values: ModalFormValues) => {\n      if (isMint) {\n        sendIssueTransaction({\n          recipient: values.recipient,\n          amount: AssetAmount.fromHumanize(values.amount, assetMeta.decimal).toRawString(),\n          operationKind: 'issue',\n        }).then(() => setVisible(false));\n      } else {\n        sendTransferTransaction({\n          recipient: values.recipient,\n          amount: AssetAmount.fromHumanize(values.amount, assetMeta.decimal).toRawString(),\n          script: assetMeta.script,\n        }).then(() => setVisible(false));\n      }\n    },\n    [isMint, sendIssueTransaction, sendTransferTransaction, assetMeta, setVisible],\n  );\n  const loading = isMint ? isIssueLoading : isTransferLoading;\n\n  const validate = (_values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title={title} closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik initialValues={initialValues} validate={validate} onSubmit={onSubmit}>\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"recipient\">recipient:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"recipient\" type=\"text\" placeholder=\"ckb address\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"recipient\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"amount\">amount:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"amount\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"amount\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button loading={loading} onClick={formik.submitForm}>\n                Submit\n              </Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { AcpTransferSudtBuilder, TransferCkbBuilder, CkitProvider, EntrySigner } from '@ckit/ckit';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { AssetMeta } from './useAssetMetaStorage';\nimport { useSendTransaction } from './useSendTransaction';\n\nexport interface SendTransferTxInput {\n  recipient: Address;\n  amount: HexNumber;\n  script: AssetMeta['script'];\n}\n\nexport function useSendTransferTx(): UseMutationResult<unknown, unknown, SendTransferTxInput> {\n  const { mutateAsync: sendTransaction } = useSendTransaction();\n\n  return useMutation(['sendTransferTx'], async (input: SendTransferTxInput) => {\n    const buildTx = async (provider: CkitProvider, signer: EntrySigner) => {\n      if (input.script) {\n        const txBuilder = new AcpTransferSudtBuilder(\n          {\n            recipient: input.recipient,\n            sudt: input.script,\n            amount: input.amount,\n          },\n          provider,\n          signer,\n        );\n        return txBuilder.build();\n      } else {\n        const txBuilder = new TransferCkbBuilder(\n          { recipients: [{ recipient: input.recipient, amount: input.amount, capacityPolicy: 'createAcp' }] },\n          provider,\n          signer,\n        );\n        return txBuilder.build();\n      }\n    };\n\n    await sendTransaction(buildTx);\n  });\n}\n","import { Table } from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport React from 'react';\nimport { AssetBalance } from './AssetBalance';\nimport { SendButton } from './SendButton';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\nexport const AssetList: React.FC = () => {\n  const [assetMeta] = useAssetMetaStorage();\n  const columns: ColumnsType<AssetMeta> = [\n    {\n      render: (value, record) => <div>{record.symbol}</div>,\n    },\n    {\n      render: (value, record) => <AssetBalance decimal={record.decimal} script={record.script} />,\n    },\n    {\n      render: (value, record) => <SendButton symbol={record.symbol} decimal={record.decimal} script={record.script} />,\n    },\n  ];\n\n  return (\n    <div>\n      <Table size=\"small\" showHeader={false} columns={columns} dataSource={assetMeta} pagination={{ pageSize: 5 }} />\n    </div>\n  );\n};\n","import { Hash, HashType, HexString } from '@ckb-lumos/base';\nimport { Button, ButtonProps, Col, Modal, Row, Typography } from 'antd';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport React, { useState } from 'react';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\ninterface AddAssetButtonProps extends ButtonProps {\n  initialAssetMeta?: Partial<ModalFormValues>;\n  buttonContent?: string;\n}\n\nexport const AddAssetButton: React.FC<AddAssetButtonProps> = (props) => {\n  const { initialAssetMeta, buttonContent, ...buttonProps } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  return (\n    <div>\n      <Button {...buttonProps} onClick={() => setVisible(true)}>\n        {buttonContent ? buttonContent : ''}\n      </Button>\n      <ModalForm visible={visible} setVisible={setVisible} initialAssetMeta={initialAssetMeta} />\n    </div>\n  );\n};\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  initialAssetMeta?: Partial<ModalFormValues>;\n}\n\ninterface ModalFormValues {\n  symbol: string;\n  decimal: number;\n  codeHash: Hash;\n  hashType: HashType;\n  args: HexString;\n}\n\ninterface ModalFormErrors {\n  symbol?: string;\n  decimal?: number;\n  codeHash?: Hash;\n  hashType?: HashType;\n  args?: HexString;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, initialAssetMeta } = props;\n\n  const [assets, setAssets] = useAssetMetaStorage();\n\n  const initialValues: ModalFormValues = {\n    symbol: initialAssetMeta?.symbol ? initialAssetMeta.symbol : '',\n    decimal: initialAssetMeta?.decimal ? initialAssetMeta.decimal : 8,\n    codeHash: initialAssetMeta?.codeHash ? initialAssetMeta.codeHash : '',\n    hashType: initialAssetMeta?.hashType ? initialAssetMeta.hashType : 'type',\n    args: initialAssetMeta?.args ? initialAssetMeta.args : '',\n  };\n\n  const validate = (_values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title=\"Add asset\" closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik\n        initialValues={initialValues}\n        validate={validate}\n        onSubmit={(values: ModalFormValues, { setSubmitting }) => {\n          const newAssetMeta: AssetMeta = {\n            symbol: values.symbol,\n            decimal: values.decimal,\n            script: {\n              code_hash: values.codeHash,\n              hash_type: values.hashType,\n              args: values.args,\n            },\n          };\n          setAssets(assets.concat(newAssetMeta));\n          setSubmitting(false);\n          setVisible(false);\n        }}\n      >\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"symbol\">symbol:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"symbol\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"symbol\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"decimal\">decimal:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"decimal\" type=\"number\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"decimal\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"codeHash\">code hash:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"codeHash\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"codeHash\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"hashType\">hash type:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"hashType\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"hashType\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"args\">args:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"args\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"args\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button onClick={formik.submitForm}>Submit</Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { PlusCircleOutlined } from '@ant-design/icons';\nimport { Col, Empty, Row, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { AddAssetButton, AssetList } from 'components/Assets';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const AssetsView: React.FC = observer(() => {\n  const { signerAddress } = WalletContainer.useContainer();\n  return (\n    <div>\n      <StyledCardWrapper>\n        <div style={{ marginBottom: '12px' }}>\n          <Row>\n            <Col span={12}>\n              <Typography.Title level={3}> Assets </Typography.Title>\n            </Col>\n            <Col span={12}>\n              <div style={{ float: 'right' }}>\n                {signerAddress && (\n                  <AddAssetButton type=\"link\" size=\"large\" icon={<PlusCircleOutlined style={{ fontSize: '24px' }} />} />\n                )}\n              </div>\n            </Col>\n          </Row>\n        </div>\n        <div>\n          {signerAddress && <AssetList />}\n          {!signerAddress && <Empty />}\n        </div>\n      </StyledCardWrapper>\n    </div>\n  );\n});\n","import { utils } from '@ckb-lumos/base';\nimport { CkbTypeScript } from '@ckit/base';\nimport { Tooltip, Typography, Row, Col } from 'antd';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useConfigStorage } from 'hooks';\nimport { truncateMiddle } from 'utils';\n\ninterface AssetMetaDisplayProps {\n  symbol: string;\n  decimal: string;\n  script: CkbTypeScript;\n}\n\nexport const AssetMetaDisplay: React.FC<AssetMetaDisplayProps> = (props) => {\n  const { symbol, decimal, script } = props;\n  const [localConfig] = useConfigStorage();\n  const scriptHash = utils.computeScriptHash(script);\n\n  return (\n    <div style={{ marginTop: '24px' }}>\n      <Row>\n        <Col span={7} offset={3}>\n          <Typography.Text>symbol:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Typography.Text>{symbol}</Typography.Text>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: '8px' }}>\n        <Col span={7} offset={3}>\n          <Typography.Text>decimal:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Typography.Text>{decimal}</Typography.Text>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: '8px' }}>\n        <Col span={7} offset={3}>\n          <Typography.Text>script hash:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Tooltip title={<ScriptTip copyable>{JSON.stringify(script)}</ScriptTip>}>\n            <Typography.Link\n              href={localConfig.nervosExploreSudtUrlPrefix + scriptHash}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {truncateMiddle(scriptHash, 8)}\n            </Typography.Link>\n          </Tooltip>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nconst ScriptTip = styled(Typography.Text)`\n  color: #ffffff;\n`;\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { Button, Col, Modal, Row, Typography } from 'antd';\nimport { Formik, Field, Form, ErrorMessage } from 'formik';\nimport { observer } from 'mobx-react-lite';\nimport React, { useState } from 'react';\nimport { AssetMeta, useSendIssueTx } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype OperationKind = 'invite' | 'issue';\n\ninterface IssueOperationProps {\n  assetMeta: AssetMeta;\n}\n\nexport const IssueOperation = observer((props: IssueOperationProps) => {\n  const { assetMeta } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  const [operationKind, setOperationKind] = useState<OperationKind>('invite');\n\n  const onClickInvite = () => {\n    setOperationKind('invite');\n    setVisible(true);\n  };\n  const onClickIssue = () => {\n    setOperationKind('issue');\n    setVisible(true);\n  };\n\n  return (\n    <div style={{ marginBottom: '12px' }}>\n      <Row>\n        <Col span={4} offset={4}>\n          <Button onClick={onClickInvite}>invite</Button>\n        </Col>\n        <Col span={4} offset={8}>\n          <Button onClick={onClickIssue}>issue</Button>\n        </Col>\n      </Row>\n      <ModalForm\n        visible={visible}\n        setVisible={setVisible}\n        operationKind={operationKind}\n        assetDecimal={assetMeta.decimal}\n        assetSymbol={assetMeta.symbol}\n      />\n    </div>\n  );\n});\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  operationKind: OperationKind;\n  assetSymbol: string;\n  assetDecimal: number;\n}\n\ninterface ModalFormValues {\n  recipient: Address;\n  amount: HexNumber;\n}\n\ninterface ModalFormErrors {\n  recipient?: Address;\n  amount?: HexNumber;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, operationKind, assetDecimal, assetSymbol } = props;\n\n  const { mutateAsync: sendIssueTransaction, isLoading: isIssueLoading } = useSendIssueTx();\n\n  const initialValues: ModalFormValues = { recipient: '', amount: '' };\n  const title = operationKind === 'invite' ? 'Invite user' : 'Issue ' + assetSymbol;\n  const recipientFieldDisplayName = operationKind === 'invite' ? 'user:' : 'recipient:';\n\n  const validate = (values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title={title} closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik\n        initialValues={initialValues}\n        validate={validate}\n        onSubmit={(values: ModalFormValues) => {\n          sendIssueTransaction({\n            recipient: values.recipient,\n            amount: AssetAmount.fromHumanize(values.amount, assetDecimal).toRawString(),\n            operationKind: operationKind,\n          }).then(() => setVisible(false));\n        }}\n      >\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"recipient\">{recipientFieldDisplayName}</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"recipient\" type=\"text\" placeholder=\"ckb address\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"recipient\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            {operationKind === 'issue' && (\n              <div style={{ marginTop: '24px' }}>\n                <Row>\n                  <Col span={6}>\n                    <label htmlFor=\"amount\">amount:</label>\n                  </Col>\n                  <Col span={16}>\n                    <Field name=\"amount\" type=\"text\" />\n                  </Col>\n                </Row>\n                <ErrorMessage\n                  name=\"amount\"\n                  children={(errorMessage) => {\n                    return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                  }}\n                />\n              </div>\n            )}\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button loading={isIssueLoading} onClick={formik.submitForm}>\n                Submit\n              </Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { CkbTypeScript } from '@ckit/base';\nimport React, { useMemo } from 'react';\nimport { AddAssetButton } from '../Assets';\nimport { AssetMetaDisplay } from './AssetMetaDisplay';\nimport { IssueOperation } from './IssueOperation';\nimport { CkitProviderContainer } from 'containers';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\ninterface IssueAreaProps {\n  issuerAddress: string;\n}\n\nexport const IssueArea: React.FC<IssueAreaProps> = (props) => {\n  const { issuerAddress } = props;\n  const provider = CkitProviderContainer.useContainer();\n  const [assets] = useAssetMetaStorage();\n\n  const udtScript = useMemo<CkbTypeScript>(() => {\n    if (!provider) throw new Error('excepiton: provider undefined');\n    return provider.newSudtScript(issuerAddress);\n  }, [provider, issuerAddress]);\n\n  const assetMeta = useMemo<AssetMeta | undefined>(() => {\n    return assets.find(\n      (value) =>\n        value.script?.hash_type === udtScript.hash_type &&\n        value.script.code_hash === udtScript.code_hash &&\n        value.script.args === udtScript.args,\n    );\n  }, [udtScript, assets]);\n\n  const symbol = assetMeta ? assetMeta.symbol : '?';\n  const decimal = assetMeta ? assetMeta.decimal.toString() : '?';\n\n  return (\n    <>\n      <AssetMetaDisplay symbol={symbol} decimal={decimal} script={udtScript} />\n      <div style={{ marginTop: '36px', textAlign: 'center' }}>\n        {!assetMeta && (\n          <AddAssetButton\n            type=\"primary\"\n            buttonContent=\"Add asset info\"\n            initialAssetMeta={{\n              codeHash: udtScript.code_hash,\n              hashType: udtScript.hash_type,\n              args: udtScript.args,\n            }}\n          />\n        )}\n        {assetMeta && <IssueOperation assetMeta={assetMeta} />}\n      </div>\n    </>\n  );\n};\n","import { Empty, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { IssueArea } from 'components/Issue';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const IssueView: React.FC = observer(() => {\n  const { currentWallet, signerAddress } = WalletContainer.useContainer();\n  const isSupportIssue = currentWallet?.checkSupported('issue-sudt');\n\n  return (\n    <div>\n      {isSupportIssue && (\n        <StyledCardWrapper>\n          <div>\n            <Typography.Title level={3}> Issue </Typography.Title>\n          </div>\n          {!signerAddress && <Empty />}\n          {signerAddress && <IssueArea issuerAddress={signerAddress} />}\n        </StyledCardWrapper>\n      )}\n    </div>\n  );\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { AccountView } from './Account';\nimport { AssetsView } from './Assets';\nimport { IssueView } from './Issue';\n\nexport const AppView: React.FC = () => {\n  return (\n    <BodyWrapper>\n      <div className=\"app\">\n        <AccountView />\n        <IssueView />\n        <AssetsView />\n      </div>\n    </BodyWrapper>\n  );\n};\n\nconst BodyWrapper = styled.div`\n  padding-bottom: 32px;\n  min-height: 100vh;\n  background: linear-gradient(111.44deg, #a6ded2 0%, #8c99c2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n","import React from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { OnIncomplete } from 'components/OnLoaded';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AppView } from 'views';\nimport './App.less';\n\nconst App: React.FC = () => {\n  const queryClient = new QueryClient();\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <CkitProviderContainer.Provider>\n        <WalletContainer.Provider>\n          <OnIncomplete>\n            <AppView />\n          </OnIncomplete>\n        </WalletContainer.Provider>\n      </CkitProviderContainer.Provider>\n    </QueryClientProvider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    void import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unimplemented = unimplemented;\nexports.asyncSleep = asyncSleep;\nexports.randomHexString = randomHexString;\nexports.nonNullable = nonNullable;\nexports.bytesToHex = bytesToHex;\nexports.hexToBytes = hexToBytes;\nexports.boom = boom;\nexports.asserts = asserts;\n\nfunction unimplemented() {\n  throw new Error('unimplemented');\n}\n\nfunction asyncSleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n/**\n *\n * @param lengthWithOut0x expected length does not contain the beginning 0x\n * @example\n * ```ts\n * randomHexString(1); // 0xa\n * randomHexString(1); // 0x2\n * randomHexString(2); // 0xf8\n * ```\n */\n\n\nfunction randomHexString(lengthWithOut0x) {\n  return '0x' + [...Array(lengthWithOut0x)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\n}\n\nfunction nonNullable(x) {\n  if (x == null) throw new Error('Null check failed');\n  return x;\n}\n\nfunction bytesToHex(bytes) {\n  return `0x${[...bytes].map(b => b.toString(16).padStart(2, '0')).join('')}`;\n}\n\nfunction hexToBytes(hex) {\n  hex = hex.startsWith('0x') ? hex.slice(2) : hex;\n  const match = hex.match(/.{1,2}/g);\n  if (!match) throw new Error(`cannot parse ${hex} into Uint8Array`);\n  return Uint8Array.from(match.map(byte => parseInt(byte, 16)));\n}\n\nfunction boom(message) {\n  throw new Error(message);\n}\n\nfunction asserts(condition, err) {\n  if (condition) return;\n\n  if (typeof err === 'function') {\n    throw err();\n  }\n\n  if (typeof err === 'string') boom(err);\n  if (err instanceof Error) throw err;\n  boom();\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RecipientSameWithSenderError = exports.NoEnoughUdtError = exports.NoEnoughCkbError = exports.NoAvailableCellError = exports.CkitError = void 0;\n\nclass CkitError extends Error {\n  constructor(metadata, message) {\n    super(message);\n    this.metadata = metadata;\n  }\n\n}\n\nexports.CkitError = CkitError;\n\nclass NoAvailableCellError extends CkitError {\n  constructor(metadata, message = 'Cannot find available cell') {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoAvailableCellError = NoAvailableCellError;\n\nclass NoEnoughCkbError extends CkitError {\n  constructor(metadata, message = `Udt is not enough, expected minimal amount: ${metadata.expected}, actual: ${metadata.actual}`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoEnoughCkbError = NoEnoughCkbError;\n\nclass NoEnoughUdtError extends CkitError {\n  constructor(metadata, message = `Ckb is not enough, expected minimal amount: ${metadata.expected}, actual: ${metadata.actual}`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoEnoughUdtError = NoEnoughUdtError;\n\nclass RecipientSameWithSenderError extends CkitError {\n  constructor(metadata, message = `The recipient and sender cannot be the same one`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.RecipientSameWithSenderError = RecipientSameWithSenderError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"serialize\", {\n  enumerable: true,\n  get: function () {\n    return _pw.serialize;\n  }\n});\nObject.defineProperty(exports, \"deserialize\", {\n  enumerable: true,\n  get: function () {\n    return _pw.deserialize;\n  }\n});\nexports.Pw = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"./pw.serde\");\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nfunction fromPwCellDep(x) {\n  return {\n    dep_type: x.depType,\n    out_point: {\n      tx_hash: x.outPoint.txHash,\n      index: x.outPoint.index\n    }\n  };\n}\n\nfunction toPwCellDep(x) {\n  return new _pwCore.CellDep(x.dep_type === 'dep_group' ? _pwCore.DepType.depGroup : _pwCore.DepType.code, new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index));\n}\n\nfunction fromPwScript(x) {\n  return {\n    code_hash: x.codeHash,\n    args: x.args,\n    hash_type: x.hashType\n  };\n}\n\nfunction toPwScript(x) {\n  return new _pwCore.Script(x.code_hash, x.args, x.hash_type === 'type' ? _pwCore.HashType.type : _pwCore.HashType.data);\n}\n\nfunction fromPwCell(x) {\n  return {\n    cell_output: {\n      capacity: x.capacity.toHexString(),\n      type: x.type ? fromPwScript(x.type) : undefined,\n      lock: fromPwScript(x.lock)\n    },\n    out_point: x.outPoint ? {\n      tx_hash: x.outPoint.txHash,\n      index: x.outPoint.index\n    } : undefined,\n    data: x.getData()\n  };\n}\n\nfunction isLumosCell(x) {\n  if (typeof x !== 'object' || x == null) return false;\n  return 'cell_output' in x;\n}\n\nfunction toPwCell(x) {\n  if (isLumosCell(x)) {\n    return new _pwCore.Cell(new _pwCore.Amount(x.cell_output.capacity, 0), toPwScript(x.cell_output.lock), x.cell_output.type ? toPwScript(x.cell_output.type) : undefined, x.out_point ? new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index) : undefined, x.data);\n  }\n\n  return new _pwCore.Cell(new _pwCore.Amount(x.output.capacity, 0), toPwScript(x.output.lock), x.output.type ? toPwScript(x.output.type) : undefined, x.out_point ? new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index) : undefined, x.output_data);\n}\n\nfunction toPwOutPoint(x) {\n  return new _pwCore.OutPoint(x.tx_hash, x.index);\n}\n/**\n * from: PW => Lumos\n * to: Lumos => PW\n */\n\n\nconst Pw = {\n  fromPwCellDep,\n  toPwCellDep,\n  fromPwCell,\n  toPwCell,\n  toPwScript,\n  fromPwScript,\n  toPwOutPoint\n};\nexports.Pw = Pw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"ScriptManager\", {\n  enumerable: true,\n  get: function () {\n    return _ScriptManager.ScriptManager;\n  }\n});\nObject.defineProperty(exports, \"AbstractProvider\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.AbstractProvider;\n  }\n});\nObject.defineProperty(exports, \"ProviderConfig\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.ProviderConfig;\n  }\n});\nObject.defineProperty(exports, \"InitOptions\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.InitOptions;\n  }\n});\nObject.defineProperty(exports, \"AbstractWallet\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractWallet.AbstractWallet;\n  }\n});\n\nvar _ScriptManager = require(\"./ScriptManager\");\n\nvar _AbstractProvider = require(\"./AbstractProvider\");\n\nvar _AbstractWallet = require(\"./AbstractWallet\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractTransactionBuilder = void 0;\n\nvar _pw = require(\"../helpers/pw\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// TODO migrate to mercury mode\nclass AbstractTransactionBuilder {\n  serialize(tx) {\n    return AbstractTransactionBuilder.serde.serialize(tx);\n  }\n\n}\n\nexports.AbstractTransactionBuilder = AbstractTransactionBuilder;\n\n_defineProperty(AbstractTransactionBuilder, \"serde\", {\n  serialize(deserialized) {\n    return (0, _pw.serialize)(deserialized);\n  },\n\n  deserialize(serialized) {\n    return (0, _pw.deserialize)(serialized);\n  }\n\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractPwSenderBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _utils = require(\"../../utils\");\n\nvar _config = require(\"../unipass/config\");\n\n// TODO uncomment me when ran in Aggron or Mainnet\nclass AbstractPwSenderBuilder extends _pwCore.Builder {\n  constructor(provider) {\n    super(Number(provider.config.MIN_FEE_RATE));\n    this.provider = provider;\n  } // TODO refactor to ConfigManager\n\n\n  getCellDeps(_scripts) {\n    return [_pw.Pw.toPwCellDep(this.provider.getCellDep('SUDT')), _pw.Pw.toPwCellDep(this.provider.getCellDep('ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('PW_NON_ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('PW_ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('SECP256K1_BLAKE160')), // TODO uncomment me when ran in Aggron or Mainnet\n    ...(0, _config.getCellDeps)()];\n  } // TODO refactor to ConfigManager\n\n\n  getWitnessPlaceholder(address) {\n    const isTemplateOf = (key, address) => {\n      const script = this.provider.parseToScript(address);\n      const scriptConfig = this.provider.getScriptConfig(key);\n      return scriptConfig.CODE_HASH === script.code_hash && scriptConfig.HASH_TYPE === script.hash_type;\n    };\n\n    if (isTemplateOf('SECP256K1_BLAKE160', address)) {\n      return {\n        lock: '0x' + '0'.repeat(130),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('PW_NON_ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(132),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('PW_NON_ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(132),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(130),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('UNIPASS', address)) {\n      return {\n        lock: '0x' + '0'.repeat(2082),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    (0, _utils.boom)(`Unsupported lock ${address}`);\n  }\n\n}\n\nexports.AbstractPwSenderBuilder = AbstractPwSenderBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractSingleEntrySigner = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../helpers/pw\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass PwAdapterSigner extends _pwCore.Signer {\n  constructor(rawSigner, provider, hasher = new _pwCore.Blake2bHasher()) {\n    super(hasher);\n    this.rawSigner = rawSigner;\n    this.provider = provider;\n  }\n\n  async signMessages(messages) {\n    const sigs = [];\n\n    const signerLock = _pw.Pw.toPwScript(this.provider.parseToScript(await this.rawSigner.getAddress()));\n\n    for (const item of messages) {\n      if (item.lock.sameWith(signerLock)) {\n        const sig = await this.rawSigner.signMessage(item.message);\n        sigs.push(sig);\n      } else {\n        sigs.push('0x');\n      }\n    }\n\n    return sigs;\n  }\n\n}\n\nclass AbstractSingleEntrySigner {\n  constructor(options) {\n    var _options$hasher;\n\n    _defineProperty(this, \"adapter\", void 0);\n\n    const hasher = (_options$hasher = options.hasher) !== null && _options$hasher !== void 0 ? _options$hasher : new _pwCore.Blake2bHasher();\n    this.adapter = new PwAdapterSigner(this, options.provider, hasher);\n  }\n\n  // TODO refactor to sig entry to adapt mercury\n\n  /**\n   *\n   * @param tx the tx is actually PwTransaction, but may change in the future in order to migrate to mercury\n   */\n  async seal(tx) {\n    const signed = await this.adapter.sign(tx);\n    return _pwCore.transformers.TransformTransaction(signed);\n  }\n\n}\n\nexports.AbstractSingleEntrySigner = AbstractSingleEntrySigner;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryProvider = void 0;\n\nvar _rpc = require(\"@ckb-lumos/rpc\");\n\nvar _base = require(\"@ckit/base\");\n\nvar _mercuryClient = require(\"@ckit/mercury-client\");\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _helpers = require(\"../../helpers\");\n\nvar _utils = require(\"../../utils\");\n\nvar _IndexerCellProvider = require(\"./IndexerCellProvider\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass MercuryProvider extends _base.AbstractProvider {\n  constructor(mercuryRpc = 'http://127.0.0.1:8116', ckbRpc = 'http://127.0.0.1:8114') {\n    super();\n\n    _defineProperty(this, \"mercury\", void 0);\n\n    _defineProperty(this, \"rpc\", void 0);\n\n    if (mercuryRpc instanceof _mercuryClient.MercuryClient) this.mercury = mercuryRpc;else this.mercury = new _mercuryClient.MercuryClient(mercuryRpc);\n    if (ckbRpc instanceof _rpc.RPC) this.rpc = ckbRpc;else this.rpc = new _rpc.RPC(ckbRpc);\n  }\n\n  async collectCkbLiveCells(address, minimalCapacity) {\n    const lock = this.parseToScript(address);\n    const searchKey = {\n      script: lock,\n      script_type: 'lock',\n      filter: {\n        output_data_len_range: ['0x0', '0x1']\n      } // ckb live cells only\n\n    };\n    const cells$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.filter)(cell => cell.output.type == null), // live cell only\n    (0, _rxjs.scan)((acc, next) => ({\n      cells: acc.cells.concat(next),\n      amount: acc.amount + BigInt(next.output.capacity)\n    }), {\n      amount: 0n,\n      cells: []\n    }), (0, _rxjs.takeWhile)(acc => acc.amount < BigInt(minimalCapacity), true));\n    const acc = await (0, _rxjs.lastValueFrom)(cells$, {\n      defaultValue: {\n        amount: 0n,\n        cells: []\n      }\n    });\n\n    if (acc.amount < BigInt(minimalCapacity)) {\n      throw new _errors.NoEnoughCkbError({\n        lock,\n        expected: minimalCapacity,\n        actual: _helpers.Amount.from(acc.amount).toHex()\n      });\n    }\n\n    return acc.cells;\n  }\n  /**\n   * Calculate the capacity of all cells with only locks\n   */\n\n\n  async getCkbLiveCellsBalance(address) {\n    const searchKey = {\n      script: this.parseToScript(address),\n      script_type: 'lock',\n      filter: {\n        output_data_len_range: ['0x0', '0x1']\n      } // ckb live cells only\n\n    };\n    const balance$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.filter)(cell => cell.output.type == null), (0, _rxjs.reduce)((balance, cell) => balance + BigInt(cell.output.capacity), 0n));\n    const balance = await (0, _rxjs.lastValueFrom)(balance$, {\n      defaultValue: '0x0'\n    });\n    return String(balance);\n  }\n\n  getTxPoolInfo() {\n    return this.rpc.tx_pool_info();\n  }\n\n  getChainInfo() {\n    return this.rpc.get_blockchain_info();\n  }\n\n  sendTransaction(tx) {\n    return this.rpc.send_transaction(tx);\n  }\n\n  async collectUdtCells(address, udt, minimalAmount) {\n    const lock = this.parseToScript(address);\n    const searchKey = {\n      script: lock,\n      filter: {\n        script: udt\n      },\n      script_type: 'lock'\n    };\n    const cells$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.scan)((acc, resolvedCell) => ({\n      cells: acc.cells.concat(resolvedCell),\n      amount: acc.amount + BigInt((0, _pwCore.toBigUInt128LE)(resolvedCell.output_data.slice(0, 34)))\n    }), {\n      amount: 0n,\n      cells: []\n    }), (0, _rxjs.takeWhile)(acc => acc.amount < BigInt(minimalAmount), true) // inclusive last to ensure cells are enough\n    );\n    const acc = await (0, _rxjs.lastValueFrom)(cells$, {\n      defaultValue: {\n        amount: 0n,\n        cells: []\n      }\n    });\n\n    if (acc.amount < BigInt(minimalAmount)) {\n      throw new _errors.NoEnoughUdtError({\n        lock,\n        expected: minimalAmount,\n        actual: _helpers.Amount.from(acc.amount).toHex()\n      });\n    }\n\n    return acc.cells;\n  }\n\n  getUdtBalance(address, udt) {\n    const searchKey = {\n      script: this.parseToScript(address),\n      filter: {\n        script: udt\n      },\n      script_type: 'lock'\n    };\n    const balance$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.reduce)((acc, resolvedCell) => acc + BigInt((0, _pwCore.toBigUInt128LE)(resolvedCell.output_data.slice(0, 34))), 0n));\n    return (0, _rxjs.lastValueFrom)(balance$, {\n      defaultValue: 0n\n    }).then(x => String(x));\n  }\n\n  async waitForTransactionCommitted(txHash, options = {}) {\n    const {\n      pollIntervalMs = 1000,\n      timeoutMs = 60000\n    } = options;\n    const start = Date.now();\n    let result = null;\n\n    while (Date.now() - start <= timeoutMs) {\n      var _tx$tx_status;\n\n      const tx = await this.rpc.get_transaction(txHash);\n\n      if ((tx === null || tx === void 0 ? void 0 : (_tx$tx_status = tx.tx_status) === null || _tx$tx_status === void 0 ? void 0 : _tx$tx_status.status) === 'committed') {\n        result = tx.transaction;\n        break;\n      }\n\n      await (0, _utils.asyncSleep)(pollIntervalMs);\n    }\n\n    const rpcTip = Number(await this.rpc.get_tip_block_number());\n\n    while (Date.now() - start <= timeoutMs) {\n      const mercuryTip = await this.mercury.get_tip();\n      if (Number(mercuryTip.block_number) >= rpcTip) break;\n      await (0, _utils.asyncSleep)(pollIntervalMs);\n    }\n\n    return result;\n  }\n\n  asIndexerCellProvider() {\n    return new _IndexerCellProvider.MercuryCellProvider(this.mercury);\n  }\n\n}\n\nexports.MercuryProvider = MercuryProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Amount = require(\"./Amount\");\n\nObject.keys(_Amount).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _Amount[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _Amount[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.byteLenOfSudt = byteLenOfSudt;\nexports.byteLenOfCkbLiveCell = byteLenOfCkbLiveCell;\n\nfunction byteLenOfSudt(lockArgsByteLen = 20) {\n  return 8\n  /* capacity: u64 */\n  +\n  /* lock script */\n  32\n  /* code_hash: U256 */\n  + lockArgsByteLen + 1\n  /* hash_type: u8 */\n  +\n  /* type script */\n  32\n  /* code_hash: U256 */\n  + 32\n  /* args: U256, issuer lock hash */\n  + 1\n  /* hash_type: u8 */\n  +\n  /* output_data */\n  16\n  /* data: u128, amount, little-endian */\n  ;\n}\n\nfunction byteLenOfCkbLiveCell(lockArgsByteLen = 20) {\n  // prettier-ignore\n  return 8\n  /* capacity: u64 */\n  + 32\n  /* code_hash: U256 */\n  + lockArgsByteLen + 1\n  /* hash_type: u8 */\n  ;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  helpers: true,\n  errors: true,\n  utils: true,\n  predefined: true\n};\nObject.defineProperty(exports, \"predefined\", {\n  enumerable: true,\n  get: function () {\n    return _predefined.predefined;\n  }\n});\nexports.utils = exports.errors = exports.helpers = void 0;\n\nvar _base = require(\"@ckit/base\");\n\nObject.keys(_base).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _base[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _base[key];\n    }\n  });\n});\n\nvar _wallets = require(\"./wallets\");\n\nObject.keys(_wallets).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _wallets[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _wallets[key];\n    }\n  });\n});\n\nvar _providers = require(\"./providers\");\n\nObject.keys(_providers).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _providers[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _providers[key];\n    }\n  });\n});\n\nvar _txBuilders = require(\"./tx-builders\");\n\nObject.keys(_txBuilders).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _txBuilders[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _txBuilders[key];\n    }\n  });\n});\n\nvar _helpers = _interopRequireWildcard(require(\"./helpers\"));\n\nexports.helpers = _helpers;\n\nvar _errors = _interopRequireWildcard(require(\"./errors\"));\n\nexports.errors = _errors;\n\nvar _utils = _interopRequireWildcard(require(\"./utils\"));\n\nexports.utils = _utils;\n\nvar _predefined = require(\"./predefined\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractProvider = void 0;\n\nvar _configManager = require(\"@ckb-lumos/config-manager\");\n\nvar _helpers = require(\"@ckb-lumos/helpers\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AbstractProvider {\n  constructor() {\n    _defineProperty(this, \"initialized\", false);\n\n    _defineProperty(this, \"_config\", void 0);\n  }\n\n  get config() {\n    if (!this._config) throw new Error('Cannot find the config, maybe provider is not initialied');\n    return this._config;\n  }\n\n  getScriptConfig(key) {\n    return this.config.SCRIPTS[key];\n  }\n\n  newScript(configKey, args) {\n    const scriptConfig = this.getScriptConfig(configKey);\n    if (!scriptConfig) return undefined;\n    return {\n      code_hash: scriptConfig.CODE_HASH,\n      args,\n      hash_type: scriptConfig.HASH_TYPE\n    };\n  }\n\n  getCellDep(configKey) {\n    const scriptConfig = this.getScriptConfig(configKey);\n    if (!scriptConfig) return undefined;\n    return {\n      dep_type: scriptConfig.DEP_TYPE,\n      out_point: {\n        tx_hash: scriptConfig.TX_HASH,\n        index: scriptConfig.INDEX\n      }\n    };\n  }\n\n  findCellDepByAddress(address) {\n    const script = this.parseToScript(address);\n    const scriptConfigs = Object.values(this.config.SCRIPTS);\n    if (scriptConfigs == null) return undefined;\n    const index = scriptConfigs.findIndex(scriptConfig => (scriptConfig === null || scriptConfig === void 0 ? void 0 : scriptConfig.CODE_HASH) === script.code_hash && (scriptConfig === null || scriptConfig === void 0 ? void 0 : scriptConfig.HASH_TYPE) === script.hash_type);\n    const found = scriptConfigs[index];\n    if (!found) return undefined;\n    return {\n      dep_type: found.DEP_TYPE,\n      out_point: {\n        tx_hash: found.TX_HASH,\n        index: found.INDEX\n      }\n    };\n  }\n\n  findCellDepByScript(script) {\n    return this.findCellDepByAddress(this.parseToAddress(script));\n  }\n  /**\n   * init the provider\n   * @param config if no config is provided, {@link getChainInfo} will be called to check the network type, and using the predefined config\n   */\n\n\n  async init(config) {\n    if (this.initialized) return;\n\n    if (config) {\n      const MIN_FEE_RATE = config.MIN_FEE_RATE ? config.MIN_FEE_RATE : (await this.getTxPoolInfo()).min_fee_rate;\n      this._config = { ...config,\n        MIN_FEE_RATE\n      };\n    } else {\n      const chainInfo = await this.getChainInfo();\n      const isMainnet = chainInfo.chain === 'ckb';\n      const txPoolInfo = await this.getTxPoolInfo();\n      this._config = isMainnet ? { ..._configManager.predefined.LINA,\n        MIN_FEE_RATE: txPoolInfo.min_fee_rate\n      } : { ..._configManager.predefined.AGGRON4,\n        MIN_FEE_RATE: txPoolInfo.min_fee_rate\n      };\n    }\n\n    this.initialized = true;\n  }\n\n  parseToAddress(script) {\n    return (0, _helpers.generateAddress)(script, {\n      config: this.config\n    });\n  }\n  /**\n   * parse an {@link Address} to script, throws an error when parsing failed\n   * @param address\n   */\n\n\n  parseToScript(address) {\n    return (0, _helpers.parseAddress)(address, {\n      config: this.config\n    });\n  }\n\n}\n\nexports.AbstractProvider = AbstractProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractWallet = void 0;\n\nvar _utils = require(\"@ckit/utils\");\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AbstractWallet {\n  // do **NOT** change the value manually\n  // use {@link getConnectStatus} instead of\n  // do **NOT** change the value manually\n  // use {@link getSigner} instead of\n  constructor() {\n    _defineProperty(this, \"descriptor\", {\n      name: 'Unknown Wallet',\n      features: [],\n      description: 'an unknown wallet'\n    });\n\n    _defineProperty(this, \"connectStatus\", 'disconnected');\n\n    _defineProperty(this, \"signer\", void 0);\n\n    _defineProperty(this, \"emitter\", void 0);\n\n    _defineProperty(this, \"on\", (event, listener) => {\n      this.emitter.on(event, listener);\n    });\n\n    this.emitter = new _eventemitter.default();\n  }\n\n  connect() {\n    const isDisconnected = this.connectStatus === 'disconnected';\n    (0, _utils.invariant)(isDisconnected, `[${this.descriptor.name}]: Do not reconnect the wallet`);\n    if (!isDisconnected) return;\n    this.emitConnectStatusChanged('connecting');\n    void this.tryConnect().then(signer => {\n      this.emitConnectStatusChanged('connected');\n      this.emitChangedSigner(signer);\n    }, e => {\n      this.emitError(e);\n      this.emitConnectStatusChanged('disconnected');\n    });\n  }\n\n  disconnect() {\n    this.emitConnectStatusChanged('disconnected');\n    this.emitter.removeAllListeners();\n  }\n\n  checkSupported(feature) {\n    return this.descriptor.features.includes(feature);\n  }\n\n  getConnectStatus() {\n    return this.connectStatus;\n  }\n\n  getSigner() {\n    return this.signer;\n  }\n\n  emitConnectStatusChanged(status) {\n    this.connectStatus = status;\n    this.emitter.emit('connectStatusChanged', status);\n  }\n\n  emitChangedSigner(signer) {\n    this.signer = signer;\n    this.emitter.emit('signerChanged', signer);\n  }\n\n  emitError(error = new Error(`An unknown error occurred in the ${this.descriptor.name}`)) {\n    this.emitter.emit('error', error);\n  }\n\n  setDescriptor(descriptor) {\n    const {\n      name = this.descriptor.name,\n      features = this.descriptor.features,\n      description = this.descriptor.description\n    } = descriptor;\n    this.descriptor = {\n      name,\n      features,\n      description\n    };\n  }\n\n}\n\nexports.AbstractWallet = AbstractWallet;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"debug\", {\n  enumerable: true,\n  get: function () {\n    return _debug.debug;\n  }\n});\nObject.defineProperty(exports, \"createDebugger\", {\n  enumerable: true,\n  get: function () {\n    return _debug.createDebugger;\n  }\n});\nObject.defineProperty(exports, \"invariant\", {\n  enumerable: true,\n  get: function () {\n    return _invariant.invariant;\n  }\n});\nObject.defineProperty(exports, \"unimplemented\", {\n  enumerable: true,\n  get: function () {\n    return _assertion.unimplemented;\n  }\n});\n\nvar _debug = require(\"./debug\");\n\nvar _invariant = require(\"./invariant\");\n\nvar _assertion = require(\"./assertion\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDebugger = createDebugger;\nexports.debug = void 0;\n\nvar _debug = _interopRequireDefault(require(\"debug\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createDebugger(namespace) {\n  if (!namespace.startsWith('ckit-')) namespace = 'ckit-' + namespace;\n  return (0, _debug.default)(namespace);\n}\n\nconst debug = (0, _debug.default)('ckit');\nexports.debug = debug;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"invariant\", {\n  enumerable: true,\n  get: function () {\n    return _tinyInvariant.default;\n  }\n});\n\nvar _tinyInvariant = _interopRequireDefault(require(\"tiny-invariant\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unimplemented = unimplemented;\n\nfunction unimplemented() {\n  throw new Error('unimplemented');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  AcpPwLockWallet: true,\n  NonAcpPwLockWallet: true\n};\nObject.defineProperty(exports, \"AcpPwLockWallet\", {\n  enumerable: true,\n  get: function () {\n    return _PwWallet.AcpPwLockWallet;\n  }\n});\nObject.defineProperty(exports, \"NonAcpPwLockWallet\", {\n  enumerable: true,\n  get: function () {\n    return _PwWallet.NonAcpPwLockWallet;\n  }\n});\n\nvar _PwWallet = require(\"./PwWallet\");\n\nvar _UnipassWallet = require(\"./UnipassWallet\");\n\nObject.keys(_UnipassWallet).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _UnipassWallet[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _UnipassWallet[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hashMessage = hashMessage;\nexports.InternalNonAcpPwLockSigner = exports.NonAcpPwLockWallet = exports.AcpPwLockWallet = void 0;\n\nvar _hd = require(\"@ckb-lumos/hd\");\n\nvar _base = require(\"@ckit/base\");\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _secp256k = require(\"secp256k1\");\n\nvar _utils = require(\"../utils\");\n\nvar _AbstractSingleEntrySigner = require(\"./AbstractSingleEntrySigner\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\n\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction detect() {\n  return (0, _detectProvider.default)().then(() => window.ethereum);\n}\n\nclass AbstractPwWallet extends _base.AbstractWallet {\n  constructor(ckitProvider) {\n    super();\n    this.ckitProvider = ckitProvider;\n\n    _defineProperty(this, \"listener\", addresses => {\n      if (!Array.isArray(addresses)) return;\n\n      if (addresses.length === 0) {\n        this.emitConnectStatusChanged('disconnected');\n        return;\n      }\n\n      this.emitChangedSigner(this.produceSigner());\n    });\n\n    this.setDescriptor({\n      features: this.describeFeatures(),\n      description: 'Interacting with CKB via MetaMask',\n      name: 'NonAcpPwLockWallet'\n    });\n  }\n\n  disconnect() {\n    void detect().then(ethProvider => ethProvider.removeEventListener('accountsChanged', this.listener)).then(() => super.disconnect());\n  }\n\n  async tryConnect() {\n    const ethProvider = await detect();\n    ethProvider.addListener('accountsChanged', this.listener);\n    return ethProvider.enable().then(() => this.produceSigner());\n  }\n\n}\n\nclass AbstractPwSigner extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n  constructor(ckitProvider) {\n    super({\n      provider: ckitProvider\n    });\n    this.ckitProvider = ckitProvider;\n  }\n\n  async signMessage(message) {\n    const ethereumProvider = await detect();\n    const from = ethereumProvider.selectedAddress;\n    const result = await ethereumProvider.request({\n      method: 'personal_sign',\n      params: [from, message]\n    });\n    let v = Number.parseInt(result.slice(-2), 16);\n    if (v >= 27) v -= 27;\n    return '0x' + _pwCore.Platform.eth.toString(16).padStart(2, '0') + result.slice(2, -2) + v.toString(16).padStart(2, '0');\n  }\n\n}\n\nclass AcpPwLockWallet extends AbstractPwWallet {\n  produceSigner() {\n    return new class extends AbstractPwSigner {\n      async getAddress() {\n        const config = this.ckitProvider.getScriptConfig('PW_ANYONE_CAN_PAY');\n        return this.ckitProvider.parseToAddress({\n          hash_type: config.HASH_TYPE,\n          args: (await detect()).selectedAddress,\n          code_hash: config.CODE_HASH\n        });\n      }\n\n    }(this.ckitProvider);\n  }\n\n  describeFeatures() {\n    return ['acp'];\n  }\n\n}\n\nexports.AcpPwLockWallet = AcpPwLockWallet;\n\nclass NonAcpPwLockWallet extends AbstractPwWallet {\n  produceSigner() {\n    return new class extends AbstractPwSigner {\n      async getAddress() {\n        const config = this.ckitProvider.getScriptConfig('PW_NON_ANYONE_CAN_PAY');\n        return this.ckitProvider.parseToAddress({\n          hash_type: config.HASH_TYPE,\n          args: (await detect()).selectedAddress,\n          code_hash: config.CODE_HASH\n        });\n      }\n\n    }(this.ckitProvider);\n  }\n\n  describeFeatures() {\n    return ['issue-sudt'];\n  }\n\n}\n\nexports.NonAcpPwLockWallet = NonAcpPwLockWallet;\n\nfunction hashMessage(message) {\n  // https://github.com/XuJiandong/pw-lock/blob/develop/c/pw_chain_ethereum.h#L43\n  return new _pwCore.Keccak256Hasher().update('\\x19Ethereum Signed Message:\\n32').update((0, _utils.hexToBytes)(message).buffer).digest().serializeJson();\n}\n\nvar _privateKey = /*#__PURE__*/new WeakMap();\n\nclass InternalNonAcpPwLockSigner extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n  constructor(privateKey, ckitProvider) {\n    super({\n      provider: ckitProvider\n    });\n    this.ckitProvider = ckitProvider;\n\n    _privateKey.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldSet(this, _privateKey, privateKey);\n  }\n\n  getEthAddress() {\n    const pubkey = (0, _secp256k.publicKeyCreate)((0, _utils.hexToBytes)(_classPrivateFieldGet(this, _privateKey)), false).slice(1);\n    const keccak = new _pwCore.Keccak256Hasher();\n    return '0x' + keccak.update(pubkey.buffer).digest().serializeJson().slice(-40);\n  }\n\n  async getAddress() {\n    const config = this.ckitProvider.getScriptConfig('PW_NON_ANYONE_CAN_PAY');\n    return this.ckitProvider.parseToAddress({\n      code_hash: config.CODE_HASH,\n      hash_type: config.HASH_TYPE,\n      args: this.getEthAddress()\n    });\n  }\n\n  async signMessage(message) {\n    const result = _hd.key.signRecoverable(hashMessage(message), _classPrivateFieldGet(this, _privateKey));\n\n    let v = Number.parseInt(result.slice(-2), 16);\n    if (v >= 27) v -= 27;\n\n    const platform = _pwCore.Platform.eth.toString(16).padStart(2, '0');\n\n    const sig = result.slice(2, -2);\n    return '0x' + platform + sig + v.toString(16).padStart(2, '0');\n  }\n\n}\n\nexports.InternalNonAcpPwLockSigner = InternalNonAcpPwLockSigner;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serialize = serialize;\nexports.deserialize = deserialize;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nfunction serialize(tx) {\n  const raw = tx.raw;\n  return {\n    raw: {\n      inputs: raw.inputs.map(item => ({\n        since: item.since,\n        previousOutput: {\n          index: item.previousOutput.index,\n          txHash: item.previousOutput.txHash\n        }\n      })),\n      inputCells: raw.inputCells.map(item => ({\n        lock: {\n          args: item.lock.args,\n          codeHash: item.lock.codeHash,\n          hashType: item.lock.hashType\n        },\n        type: item.type && {\n          args: item.type.args,\n          hashType: item.type.hashType,\n          codeHash: item.type.codeHash\n        },\n        data: item.getHexData(),\n        capacity: {\n          amount: item.capacity.toHexString()\n        },\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        outPoint: {\n          txHash: item.outPoint.txHash,\n          index: item.outPoint.index\n        }\n      })),\n      outputs: raw.outputs.map(item => ({\n        capacity: {\n          amount: item.capacity.toHexString()\n        },\n        data: item.getHexData(),\n        lock: {\n          args: item.lock.args,\n          hashType: item.lock.hashType,\n          codeHash: item.lock.codeHash\n        },\n        type: item.type && {\n          args: item.type.args,\n          hashType: item.type.hashType,\n          codeHash: item.type.codeHash\n        }\n      })),\n      version: raw.version,\n      cellDeps: raw.cellDeps.map(item => ({\n        depType: item.depType,\n        outPoint: {\n          index: item.outPoint.index,\n          txHash: item.outPoint.txHash\n        }\n      })),\n      headerDeps: raw.headerDeps\n    },\n    witnessArgs: tx.witnessArgs,\n    witnesses: tx.witnesses\n  };\n}\n\nfunction toScript(x) {\n  return new _pwCore.Script(x.codeHash, x.args, x.hashType === 'type' ? _pwCore.HashType.type : _pwCore.HashType.data);\n}\n\nfunction toCell(x) {\n  return new _pwCore.Cell(new _pwCore.Amount(x.capacity.amount, 0), toScript(x.lock), x.type ? toScript(x.type) : undefined, 'outPoint' in x && x.outPoint ? new _pwCore.OutPoint(x.outPoint.txHash, x.outPoint.index) : undefined, x.data);\n}\n\nfunction deserialize(tx) {\n  const raw = tx.raw;\n  return new _pwCore.Transaction(new _pwCore.RawTransaction(raw.inputCells.map(toCell), raw.outputs.map(toCell), raw.cellDeps.map(item => new _pwCore.CellDep(item.depType === 'code' ? _pwCore.DepType.code : _pwCore.DepType.depGroup, new _pwCore.OutPoint(item.outPoint.txHash, item.outPoint.index))), raw.headerDeps, raw.version), tx.witnessArgs);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnipassWallet = void 0;\n\nvar _base = require(\"@ckit/base\");\n\nvar _AbstractSingleEntrySigner = require(\"./AbstractSingleEntrySigner\");\n\nvar _UnipassAdapter = require(\"./unipass/UnipassAdapter\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass UnipassWallet extends _base.AbstractWallet {\n  constructor(provider) {\n    super();\n    this.provider = provider;\n\n    _defineProperty(this, \"adapter\", void 0);\n\n    this.setDescriptor({\n      name: 'UnipassWallet',\n      description: 'Interacting with CKB via an Email',\n      features: ['acp']\n    }); // TODO check the network and choose a right UniPass host\n\n    this.adapter = new _UnipassAdapter.UnipassRedirectAdapter({\n      host: 'https://unipass.xyz',\n      loginDataCacheKey: '__unipass__'\n    });\n  }\n\n  async tryConnect() {\n    const unipassLockArgs = await this.adapter.getLockArgs();\n    const provider = this.provider;\n\n    const getAddress = () => {\n      return Promise.resolve(provider.parseToAddress(provider.newScript('UNIPASS', unipassLockArgs)));\n    };\n\n    const signMessage = message => {\n      return Promise.resolve(this.adapter.sign(message));\n    };\n\n    return new class extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n      getAddress() {\n        return getAddress();\n      }\n\n      signMessage(message) {\n        return signMessage(message);\n      }\n\n      seal(tx) {\n        return super.seal(tx);\n      }\n\n    }({\n      provider: this.provider\n    });\n  }\n\n}\n\nexports.UnipassWallet = UnipassWallet;\n\n_defineProperty(UnipassWallet, \"UnipassRedirectAdapter\", _UnipassAdapter.UnipassRedirectAdapter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pubkeyToLockArgs = pubkeyToLockArgs;\nexports.getRetFromSearchParams = getRetFromSearchParams;\nexports.redirect = redirect;\nexports.UnipassRedirectAdapter = void 0;\n\nvar _base = require(\"@ckb-lumos/base\");\n\nvar _utils = require(\"../../utils\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction isUnipassLoginData(x) {\n  if (typeof x !== 'object' || x === null) return false;\n  return 'email' in x && 'pubkey' in x && 'recovery' in x;\n}\n\nfunction isUnipassSigData(x) {\n  if (typeof x !== 'object' || x === null) return false;\n  return 'sig' in x && 'pubkey' in x;\n}\n\nfunction pubkeyToLockArgs(pubkey) {\n  return _base.utils.ckbHash((0, _utils.hexToBytes)(pubkey).buffer).serializeJson().slice(0, 42);\n}\n\nfunction getRetFromSearchParams(check, replace = false) {\n  const searchParams = new URLSearchParams(location.search.slice(1));\n  const json = searchParams.get('unipass_ret');\n  if (!json) return undefined;\n  const res = JSON.parse(json);\n  if (!check(res.data)) return undefined;\n  if (res.code !== 200) throw new Error(res.info || 'Unknown error when connecting to UniPass');\n  searchParams.delete('unipass_ret');\n  const {\n    pathname,\n    host,\n    protocol\n  } = window.location;\n  const qs = searchParams.toString();\n  const newUrl = `${protocol}//${host}${pathname}${qs ? `?${qs}` : ''}`;\n  if (replace) window.history.replaceState({\n    path: newUrl\n  }, '', newUrl);\n  return res.data;\n}\n\nasync function redirect(href) {\n  window.location.href = href; // wait 60s to avoid error before redirect\n\n  return new Promise(resolve => setTimeout(resolve, 60 * 1000));\n}\n\nclass UnipassRedirectAdapter {\n  constructor(options) {\n    var _options$host, _options$loginDataCac;\n\n    _defineProperty(this, \"config\", void 0);\n\n    this.config = {\n      host: (_options$host = options.host) !== null && _options$host !== void 0 ? _options$host : 'https://unipass.xyz',\n      loginDataCacheKey: (_options$loginDataCac = options.loginDataCacheKey) !== null && _options$loginDataCac !== void 0 ? _options$loginDataCac : '__unipass__'\n    };\n  }\n  /**\n   * check is logged, if `unipass_ret` is found, it will clear the `unipass_ret` and save the unipass login data to cache\n   */\n\n\n  saveLoginInfo() {\n    this.getLoginDataFromUrl() && this.getLoginDataFromCache();\n  }\n\n  hasLoginInfo() {\n    return !!getRetFromSearchParams(isUnipassLoginData);\n  }\n\n  hasSigData() {\n    return !!getRetFromSearchParams(isUnipassSigData);\n  }\n  /**\n   * get unipass lock_args. If it is not retrieved from the cache or url, it will redirect to the unipass page\n   */\n\n\n  async getLockArgs() {\n    var _ref, _this$getLoginDataFro;\n\n    const loginData = (_ref = (_this$getLoginDataFro = this.getLoginDataFromCache()) !== null && _this$getLoginDataFro !== void 0 ? _this$getLoginDataFro : this.getLoginDataFromUrl()) !== null && _ref !== void 0 ? _ref : await this.redirectToLogin();\n    return pubkeyToLockArgs(loginData.pubkey);\n  }\n\n  sign(message) {\n    var _this$getSignatureFro;\n\n    return Promise.resolve((_this$getSignatureFro = this.getSignatureFromUrl()) !== null && _this$getSignatureFro !== void 0 ? _this$getSignatureFro : this.redirectToSign(message));\n  }\n\n  redirectToLogin() {\n    const loginUrl = this.generateUnipassNewUrl(this.config.host, 'login', {\n      success_url: window.location.href\n    });\n    return redirect(loginUrl);\n  }\n\n  redirectToSign(message) {\n    var _this$getLoginDataFro2;\n\n    const pubkey = (_this$getLoginDataFro2 = this.getLoginDataFromCache()) === null || _this$getLoginDataFro2 === void 0 ? void 0 : _this$getLoginDataFro2.pubkey;\n    if (!pubkey) throw new Error('UniPass should login before sign');\n    const signUrl = this.generateUnipassNewUrl(this.config.host, 'sign', {\n      success_url: window.location.href,\n      pubkey,\n      message\n    });\n    return redirect(signUrl);\n  }\n\n  saveLoginDataToCache(data) {\n    localStorage.setItem(this.config.loginDataCacheKey, JSON.stringify(data));\n  }\n\n  getLoginDataFromCache() {\n    const serialized = localStorage.getItem(this.config.loginDataCacheKey);\n    if (serialized == null) return;\n    return JSON.parse(serialized);\n  }\n\n  getLoginDataFromUrl() {\n    const loginData = getRetFromSearchParams(isUnipassLoginData, true);\n    if (!loginData) return;\n    this.saveLoginDataToCache(loginData);\n    return loginData;\n  }\n\n  getSignatureFromUrl() {\n    const signature = getRetFromSearchParams(isUnipassSigData, true);\n    if (!signature) return; // FIXME comment meaning for the 0x01\n\n    return '0x01' + signature.sig.replace('0x', '');\n  }\n\n  generateUnipassNewUrl(host, action, params) {\n    const urlObj = new URL(`${host}/${action.toLowerCase()}`);\n    Object.entries(params).forEach(([key, val]) => urlObj.searchParams.set(key, val));\n    return urlObj.href;\n  }\n\n}\n\nexports.UnipassRedirectAdapter = UnipassRedirectAdapter;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MercuryProvider = require(\"./mercury/MercuryProvider\");\n\nObject.keys(_MercuryProvider).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _MercuryProvider[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _MercuryProvider[key];\n    }\n  });\n});\n\nvar _CkitProvider = require(\"./CkitProvider\");\n\nObject.keys(_CkitProvider).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _CkitProvider[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _CkitProvider[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryClient = void 0;\n\nvar _clientJs = require(\"@open-rpc/client-js\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass MercuryClient {\n  constructor(uri) {\n    _defineProperty(this, \"client\", void 0);\n\n    const transport = new _clientJs.HTTPTransport(uri, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    });\n    this.client = new _clientJs.Client(new _clientJs.RequestManager([transport]));\n  }\n\n  get_cells(payload) {\n    const {\n      search_key,\n      order = 'asc',\n      limit = '0x3e8'\n      /*1_000*/\n      ,\n      after_cursor\n    } = payload;\n    return this.client.request({\n      method: 'get_cells',\n      params: [search_key, order, limit, after_cursor]\n    });\n  }\n\n  get_tip() {\n    return this.client.request({\n      method: 'get_tip'\n    });\n  }\n\n}\n\nexports.MercuryClient = MercuryClient;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CkbAmount = exports.Amount = void 0;\n\nvar _bignumber = require(\"bignumber.js\");\n\nvar _utils = require(\"../utils\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction BN(val) {\n  if (typeof val === 'bigint') return new _bignumber.BigNumber(String(val));\n  if (Amount.checkIsAmount(val)) return new _bignumber.BigNumber(String(val));\n  return new _bignumber.BigNumber(val);\n}\n\nclass Amount {\n  static checkIsAmount(x) {\n    if (typeof x !== 'object') return false;\n    if (x == null) return false;\n    return '__isCkitAmount__' in x && x.__isCkitAmount__;\n  }\n  /**\n   *\n   * @param value\n   * @param decimals\n   * @example\n   * ```ts\n   * Amount.from(1).eq(1) // true\n   * Amount.from(1, 8).eq(1_00000000) // true\n   * ```\n   */\n\n\n  static from(value, decimals = 0) {\n    if (decimals < 0 || !Number.isInteger(decimals)) (0, _utils.boom)('The decimal not valid');\n    if (typeof value === 'bigint') return new Amount(BN(value * 10n ** BigInt(decimals)));\n    if (!decimals) return new Amount(BN(value));\n    return new Amount(BN(value).times(BN(10).pow(decimals)));\n  }\n  /**\n   * value without decimals\n   * @private\n   */\n\n\n  constructor(bn) {\n    _defineProperty(this, \"__isCkitAmount__\", true);\n\n    _defineProperty(this, \"raw\", void 0);\n\n    if (!bn.isInteger()) throw new Error('Amount must be an integer');\n    if (bn.lt(0)) throw new Error('Amount must cannot be a negative number');\n    this.raw = new _bignumber.BigNumber(bn);\n  }\n\n  humanize(options) {\n    const {\n      decimalPlaces = Infinity,\n      separator = true,\n      decimals = 0\n    } = options ? options : {};\n    const valWithDecimals = this.raw.times(10 ** -decimals);\n    const originDecimalPlaces = valWithDecimals.decimalPlaces();\n    const rounded = valWithDecimals.decimalPlaces(Math.min(originDecimalPlaces, decimalPlaces), _bignumber.BigNumber.ROUND_FLOOR);\n    if (separator) return rounded.toFormat();\n    return rounded.toString();\n  }\n\n  new(val) {\n    return new Amount(val);\n  }\n\n  toString(base) {\n    return this.raw.toString(base);\n  }\n\n  toHex() {\n    return '0x' + this.toString(16);\n  }\n\n  eq(val) {\n    return this.raw.eq(BN(val));\n  }\n\n  gt(val) {\n    return this.raw.gt(BN(val));\n  }\n\n  gte(val) {\n    return this.raw.gte(BN(val));\n  }\n\n  lt(val) {\n    return this.raw.lt(BN(val));\n  }\n\n  lte(val) {\n    return this.raw.lte(BN(val));\n  }\n\n  plus(val) {\n    return this.new(this.raw.plus(BN(val)));\n  }\n\n  minus(val) {\n    return this.new(this.raw.minus(BN(val)));\n  }\n\n  asBN() {\n    return new _bignumber.BigNumber(this.raw);\n  }\n\n}\n\nexports.Amount = Amount;\n\nclass CkbAmount extends Amount {\n  /**\n   * @deprecated\n   */\n  static from() {\n    throw new Error('Use the Amount.from to instead of');\n  }\n\n  static fromCkb(value) {\n    return new CkbAmount(BN(value).times(10 ** 8));\n  }\n\n  static fromShannon(value) {\n    return new CkbAmount(BN(value));\n  }\n\n  new(val) {\n    return new CkbAmount(val);\n  }\n\n  humanize(options) {\n    return super.humanize({ ...options,\n      decimals: 8\n    });\n  }\n\n}\n\nexports.CkbAmount = CkbAmount;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryCellProvider = void 0;\n\nclass MercuryCellProvider {\n  constructor(mercury) {\n    this.mercury = mercury;\n  }\n\n  collector(queries) {\n    const {\n      lock,\n      type\n    } = queries;\n    let searchKey;\n\n    if (lock !== undefined) {\n      searchKey = {\n        script: lock,\n        script_type: 'lock'\n      };\n\n      if (type != undefined && type !== 'empty') {\n        searchKey.filter = {\n          script: type\n        };\n      }\n    } else {\n      if (type != undefined && type != 'empty') {\n        searchKey = {\n          script: type,\n          script_type: 'type'\n        };\n      } else {\n        throw new Error(`should specify either type or lock in queries, queries now: ${JSON.stringify(queries)}`);\n      }\n    }\n\n    const queryData = queries.data || '0x';\n    const mercury = this.mercury;\n    return {\n      collect() {\n        return {\n          async *[Symbol.asyncIterator]() {\n            const sizeLimit = 100;\n\n            for (;;) {\n              const res = await mercury.get_cells({\n                search_key: searchKey\n              });\n              const liveCells = res.objects;\n\n              for (const cell of liveCells) {\n                if (queryData === 'any' || queryData === cell.output_data) {\n                  yield {\n                    cell_output: cell.output,\n                    data: cell.output_data,\n                    out_point: cell.out_point,\n                    block_number: cell.block_number\n                  };\n                }\n              }\n\n              if (liveCells.length < sizeLimit) {\n                break;\n              }\n            }\n          }\n\n        };\n      }\n\n    };\n  }\n\n}\n\nexports.MercuryCellProvider = MercuryCellProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CkitProvider = void 0;\n\nvar _base = require(\"@ckb-lumos/base\");\n\nvar _MercuryProvider = require(\"./mercury/MercuryProvider\");\n\nclass CkitProvider extends _MercuryProvider.MercuryProvider {\n  get config() {\n    return super.config;\n  }\n\n  init(config) {\n    return super.init(config);\n  }\n\n  getScriptConfig(key) {\n    const scriptConfig = super.getScriptConfig(key);\n    if (!scriptConfig) throw new Error(`cannot find the ${key} script config, maybe init failed`);\n    return scriptConfig;\n  }\n\n  newScript(configKey, args = '0x') {\n    const script = super.newScript(configKey, args);\n    if (!script) throw new Error(`cannot find the ${configKey} script config, maybe init failed`);\n    return script;\n  }\n\n  newSudtScript(issuerAddress) {\n    const issuerLockHash = _base.utils.computeScriptHash(this.parseToScript(issuerAddress));\n\n    return this.newScript('SUDT', issuerLockHash);\n  }\n\n  getCellDep(configKey) {\n    const dep = super.getCellDep(configKey);\n    if (!dep) throw new Error(`cannot find the ${configKey} script config, maybe init failed`);\n    return dep;\n  }\n\n}\n\nexports.CkitProvider = CkitProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  AbstractTransactionBuilder: true,\n  SerializedTx: true,\n  DeserializedTx: true\n};\nObject.defineProperty(exports, \"AbstractTransactionBuilder\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.AbstractTransactionBuilder;\n  }\n});\nObject.defineProperty(exports, \"SerializedTx\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.SerializedTx;\n  }\n});\nObject.defineProperty(exports, \"DeserializedTx\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.DeserializedTx;\n  }\n});\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _AcpTransferSudtBuilder = require(\"./AcpTransferSudtBuilder\");\n\nObject.keys(_AcpTransferSudtBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _AcpTransferSudtBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _AcpTransferSudtBuilder[key];\n    }\n  });\n});\n\nvar _TransferCkbBuilder = require(\"./TransferCkbBuilder\");\n\nObject.keys(_TransferCkbBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _TransferCkbBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _TransferCkbBuilder[key];\n    }\n  });\n});\n\nvar _MintSudtBuilder = require(\"./MintSudtBuilder\");\n\nObject.keys(_MintSudtBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _MintSudtBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _MintSudtBuilder[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AcpTransferSudtBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _TransferSudtPwBuilder = require(\"./pw/TransferSudtPwBuilder\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AcpTransferSudtBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n\n    _defineProperty(this, \"builder\", void 0);\n\n    this.builder = new _TransferSudtPwBuilder.TransferSudtPwBuilder(options, provider, signer);\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const transferToSelf = this.options.recipient === signerAddress;\n    if (transferToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    return this.builder.build();\n  }\n\n}\n\nexports.AcpTransferSudtBuilder = AcpTransferSudtBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferSudtPwBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _utils = require(\"../../utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass TransferSudtPwBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, signer) {\n    super(provider);\n    this.options = options;\n    this.signer = signer;\n  }\n\n  async build() {\n    const {\n      sudt,\n      recipient,\n      amount\n    } = this.options;\n    const sender = await this.signer.getAddress();\n    const senderSudts = await this.provider.collectUdtCells(sender, sudt, amount);\n    const recipientSudt = (await this.provider.collectUdtCells(recipient, sudt, '0'))[0];\n    const cellDeps = await this.getCellDeps();\n    if (!recipientSudt) (0, _utils.boom)(`recipient ${recipient} has no cell to carry the udt`);\n    const senderInputs = senderSudts.map(point => new _pwCore.Cell(new _pwCore.Amount(point.output.capacity, 0), _pw.Pw.toPwScript(point.output.lock), point.output.type && _pw.Pw.toPwScript(point.output.type), _pw.Pw.toPwOutPoint(point.out_point), point.output_data));\n    const recipientInput = new _pwCore.Cell(new _pwCore.Amount(recipientSudt.output.capacity, 0), _pw.Pw.toPwScript(recipientSudt.output.lock), recipientSudt.output.type && _pw.Pw.toPwScript(recipientSudt.output.type), _pw.Pw.toPwOutPoint(recipientSudt.out_point), recipientSudt.output_data); // increase recipient sudt\n\n    const recipientOutput = recipientInput.clone();\n    recipientOutput.setSUDTAmount(recipientOutput.getSUDTAmount().add(new _pwCore.Amount(this.options.amount, 0)));\n    const senderOutput = senderInputs.reduce((sum, input) => {\n      sum.capacity = sum.capacity.add(input.capacity);\n      sum.setSUDTAmount(sum.getSUDTAmount().add(input.getSUDTAmount()));\n      return sum;\n    }); // decrease sender sudt\n\n    senderOutput.setSUDTAmount(senderOutput.getSUDTAmount().sub(new _pwCore.Amount(this.options.amount, 0)));\n    const tx = new _pwCore.Transaction(new _pwCore.RawTransaction([...senderInputs, recipientInput], [senderOutput, recipientOutput], cellDeps), senderInputs.map(() => this.getWitnessPlaceholder(sender))); // TODO fix fee\n    // fee from sender sudt capacity\n\n    const fee = _pwCore.Builder.calcFee(tx, Number(this.provider.config.MIN_FEE_RATE));\n\n    senderOutput.capacity = senderOutput.capacity.sub(fee); // TODO collect another cell for fee\n\n    if (senderOutput.availableFee().lte(_pwCore.Amount.ZERO)) {\n      (0, _utils.boom)('only the additional capacity of the sudt cell is supported as a fee');\n    }\n\n    return tx;\n  }\n\n}\n\nexports.TransferSudtPwBuilder = TransferSudtPwBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCellDeps = getCellDeps;\nexports.nets = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\n// TODO\n//  unipass is not open source at this stage,\n//  there is only some sample code, when unipass is open source, you need to replace these codes\nconst nets = [// {\n//   name: '本地',\n//   url: 'http://localhost:3000/'\n// },\n{\n  name: 'dev',\n  url: 'https://id.unipass.vip',\n  model: 1\n}, {\n  name: 'Aggron-Preview',\n  url: 'https://t.unipass.xyz',\n  model: 0\n}, {\n  name: 'Lina-Preview',\n  url: 'https://rc.unipass.xyz',\n  model: 0\n}, {\n  name: 'Lina',\n  url: 'https://unipass.xyz'\n}];\nexports.nets = nets;\nconst AggronCellDeps = [new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x04a1ac7fe15e454741d3c5c9a409efb9a967714ad2f530870514417978a9f655', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xd346695aa3293a84e9f985448668e9692892c959e7e83d6d8042e59c08b8cf5c', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x194a0f84de41d006a07ece07c96a8130100818599fcf0b2ecf49e512b873ed6e', '0x2'))];\nconst LinaCellDeps = [new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x5c98197999d04fbfa5eb579d0f1c85a3edac2b2f72164f2fc618b101adc71729', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xf247a0e9dfe9d559ad8486428987071b65d441568075465c2810409e889f4081', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x1196caaf9e45f1959ea3583f92914ee8306d42e27152f7068f9eeb52ac23eeae', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xf5edd047b3dbd676c9aa1e5a77ff32e3661d154c306e23bb0c13f8da9133f145', '0x2'))]; // const testCKB = {\n//   NODE_URL: 'https://testnet.ckb.dev',\n//   INDEXER_URL: 'https://testnet.ckb.dev/indexer',\n//   CHAIN_ID: ChainID.ckb_testnet,\n// };\n// const mainCKB = {\n//   NODE_URL: 'https://lina.ckb.dev',\n//   INDEXER_URL: 'https://mainnet.ckb.dev/indexer',\n//   CHAIN_ID: ChainID.ckb,\n// };\n// const LocalStorage = {\n//   set(key: string, val: unknown): void {\n//     localStorage.set(key, JSON.stringify(val));\n//   },\n//   remove(key: string): void {\n//     localStorage.removeItem(key);\n//   },\n//   getItem(key: string): unknown {\n//     const item = localStorage.getItem(key);\n//     if (!item) return null;\n//     return JSON.parse(item);\n//   },\n// };\n// export function saveEnvData(url: string): void {\n//   if (url == 'https://rc.unipass.xyz' || url == 'https://unipass.xyz') {\n//     LocalStorage.set('lina', true);\n//   } else {\n//     LocalStorage.remove('lina');\n//   }\n// }\n// export function getCkbEnv(): Url {\n//   const isLina = LocalStorage.getItem('lina');\n//   let data = testCKB;\n//   if (isLina) data = mainCKB;\n//   console.log('[cells]:', isLina, data);\n//   return data;\n// }\n\nfunction getCellDeps() {\n  // const isLina = LocalStorage.getItem('lina');\n  // for node test\n  if (typeof window === 'undefined') return [];\n  const isLina = false;\n  let data = AggronCellDeps;\n  if (isLina) data = LinaCellDeps;\n  console.log('[cells]:', isLina, data);\n  return data;\n} // export function getRpc() {\n//   const isLina = LocalStorage.getItem('lina');\n//   let url = testCKB.NODE_URL;\n//   if (isLina) url = mainCKB.NODE_URL;\n//   const rpc = new RPC(url);\n//   return rpc;\n// }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferCkbBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _TransferCkbPwBuilder = require(\"./pw/TransferCkbPwBuilder\");\n\n// just for testing case, do not use it\nclass TransferCkbBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const transferToSelf = this.options.recipients.some(item => item.recipient === signerAddress && item.capacityPolicy === 'findAcp');\n    if (transferToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    const builder = new _TransferCkbPwBuilder.TransferCkbPwBuilder(this.options, this.provider, this.signer);\n    return builder.build();\n  }\n\n}\n\nexports.TransferCkbBuilder = TransferCkbBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferCkbPwBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _builderUtils = require(\"../builder-utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass TransferCkbPwBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, signer) {\n    super(provider);\n    this.options = options;\n    this.signer = signer;\n  }\n\n  async build() {\n    const recipientCreatedCells = this.options.recipients.filter(item => item.capacityPolicy === 'createAcp').map(item => new _pwCore.Cell(new _pwCore.Amount(item.amount, 0), _pw.Pw.toPwScript(this.provider.parseToScript(item.recipient))));\n    const acpOptions = this.options.recipients.filter(item => item.capacityPolicy === 'findAcp');\n    const recipientAcpCells$ = (0, _rxjs.from)(acpOptions).pipe((0, _rxjs.mergeMap)(async item => {\n      const resolveds = await this.provider.collectCkbLiveCells(item.recipient, '0');\n      const resolved = resolveds[0];\n      if (!resolved) throw new _errors.NoAvailableCellError({\n        lock: this.provider.parseToScript(item.recipient)\n      }); // increase capacity\n\n      const cell = _pw.Pw.toPwCell(resolved);\n\n      cell.capacity = cell.capacity.add(new _pwCore.Amount(item.amount, 0));\n      return cell;\n    }), (0, _rxjs.toArray)());\n    const recipientAcpCells = await (0, _rxjs.lastValueFrom)(recipientAcpCells$);\n    const createdCapacity = recipientCreatedCells.reduce((totalCapacity, cell) => totalCapacity.add(cell.capacity), _pwCore.Amount.ZERO);\n    const injectedAcpCapacity = acpOptions.reduce((totalCapacity, item) => totalCapacity.add(new _pwCore.Amount(item.amount, 0)), _pwCore.Amount.ZERO);\n    const senderOutpoints = await this.provider.collectCkbLiveCells(await this.signer.getAddress(), injectedAcpCapacity.add(createdCapacity) // 61 ckb to ensure change cell capacity is enough\n    .add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfCkbLiveCell)()))) // additional 1 ckb for tx fee, not all 1ckb will be paid,\n    // but the real fee will be calculated based on feeRate\n    .add(new _pwCore.Amount('1')).toHexString());\n    const senderCells = senderOutpoints.map(_pw.Pw.toPwCell);\n\n    if (!senderCells.length || !senderCells[0]) {\n      throw new _errors.NoAvailableCellError({\n        lock: this.provider.parseToScript(await this.signer.getAddress())\n      });\n    } // accumulate all sender capacity into one cell\n\n\n    const senderOutput = senderCells[0];\n    senderOutput.capacity = senderCells.reduce((acc, cell) => acc.add(cell.capacity), new _pwCore.Amount('0', 0));\n    const tx = new _pwCore.Transaction(new _pwCore.RawTransaction([...senderCells, ...recipientAcpCells], [senderOutput, ...recipientAcpCells, ...recipientCreatedCells], // TODO getDeps by all script\n    this.getCellDeps()), [this.getWitnessPlaceholder(await this.signer.getAddress())]);\n    const fee = TransferCkbPwBuilder.calcFee(tx);\n    senderOutput.capacity = senderOutput.capacity.sub(createdCapacity).sub(injectedAcpCapacity).sub(fee);\n    return tx;\n  }\n\n}\n\nexports.TransferCkbPwBuilder = TransferCkbPwBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MintSudtBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _MintSudtPwBuilder = require(\"./pw/MintSudtPwBuilder\");\n\nclass MintSudtBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n  }\n\n  async buildPwTransaction() {\n    const signerAddress = await this.signer.getAddress();\n    const builder = new _MintSudtPwBuilder.NonAcpPwMintBuilder(this.options, this.provider, signerAddress);\n    return await builder.build();\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const mintToSelf = this.options.recipients.some(item => item.recipient === signerAddress && item.capacityPolicy === 'findAcp');\n    if (mintToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    return this.buildPwTransaction();\n  }\n\n}\n\nexports.MintSudtBuilder = MintSudtBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NonAcpPwMintBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _builderUtils = require(\"../builder-utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass NonAcpPwMintBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, issuerAddress) {\n    super(provider);\n    this.options = options;\n    this.issuerAddress = issuerAddress;\n  }\n\n  async build() {\n    const udtType = this.provider.newSudtScript(this.issuerAddress); // capacity provided by issuer\n\n    const createdRecipientCells = this.options.recipients.filter(item => item.capacityPolicy === 'createAcp').map(item => new _pwCore.Cell(new _pwCore.Amount(String(BigInt(item.additionalCapacity || 0)), 0).add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfSudt)()))), _pw.Pw.toPwScript(this.provider.parseToScript(item.recipient)), // recipient lock\n    _pw.Pw.toPwScript(udtType), // issued sudt type\n    undefined, new _pwCore.Amount(item.amount, 0).toUInt128LE())); // capacity provided by recipient\n\n    const resolvedFindAcpCells = this.options.recipients.filter(item => item.capacityPolicy === 'findAcp');\n    const foundRecipientCells$ = (0, _rxjs.from)(resolvedFindAcpCells).pipe( // collect the udt cell from recipients, throw an error if no udt cell is found\n    (0, _rxjs.mergeMap)(async item => {\n      const resolved = (await this.provider.collectUdtCells(item.recipient, udtType, '0'))[0];\n\n      if (!resolved) {\n        throw new _errors.NoAvailableCellError({\n          lock: this.provider.parseToScript(item.recipient),\n          type: udtType\n        });\n      }\n\n      const cell = _pw.Pw.toPwCell(resolved);\n\n      cell.capacity = cell.capacity.add(new _pwCore.Amount(item.additionalCapacity || '0', 0));\n      cell.setSUDTAmount(cell.getSUDTAmount().add(new _pwCore.Amount(item.amount, 0)));\n      return cell;\n    }, 5), (0, _rxjs.toArray)());\n    const foundRecipientCells = await (0, _rxjs.lastValueFrom)(foundRecipientCells$);\n    const createdRecipientCellsCapacity = createdRecipientCells.reduce((sum, createdCell) => sum.add(createdCell.capacity), _pwCore.Amount.ZERO);\n    const foundRecipientCellsAdditionalCapacity = resolvedFindAcpCells.reduce((sum, foundCell) => sum.add(new _pwCore.Amount(foundCell.additionalCapacity || '0', 0)), _pwCore.Amount.ZERO);\n    const neededCapacityFromIssuer = createdRecipientCellsCapacity.add(foundRecipientCellsAdditionalCapacity) // additional 61 ckb to ensure capacity is enough for change cell\n    .add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfCkbLiveCell)()))) // additional 1 ckb for tx fee, not all 1ckb will be paid,\n    // but the real fee will be calculated based on feeRate\n    .add(new _pwCore.Amount('1'));\n    const issuerOutpoints = await this.provider.collectCkbLiveCells(this.issuerAddress, neededCapacityFromIssuer.toHexString());\n    const issuerCells = issuerOutpoints.map(_pw.Pw.toPwCell); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    const issuerOutput = issuerCells[0].clone();\n    issuerOutput.capacity = issuerCells.reduce((sum, inputCell) => sum.add(inputCell.capacity), _pwCore.Amount.ZERO);\n    const rawTx = new _pwCore.RawTransaction([...issuerCells, ...foundRecipientCells], [issuerOutput, ...createdRecipientCells, ...foundRecipientCells], this.getCellDeps());\n    const tx = new _pwCore.Transaction(rawTx, [this.getWitnessPlaceholder(this.issuerAddress)]);\n\n    const fee = _pwCore.Builder.calcFee(tx, Number(this.provider.config.MIN_FEE_RATE));\n\n    issuerOutput.capacity = issuerOutput.capacity.sub(fee).sub(createdRecipientCellsCapacity).sub(foundRecipientCellsAdditionalCapacity);\n    return tx;\n  }\n\n}\n\nexports.NonAcpPwMintBuilder = NonAcpPwMintBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.predefined = void 0;\n\nvar Aggron = _interopRequireWildcard(require(\"./aggron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst AggronCkitConfig = {\n  PREFIX: 'ckt',\n  SCRIPTS: Aggron.SCRIPTS\n};\nconst predefined = {\n  Aggron: AggronCkitConfig\n};\nexports.predefined = predefined;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SCRIPTS = void 0;\n\nvar _configManager = require(\"@ckb-lumos/config-manager\");\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n// function toScriptConfig(obj: typeof CHAIN_SPECS.Aggron.pwLock): ScriptConfig {\n//   return {\n//     CODE_HASH: obj.script.codeHash,\n//     HASH_TYPE: obj.script.hashType,\n//     DEP_TYPE: obj.cellDep.depType,\n//     TX_HASH: obj.cellDep.outPoint.txHash,\n//     INDEX: obj.cellDep.outPoint.index,\n//   };\n// }\nconst SCRIPTS = {\n  SECP256K1_BLAKE160: _configManager.predefined.AGGRON4.SCRIPTS.SECP256K1_BLAKE160,\n  ANYONE_CAN_PAY: _configManager.predefined.AGGRON4.SCRIPTS.ANYONE_CAN_PAY,\n  SUDT: _configManager.predefined.AGGRON4.SCRIPTS.SUDT,\n  // TODO replace me when deployed\n  PW_ANYONE_CAN_PAY: {\n    CODE_HASH: '0x093ba9759e1c4a79dd81b0a50de83ab108ffe4eb983b05637bf1f5c1834f31eb',\n    HASH_TYPE: 'data',\n    TX_HASH: '0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41',\n    INDEX: '0x2',\n    DEP_TYPE: 'code'\n  },\n  // TODO replace me when deployed\n  PW_NON_ANYONE_CAN_PAY: {\n    CODE_HASH: '0x87366c3678f14ccbd6647386a18e05ae27c97978d4a6952fb5820cc698263835',\n    HASH_TYPE: 'data',\n    TX_HASH: '0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41',\n    INDEX: '0x3',\n    DEP_TYPE: 'code'\n  },\n  // TODO replace me when deployed\n  UNIPASS: {\n    INDEX: '0x0',\n    TX_HASH: '0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592',\n    DEP_TYPE: 'code',\n    CODE_HASH: '0x124a60cd799e1fbca664196de46b3f7f0ecb7138133dcaea4893c51df5b02be6',\n    HASH_TYPE: 'type'\n  },\n  // TODO\n  RC_LOCK: {\n    INDEX: '0x0',\n    TX_HASH: '0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592',\n    DEP_TYPE: 'code',\n    CODE_HASH: '0x124a60cd799e1fbca664196de46b3f7f0ecb7138133dcaea4893c51df5b02be6',\n    HASH_TYPE: 'type'\n  }\n};\nexports.SCRIPTS = SCRIPTS;"],"sourceRoot":""}