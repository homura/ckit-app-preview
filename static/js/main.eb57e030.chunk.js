(this["webpackJsonpckit-app"]=this["webpackJsonpckit-app"]||[]).push([[0],{1036:function(e,t,n){},1038:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(44),c=n.n(a),s=(n(526),n(1052)),o=n(258),u=n(48),l=n.n(u),d=n(125),p=n(56),f=n(51),h=n(261),b=n(174),v=n(38),j=n(62),y=n(255),m=n(516);function g(){const e=Object(r.useMemo)((()=>({ckitConfig:f.predefined.Aggron,mecuryRPC:"https://testnet.ckb.dev/indexer",ckbRPC:"https://testnet.ckb.dev/rpc",nervosExploreTxUrlPrefix:"https://explorer.nervos.org/aggron/transaction/",nervosExploreAddressUrlPrefix:"https://explorer.nervos.org/aggron/address/",nervosExploreSudtUrlPrefix:"https://explorer.nervos.org/aggron/sudt/"})),[]);return Object(b.useLocalStorage)("localConfig",e)}var x=Object(y.a)((function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],i=t[1],a=g(),c=Object(p.a)(a,1)[0];return Object(r.useEffect)((function(){var e=new f.CkitProvider(c.mecuryRPC,c.ckbRPC);e.init(Object(m.a)({},c.ckitConfig)).then((function(){return i(e)}))}),[c]),n}));class O extends f.NonAcpPwLockWallet{constructor(e){super(e),this.setDescriptor({name:"MetaMask(Non-ACP)"}),Object(v.e)(this,{connectStatus:v.f,signer:v.f})}}class w extends f.AcpPwLockWallet{constructor(e){super(e),this.setDescriptor({name:"MetaMask(ACP)"}),Object(v.e)(this,{connectStatus:v.f,signer:v.f})}}var _=n(256),P=n(257),k=n(517),S=n(511),A=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,e)).setDescriptor({name:"UniPass"}),Object(v.e)(Object(P.a)(r),{connectStatus:v.f,signer:v.f}),r}return n}(f.UnipassWallet);var C=Object(y.a)((function(){var e=x.useContainer(),t=Object(b.useLocalStorage)("currentWalletName"),n=Object(p.a)(t,2),i=n[0],a=n[1],c=Object(j.b)((function(){return[]})),s=Object(r.useState)(),o=Object(p.a)(s,2),u=o[0],l=o[1],d=Object(r.useState)(null),f=Object(p.a)(d,2),h=f[0],y=f[1],m=Object(r.useState)(!1),g=Object(p.a)(m,2),_=g[0],P=g[1],k=Object(r.useCallback)((function(e){P(e),y(null)}),[]);Object(r.useEffect)((function(){e&&Object(v.g)((function(){var t;c.splice(0),c.push(new A(e),new O(e),new w(e)),null===(t=c.find((function(e){return e.descriptor.name===i})))||void 0===t||t.connect()}))}),[e]),Object(r.useEffect)((function(){return Object(v.b)((function(){c&&c.forEach((function(e,t){e.on("connectStatusChanged",(function(t){if("disconnected"===t){var n=c.find((function(e){return"connected"===e.connectStatus}));a(n?n.descriptor.name:null)}if("connected"===t){k(!1);var r=c.find((function(t){return t.descriptor.name===e.descriptor.name}));if(!r)throw new Error("exception: wallet could not be found");a(r.descriptor.name)}})),e.on("error",(function(e){return y({error:e,index:t})}))}))}))}),[k,c]);var S=c.find((function(e){return e.descriptor.name===i}));return Object(r.useEffect)((function(){Object(v.b)((function(){var e;l(void 0);var t=c.find((function(e){return e.descriptor.name===i}));null===t||void 0===t||null===(e=t.signer)||void 0===e||e.getAddress().then(l)}))}),[i]),{wallets:c,currentWallet:S,setCurrentWalletName:a,signerAddress:u,error:h,setError:y,visible:_,setModalVisible:k}})),T=function(e){return e||"unknown"},E=n(334),M=n(1054);var N=n(4),D=function(e){var t=e.children,n=Object(r.useState)(!1),i=Object(p.a)(n,2),a=i[0],c=i[1];C.useContainer().currentWallet,(x.useContainer(),Object(M.a)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(E.unimplemented)();case 1:case"end":return e.stop()}}),e)}))))).mutateAsync;return Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new f.UnipassWallet.UnipassRedirectAdapter({host:"https://unipass.xyz"})).saveLoginInfo(),t.hasSigData(),c(!0);case 4:case"end":return e.stop()}}),e)})))()}),[]),a?Object(N.jsx)(N.Fragment,{children:t}):Object(N.jsx)(h.a,{})},H=n(101),B=n(1047),I=n(1048),L=n(1050);const U=H.a.div.withConfig({displayName:"Styled__StyledCardWrapper",componentId:"sc-1skmmyb-0"})(["width:360px;padding:24px;margin-bottom:48px;border-radius:16px;background:#fff;box-shadow:3px 3px 8px rgba(0,0,0,0.08);"]);var W=n(85),R=Object(j.a)((function(){var e=C.useContainer(),t=e.currentWallet,n=e.setModalVisible;return t?Object(N.jsxs)(W.a,{size:"small",onClick:function(){return n(!0)},children:["connected to ",t.descriptor.name]}):Object(N.jsx)(W.a,{size:"small",type:"primary",onClick:function(){return n(!0)},children:"Connect"})})),F=n(112),z=n(132),Y=n(1051),K=n(500),V=n(210),$=function(){function e(t,n){Object(_.a)(this,e),this.rawAmount=void 0,this.decimals=void 0,this.rawAmount=new V.BigNumber(t),this.decimals=n}return Object(K.a)(e,[{key:"toRawString",value:function(){return this.rawAmount.toString()}},{key:"toHexString",value:function(){return"0x"+this.rawAmount.toString(16)}},{key:"toHumanizeString",value:function(){var e=this.rawAmount.times(Math.pow(10,-this.decimals)),t=e.decimalPlaces();return e.decimalPlaces(t,V.BigNumber.ROUND_FLOOR).toFormat().toString()}}],[{key:"fromRaw",value:function(t,n){return new e(t,n)}},{key:"fromHumanize",value:function(t,n){return new e(new V.BigNumber(t).times(Math.pow(10,n)),n)}}]),e}();function X(e,t){return null!=e&&"object"===typeof e&&t in e}function G(e,t,n=t){if(!t||!n||t<=0||n<=0)throw new Error("start or end is invalid");return e.length<=t+n?e:e.slice(0,t)+"..."+e.slice(-n)}function J(){var e=C.useContainer().currentWallet,t=x.useContainer(),n=g(),r=Object(p.a)(n,1)[0];return Object(M.a)(["sendIssueTx"],function(){var n=Object(d.a)(l.a.mark((function n(r){var i,a,c,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e&&void 0!==e&&e.signer){n.next=2;break}throw new Error("exception: signer undifined");case 2:if(t){n.next=4;break}throw new Error("exception: ckitProvider undifined");case 4:return i={recipient:r.recipient,amount:r.amount},"invite"===r.operationKind?(i.capacityPolicy="createAcp",i.additionalCapacity=f.helpers.CkbAmount.fromCkb(1).toHex(),i.amount="0"):i.capacityPolicy="findAcp",a=new f.MintSudtBuilder({recipients:[i]},t,e.signer),n.next=9,a.build();case 9:return c=n.sent,n.t0=t,n.next=13,e.signer.seal(c);case 13:return n.t1=n.sent,n.next=16,n.t0.sendTransaction.call(n.t0,n.t1);case 16:return s=n.sent,n.abrupt("return",{txHash:s});case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(e){var t=e.txHash,n=r.nervosExploreTxUrlPrefix+t;Y.a.success({title:"Tx sent",content:Object(N.jsxs)("p",{children:["The transaction was sent, check it in\xa0",Object(N.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:"explorer"}),Object(N.jsxs)("details",{children:[Object(N.jsx)("summary",{children:"transaction id"}),t]})]})})},onError:function(e){var t=X(e,"message")?String(e.message):"Unknown error";Y.a.error({title:"Tx failed",content:t,width:360})}})}function q(){const e=Object(r.useMemo)((()=>[{symbol:"ckb",decimal:8}]),[]);return Object(b.useLocalStorage)("assetMeta",e)}const Z=Object(j.a)((()=>{const{signerAddress:e,setModalVisible:t}=C.useContainer(),[n]=g();if(!e)return Object(N.jsx)(F.a,{});const r=G(e,8),i=n.nervosExploreAddressUrlPrefix+e;return Object(N.jsx)("div",{style:{marginTop:"32px",marginBottom:"32px"},children:Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,offset:6,children:Object(N.jsx)("div",{style:{textAlign:"center"},children:Object(N.jsx)(z.a,{title:Object(N.jsx)(Q,{copyable:!0,children:e}),children:Object(N.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:r})})})}),Object(N.jsx)(I.a,{span:8,offset:2,children:Object(N.jsx)("div",{style:{float:"right"},children:Object(N.jsx)(W.a,{size:"small",onClick:()=>t(!0),children:"change"})})})]})})})),Q=Object(H.a)(L.a.Text).withConfig({displayName:"WalletChange__AddressTip",componentId:"sc-1w8u2wj-0"})(["color:#ffffff;"]);var ee=n(1057),te=n(1058),ne=n(1059),re=n(1055),ie=n(1056),ae=H.a.div.withConfig({displayName:"WalletList__ModalBorderWrapper",componentId:"sc-w24eo8-0"})([".ant-list-item{padding:4px 0;margin:4px 0;border-radius:8px;border:1px solid rgba(0,0,0,0);&:hover{border:1px solid rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;}}"]),ce=Object(j.a)((function(){var e=C.useContainer(),t=e.wallets,n=e.setCurrentWalletName,r=e.visible,i=e.setError,a=e.setModalVisible;return Object(N.jsx)(Y.a,{closable:!0,title:"Choose wallets",width:312,visible:r,onCancel:function(){return a(!1)},footer:null,children:Object(N.jsx)(ae,{children:Object(N.jsx)(re.b,{pagination:!1,dataSource:t,renderItem:function(e,t){return Object(N.jsx)(re.b.Item,{onClick:function(){i(null),"disconnected"===e.connectStatus&&e.connect(),"connected"===e.connectStatus&&(n(e.descriptor.name),a(!1))},children:Object(N.jsx)(se,{wallet:e,index:t})})}})})})})),se=Object(j.a)((function(e){var t=e.wallet,n=e.index,r=C.useContainer().error;return"disconnected"===t.connectStatus?Object(N.jsxs)("div",{children:[Object(N.jsxs)(ie.b,{children:[T(t.descriptor.name),Object(N.jsx)(ee.a,{})]}),r&&r.index===n&&Object(N.jsxs)(L.a.Text,{type:"danger",children:[" ",r.error.message]})]}):"connecting"===t.connectStatus?Object(N.jsx)("div",{children:Object(N.jsxs)(ie.b,{children:[T(t.descriptor.name),Object(N.jsx)(te.a,{spin:!0})]})}):Object(N.jsx)("div",{children:Object(N.jsxs)(ie.b,{children:[T(t.descriptor.name),Object(N.jsx)(ne.a,{})]})})}));const oe=()=>Object(N.jsxs)(U,{children:[Object(N.jsx)("div",{style:{marginBottom:"24px"},children:Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:12,children:Object(N.jsx)(L.a.Title,{level:3,children:" Account "})}),Object(N.jsx)(I.a,{span:12,children:Object(N.jsx)("div",{style:{float:"right",paddingTop:"5px"},children:Object(N.jsx)(R,{})})})]})}),Object(N.jsx)(ce,{}),Object(N.jsx)(Z,{})]});var ue=n(1060),le=n(1049),de=n(155),pe=n(1053);const fe=e=>{const{script:t,decimal:n}=e,r=x.useContainer(),{signerAddress:i}=C.useContainer(),a=Object(pe.a)(["queryBalance",{script:t,address:i}],(()=>{if(!r||!i)throw new Error("exception: signer should exist");return t?r.getUdtBalance(i,t):r.getCkbLiveCellsBalance(i)}),{enabled:!!i});return a.isError?Object(N.jsx)(L.a.Text,{type:"danger",children:"error"}):a.data?Object(N.jsx)(L.a.Text,{children:$.fromRaw(a.data,n).toHumanizeString()}):Object(N.jsx)(de.a,{})};var he=n(42),be=function(e){var t,n=Object(r.useState)(!1),i=Object(p.a)(n,2),a=i[0],c=i[1],s=x.useContainer(),o=C.useContainer().signerAddress,u=Object(r.useMemo)((function(){if(!s)throw new Error("excepiton: provider undefined");if(!o)throw new Error("excepiton: signerAddress undefined");return s.newSudtScript(o)}),[s,o]),l=(null===(t=e.script)||void 0===t?void 0:t.code_hash)===u.code_hash&&e.script.hash_type===u.hash_type&&e.script.args===u.args,d=l?"mint":"send";return Object(N.jsxs)("div",{children:[Object(N.jsx)(W.a,{type:"link",onClick:function(){return c(!0)},children:d}),Object(N.jsx)(ve,{visible:a,setVisible:c,assetMeta:e,isMint:l})]})},ve=function(e){var t=e.visible,n=e.setVisible,i=e.assetMeta,a=e.isMint,c=function(){var e=C.useContainer().currentWallet,t=x.useContainer(),n=g(),r=Object(p.a)(n,1)[0];return Object(M.a)(["sendTransferTx"],function(){var n=Object(d.a)(l.a.mark((function n(r){var i,a,c,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e&&void 0!==e&&e.signer){n.next=2;break}throw new Error("exception: signed undifined");case 2:if(t){n.next=4;break}throw new Error("exception: ckitProvider undifined");case 4:if(!r.script){n.next=11;break}return a=new f.AcpTransferSudtBuilder({recipient:r.recipient,sudt:r.script,amount:r.amount},t,e.signer),n.next=8,a.build();case 8:i=n.sent,n.next=15;break;case 11:return c=new f.TransferCkbBuilder({recipients:[{recipient:r.recipient,amount:r.amount,capacityPolicy:"createAcp"}]},t,e.signer),n.next=14,c.build();case 14:i=n.sent;case 15:return n.t0=t,n.next=18,e.signer.seal(i);case 18:return n.t1=n.sent,n.next=21,n.t0.sendTransaction.call(n.t0,n.t1);case 21:return s=n.sent,n.abrupt("return",{txHash:s});case 23:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(e){var t=e.txHash,n=r.nervosExploreTxUrlPrefix+t;Y.a.success({title:"Tx sent",content:Object(N.jsxs)("p",{children:["The transaction was sent, check it in\xa0",Object(N.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:"explorer"}),Object(N.jsxs)("details",{children:[Object(N.jsx)("summary",{children:"transaction id"}),t]})]})})},onError:function(e){var t=X(e,"message")?String(e.message):"Unknown error";Y.a.error({title:"Tx failed",content:t,width:360})}})}(),s=c.mutateAsync,o=c.isLoading,u=J(),h=u.mutateAsync,b=u.isLoading,v=(a?"Mint ":"Send ")+i.symbol,j=Object(r.useCallback)((function(e){a?h({recipient:e.recipient,amount:$.fromHumanize(e.amount,i.decimal).toRawString(),operationKind:"issue"}).then((function(){return n(!1)})):s({recipient:e.recipient,amount:$.fromHumanize(e.amount,i.decimal).toRawString(),script:i.script}).then((function(){return n(!1)}))}),[a,h,s,i,n]),y=a?b:o;return Object(N.jsx)(Y.a,{title:v,closable:!0,width:312,visible:t,onCancel:function(){return n(!1)},footer:null,children:Object(N.jsx)(he.d,{initialValues:{recipient:"",amount:""},validate:function(e){return{}},onSubmit:j,children:function(e){return Object(N.jsxs)(he.c,{children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:6,children:Object(N.jsx)("label",{htmlFor:"recipient",children:"recipient:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"recipient",type:"text",placeholder:"ckb address"})})]}),Object(N.jsx)(he.a,{name:"recipient",children:function(e){return Object(N.jsx)(L.a.Text,{type:"danger",children:e})}})]}),Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:6,children:Object(N.jsx)("label",{htmlFor:"amount",children:"amount:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"amount",type:"text"})})]}),Object(N.jsx)(he.a,{name:"amount",children:function(e){return Object(N.jsx)(L.a.Text,{type:"danger",children:e})}})]}),Object(N.jsx)("div",{style:{marginTop:"24px",textAlign:"center"},children:Object(N.jsx)(W.a,{loading:y,onClick:e.submitForm,children:"Submit"})})]})}})})};const je=()=>{const[e]=q(),t=[{render:(e,t)=>Object(N.jsx)("div",{children:t.symbol})},{render:(e,t)=>Object(N.jsx)(fe,{decimal:t.decimal,script:t.script})},{render:(e,t)=>Object(N.jsx)(be,{symbol:t.symbol,decimal:t.decimal,script:t.script})}];return Object(N.jsx)("div",{children:Object(N.jsx)(le.a,{size:"small",showHeader:!1,columns:t,dataSource:e,pagination:{pageSize:5}})})},ye=e=>{const{initialAssetMeta:t,buttonContent:n,...i}=e,[a,c]=Object(r.useState)(!1);return Object(N.jsxs)("div",{children:[Object(N.jsx)(W.a,{...i,onClick:()=>c(!0),children:n||""}),Object(N.jsx)(me,{visible:a,setVisible:c,initialAssetMeta:t})]})},me=e=>{const{visible:t,setVisible:n,initialAssetMeta:r}=e,[i,a]=q(),c={symbol:null!==r&&void 0!==r&&r.symbol?r.symbol:"",decimal:null!==r&&void 0!==r&&r.decimal?r.decimal:8,codeHash:null!==r&&void 0!==r&&r.codeHash?r.codeHash:"",hashType:null!==r&&void 0!==r&&r.hashType?r.hashType:"type",args:null!==r&&void 0!==r&&r.args?r.args:""};return Object(N.jsx)(Y.a,{title:"Add asset",closable:!0,width:312,visible:t,onCancel:()=>n(!1),footer:null,children:Object(N.jsx)(he.d,{initialValues:c,validate:e=>({}),onSubmit:(e,{setSubmitting:t})=>{const r={symbol:e.symbol,decimal:e.decimal,script:{code_hash:e.codeHash,hash_type:e.hashType,args:e.args}};a(i.concat(r)),t(!1),n(!1)},children:e=>Object(N.jsxs)(he.c,{children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,children:Object(N.jsx)("label",{htmlFor:"symbol",children:"symbol:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"symbol",type:"text"})})]}),Object(N.jsx)(he.a,{name:"symbol",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,children:Object(N.jsx)("label",{htmlFor:"decimal",children:"decimal:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"decimal",type:"number"})})]}),Object(N.jsx)(he.a,{name:"decimal",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,children:Object(N.jsx)("label",{htmlFor:"codeHash",children:"code hash:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"codeHash",type:"text"})})]}),Object(N.jsx)(he.a,{name:"codeHash",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,children:Object(N.jsx)("label",{htmlFor:"hashType",children:"hash type:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"hashType",type:"text"})})]}),Object(N.jsx)(he.a,{name:"hashType",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:8,children:Object(N.jsx)("label",{htmlFor:"args",children:"args:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"args",type:"text"})})]}),Object(N.jsx)(he.a,{name:"args",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsx)("div",{style:{marginTop:"24px",textAlign:"center"},children:Object(N.jsx)(W.a,{onClick:e.submitForm,children:"Submit"})})]})})})},ge=Object(j.a)((()=>{const{signerAddress:e}=C.useContainer();return Object(N.jsx)("div",{children:Object(N.jsxs)(U,{children:[Object(N.jsx)("div",{style:{marginBottom:"12px"},children:Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:12,children:Object(N.jsx)(L.a.Title,{level:3,children:" Assets "})}),Object(N.jsx)(I.a,{span:12,children:Object(N.jsx)("div",{style:{float:"right"},children:e&&Object(N.jsx)(ye,{type:"link",size:"large",icon:Object(N.jsx)(ue.a,{style:{fontSize:"24px"}})})})})]})}),Object(N.jsxs)("div",{children:[e&&Object(N.jsx)(je,{}),!e&&Object(N.jsx)(F.a,{})]})]})})}));var xe=n(124);const Oe=e=>{const{symbol:t,decimal:n,script:r}=e,[i]=g(),a=xe.utils.computeScriptHash(r);return Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:7,offset:3,children:Object(N.jsx)(L.a.Text,{children:"symbol:"})}),Object(N.jsx)(I.a,{span:14,children:Object(N.jsx)(L.a.Text,{children:t})})]}),Object(N.jsxs)(B.a,{style:{marginTop:"8px"},children:[Object(N.jsx)(I.a,{span:7,offset:3,children:Object(N.jsx)(L.a.Text,{children:"decimal:"})}),Object(N.jsx)(I.a,{span:14,children:Object(N.jsx)(L.a.Text,{children:n})})]}),Object(N.jsxs)(B.a,{style:{marginTop:"8px"},children:[Object(N.jsx)(I.a,{span:7,offset:3,children:Object(N.jsx)(L.a.Text,{children:"script hash:"})}),Object(N.jsx)(I.a,{span:14,children:Object(N.jsx)(z.a,{title:Object(N.jsx)(we,{copyable:!0,children:JSON.stringify(r)}),children:Object(N.jsx)(L.a.Link,{href:i.nervosExploreSudtUrlPrefix+a,target:"_blank",rel:"noreferrer",children:G(a,8)})})})]})]})},we=Object(H.a)(L.a.Text).withConfig({displayName:"AssetMetaDisplay__ScriptTip",componentId:"sc-z5s62p-0"})(["color:#ffffff;"]),_e=Object(j.a)((e=>{const{assetMeta:t}=e,[n,i]=Object(r.useState)(!1),[a,c]=Object(r.useState)("invite");return Object(N.jsxs)("div",{style:{marginBottom:"12px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:4,offset:4,children:Object(N.jsx)(W.a,{onClick:()=>{c("invite"),i(!0)},children:"invite"})}),Object(N.jsx)(I.a,{span:4,offset:8,children:Object(N.jsx)(W.a,{onClick:()=>{c("issue"),i(!0)},children:"issue"})})]}),Object(N.jsx)(Pe,{visible:n,setVisible:i,operationKind:a,assetDecimal:t.decimal,assetSymbol:t.symbol})]})})),Pe=e=>{const{visible:t,setVisible:n,operationKind:r,assetDecimal:i,assetSymbol:a}=e,{mutateAsync:c,isLoading:s}=J(),o="invite"===r?"Invite user":"Issue "+a,u="invite"===r?"user:":"recipient:";return Object(N.jsx)(Y.a,{title:o,closable:!0,width:312,visible:t,onCancel:()=>n(!1),footer:null,children:Object(N.jsx)(he.d,{initialValues:{recipient:"",amount:""},validate:e=>({}),onSubmit:e=>{c({recipient:e.recipient,amount:$.fromHumanize(e.amount,i).toRawString(),operationKind:r}).then((()=>n(!1)))},children:e=>Object(N.jsxs)(he.c,{children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:6,children:Object(N.jsx)("label",{htmlFor:"recipient",children:u})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"recipient",type:"text",placeholder:"ckb address"})})]}),Object(N.jsx)(he.a,{name:"recipient",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),"issue"===r&&Object(N.jsxs)("div",{style:{marginTop:"24px"},children:[Object(N.jsxs)(B.a,{children:[Object(N.jsx)(I.a,{span:6,children:Object(N.jsx)("label",{htmlFor:"amount",children:"amount:"})}),Object(N.jsx)(I.a,{span:16,children:Object(N.jsx)(he.b,{name:"amount",type:"text"})})]}),Object(N.jsx)(he.a,{name:"amount",children:e=>Object(N.jsx)(L.a.Text,{type:"danger",children:e})})]}),Object(N.jsx)("div",{style:{marginTop:"24px",textAlign:"center"},children:Object(N.jsx)(W.a,{loading:s,onClick:e.submitForm,children:"Submit"})})]})})})},ke=e=>{const{issuerAddress:t}=e,n=x.useContainer(),[i]=q(),a=Object(r.useMemo)((()=>{if(!n)throw new Error("excepiton: provider undefined");return n.newSudtScript(t)}),[n,t]),c=Object(r.useMemo)((()=>i.find((e=>{var t;return(null===(t=e.script)||void 0===t?void 0:t.hash_type)===a.hash_type&&e.script.code_hash===a.code_hash&&e.script.args===a.args}))),[a,i]),s=c?c.symbol:"?",o=c?c.decimal.toString():"?";return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Oe,{symbol:s,decimal:o,script:a}),Object(N.jsxs)("div",{style:{marginTop:"36px",textAlign:"center"},children:[!c&&Object(N.jsx)(ye,{type:"primary",buttonContent:"Add asset info",initialAssetMeta:{codeHash:a.code_hash,hashType:a.hash_type,args:a.args}}),c&&Object(N.jsx)(_e,{assetMeta:c})]})]})};var Se=Object(j.a)((function(){var e=C.useContainer(),t=e.currentWallet,n=e.signerAddress,r=null===t||void 0===t?void 0:t.checkSupported("issue-sudt");return Object(N.jsx)("div",{children:r&&Object(N.jsxs)(U,{children:[Object(N.jsx)("div",{children:Object(N.jsx)(L.a.Title,{level:3,children:" Issue "})}),!n&&Object(N.jsx)(F.a,{}),n&&Object(N.jsx)(ke,{issuerAddress:n})]})})})),Ae=function(){return Object(N.jsx)(Ce,{children:Object(N.jsxs)("div",{className:"app",children:[Object(N.jsx)(oe,{}),Object(N.jsx)(Se,{}),Object(N.jsx)(ge,{})]})})},Ce=H.a.div.withConfig({displayName:"views__BodyWrapper",componentId:"sc-x3jvth-0"})(["padding-bottom:32px;min-height:100vh;background:linear-gradient(111.44deg,#a6ded2 0%,#8c99c2 100%);display:flex;align-items:center;justify-content:center;"]),Te=(n(1036),function(){var e=new s.a;return Object(N.jsx)(o.a,{client:e,children:Object(N.jsx)(x.Provider,{children:Object(N.jsx)(C.Provider,{children:Object(N.jsx)(D,{children:Object(N.jsx)(Ae,{})})})})})});var Ee=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,1061)).then((({getCLS:t,getFID:n,getFCP:r,getLCP:i,getTTFB:a})=>{t(e),n(e),r(e),i(e),a(e)}))};c.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(Te,{})}),document.getElementById("root")),Ee()},147:function(e,t,n){"use strict";function r(e){throw new Error(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.unimplemented=function(){throw new Error("unimplemented")},t.asyncSleep=function(e){return new Promise((t=>setTimeout(t,e)))},t.randomHexString=function(e){return"0x"+[...Array(e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")},t.nonNullable=function(e){if(null==e)throw new Error("Null check failed");return e},t.bytesToHex=function(e){return`0x${[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}`},t.hexToBytes=function(e){const t=(e=e.startsWith("0x")?e.slice(2):e).match(/.{1,2}/g);if(!t)throw new Error(`cannot parse ${e} into Uint8Array`);return Uint8Array.from(t.map((e=>parseInt(e,16))))},t.boom=r,t.asserts=function(e,t){if(e)return;if("function"===typeof t)throw t();"string"===typeof t&&r(t);if(t instanceof Error)throw t;r()}},148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientSameWithSenderError=t.NoEnoughUdtError=t.NoEnoughCkbError=t.NoAvailableCellError=t.CkitError=void 0;class r extends Error{constructor(e,t){super(t),this.metadata=e}}t.CkitError=r;t.NoAvailableCellError=class extends r{constructor(e,t="Cannot find available cell"){super(e,t)}};t.NoEnoughCkbError=class extends r{constructor(e,t=`Udt is not enough, expected minimal amount: ${e.expected}, actual: ${e.actual}`){super(e,t)}};t.NoEnoughUdtError=class extends r{constructor(e,t=`Ckb is not enough, expected minimal amount: ${e.expected}, actual: ${e.actual}`){super(e,t)}};t.RecipientSameWithSenderError=class extends r{constructor(e,t="The recipient and sender cannot be the same one"){super(e,t)}}},170:function(e,t,n){"use strict";var r=n(220);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return a.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return a.deserialize}}),t.Pw=void 0;var i=n(16),a=n(920);function c(e){return{code_hash:e.codeHash,args:e.args,hash_type:e.hashType}}function s(e){return new i.Script(e.code_hash,e.args,"type"===e.hash_type?i.HashType.type:i.HashType.data)}var o={fromPwCellDep:function(e){return{dep_type:e.depType,out_point:{tx_hash:e.outPoint.txHash,index:e.outPoint.index}}},toPwCellDep:function(e){return new i.CellDep("dep_group"===e.dep_type?i.DepType.depGroup:i.DepType.code,new i.OutPoint(e.out_point.tx_hash,e.out_point.index))},fromPwCell:function(e){return{cell_output:{capacity:e.capacity.toHexString(),type:e.type?c(e.type):void 0,lock:c(e.lock)},out_point:e.outPoint?{tx_hash:e.outPoint.txHash,index:e.outPoint.index}:void 0,data:e.getData()}},toPwCell:function(e){return function(e){return"object"===r(e)&&null!=e&&"cell_output"in e}(e)?new i.Cell(new i.Amount(e.cell_output.capacity,0),s(e.cell_output.lock),e.cell_output.type?s(e.cell_output.type):void 0,e.out_point?new i.OutPoint(e.out_point.tx_hash,e.out_point.index):void 0,e.data):new i.Cell(new i.Amount(e.output.capacity,0),s(e.output.lock),e.output.type?s(e.output.type):void 0,e.out_point?new i.OutPoint(e.out_point.tx_hash,e.out_point.index):void 0,e.output_data)},toPwScript:s,fromPwScript:c,toPwOutPoint:function(e){return new i.OutPoint(e.tx_hash,e.index)}};t.Pw=o},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ScriptManager",{enumerable:!0,get:function(){return r.ScriptManager}}),Object.defineProperty(t,"AbstractProvider",{enumerable:!0,get:function(){return i.AbstractProvider}}),Object.defineProperty(t,"ProviderConfig",{enumerable:!0,get:function(){return i.ProviderConfig}}),Object.defineProperty(t,"InitOptions",{enumerable:!0,get:function(){return i.InitOptions}}),Object.defineProperty(t,"AbstractWallet",{enumerable:!0,get:function(){return a.AbstractWallet}});var r=n(527),i=n(528),a=n(542)},240:function(e,t,n){"use strict";var r=n(88),i=n(89);Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTransactionBuilder=void 0;var a=n(170);var c,s,o,u=function(){function e(){r(this,e)}return i(e,[{key:"serialize",value:function(t){return e.serde.serialize(t)}}]),e}();t.AbstractTransactionBuilder=u,o={serialize:function(e){return(0,a.serialize)(e)},deserialize:function(e){return(0,a.deserialize)(e)}},(s="serde")in(c=u)?Object.defineProperty(c,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):c[s]=o},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractPwSenderBuilder=void 0;var r=n(16),i=n(170),a=n(147),c=n(949);class s extends r.Builder{constructor(e){super(Number(e.config.MIN_FEE_RATE)),this.provider=e}getCellDeps(e){return[i.Pw.toPwCellDep(this.provider.getCellDep("SUDT")),i.Pw.toPwCellDep(this.provider.getCellDep("ANYONE_CAN_PAY")),i.Pw.toPwCellDep(this.provider.getCellDep("PW_NON_ANYONE_CAN_PAY")),i.Pw.toPwCellDep(this.provider.getCellDep("PW_ANYONE_CAN_PAY")),i.Pw.toPwCellDep(this.provider.getCellDep("SECP256K1_BLAKE160")),...(0,c.getCellDeps)()]}getWitnessPlaceholder(e){const t=(e,t)=>{const n=this.provider.parseToScript(t),r=this.provider.getScriptConfig(e);return r.CODE_HASH===n.code_hash&&r.HASH_TYPE===n.hash_type};return t("SECP256K1_BLAKE160",e)?{lock:"0x"+"0".repeat(130),input_type:"",output_type:""}:t("PW_NON_ANYONE_CAN_PAY",e)||t("PW_NON_ANYONE_CAN_PAY",e)?{lock:"0x"+"0".repeat(132),input_type:"",output_type:""}:t("ANYONE_CAN_PAY",e)?{lock:"0x"+"0".repeat(130),input_type:"",output_type:""}:t("UNIPASS",e)?{lock:"0x"+"0".repeat(2082),input_type:"",output_type:""}:void(0,a.boom)(`Unsupported lock ${e}`)}}t.AbstractPwSenderBuilder=s},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"debug",{enumerable:!0,get:function(){return r.debug}}),Object.defineProperty(t,"createDebugger",{enumerable:!0,get:function(){return r.createDebugger}}),Object.defineProperty(t,"invariant",{enumerable:!0,get:function(){return i.invariant}}),Object.defineProperty(t,"unimplemented",{enumerable:!0,get:function(){return a.unimplemented}});var r=n(543),i=n(547),a=n(549)},479:function(e,t,n){"use strict";var r=n(48),i=n(919),a=n(114),c=n(88),s=n(89),o=n(115),u=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractSingleEntrySigner=void 0;var l=n(16),d=n(170);var p=function(e){o(n,e);var t=u(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l.Blake2bHasher;return c(this,n),(i=t.call(this,a)).rawSigner=e,i.provider=r,i}return s(n,[{key:"signMessages",value:function(){var e=a(r.mark((function e(t){var n,a,c,s,o,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.t0=d.Pw,e.t1=this.provider,e.next=5,this.rawSigner.getAddress();case 5:e.t2=e.sent,e.t3=e.t1.parseToScript.call(e.t1,e.t2),a=e.t0.toPwScript.call(e.t0,e.t3),c=i(t),e.prev=9,c.s();case 11:if((s=c.n()).done){e.next=23;break}if(!(o=s.value).lock.sameWith(a)){e.next=20;break}return e.next=16,this.rawSigner.signMessage(o.message);case 16:u=e.sent,n.push(u),e.next=21;break;case 20:n.push("0x");case 21:e.next=11;break;case 23:e.next=28;break;case 25:e.prev=25,e.t4=e.catch(9),c.e(e.t4);case 28:return e.prev=28,c.f(),e.finish(28);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this,[[9,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(l.Signer),f=function(){function e(t){var n,r,i,a;c(this,e),a=void 0,(i="adapter")in(r=this)?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a;var s=null!==(n=t.hasher)&&void 0!==n?n:new l.Blake2bHasher;this.adapter=new p(this,t.provider,s)}return s(e,[{key:"seal",value:function(){var e=a(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.adapter.sign(t);case 2:return n=e.sent,e.abrupt("return",l.transformers.TransformTransaction(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.AbstractSingleEntrySigner=f},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MercuryProvider=void 0;var r=n(928),i=n(217),a=n(929),c=n(16),s=n(333),o=n(148),u=n(482),l=n(147),d=n(944);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends i.AbstractProvider{constructor(e="http://127.0.0.1:8116",t="http://127.0.0.1:8114"){super(),p(this,"mercury",void 0),p(this,"rpc",void 0),e instanceof a.MercuryClient?this.mercury=e:this.mercury=new a.MercuryClient(e),t instanceof r.RPC?this.rpc=t:this.rpc=new r.RPC(t)}async collectCkbLiveCells(e,t){const n=this.parseToScript(e),r={script:n,script_type:"lock",filter:{output_data_len_range:["0x0","0x1"]}},i=(0,s.from)(this.mercury.get_cells({search_key:r})).pipe((0,s.expand)((e=>this.mercury.get_cells({search_key:r,after_cursor:e.last_cursor})),1),(0,s.takeWhile)((e=>e.objects.length>0)),(0,s.concatMap)((e=>e.objects)),(0,s.filter)((e=>null==e.output.type)),(0,s.scan)(((e,t)=>({cells:e.cells.concat(t),amount:e.amount+BigInt(t.output.capacity)})),{amount:0n,cells:[]}),(0,s.takeWhile)((e=>e.amount<BigInt(t)),!0)),a=await(0,s.lastValueFrom)(i,{defaultValue:{amount:0n,cells:[]}});if(a.amount<BigInt(t))throw new o.NoEnoughCkbError({lock:n,expected:t,actual:u.Amount.from(a.amount).toHex()});return a.cells}async getCkbLiveCellsBalance(e){const t={script:this.parseToScript(e),script_type:"lock",filter:{output_data_len_range:["0x0","0x1"]}},n=(0,s.from)(this.mercury.get_cells({search_key:t})).pipe((0,s.expand)((e=>this.mercury.get_cells({search_key:t,after_cursor:e.last_cursor})),1),(0,s.takeWhile)((e=>e.objects.length>0)),(0,s.concatMap)((e=>e.objects)),(0,s.filter)((e=>null==e.output.type)),(0,s.reduce)(((e,t)=>e+BigInt(t.output.capacity)),0n)),r=await(0,s.lastValueFrom)(n,{defaultValue:"0x0"});return String(r)}getTxPoolInfo(){return this.rpc.tx_pool_info()}getChainInfo(){return this.rpc.get_blockchain_info()}sendTransaction(e){return this.rpc.send_transaction(e)}async collectUdtCells(e,t,n){const r=this.parseToScript(e),i={script:r,filter:{script:t},script_type:"lock"},a=(0,s.from)(this.mercury.get_cells({search_key:i})).pipe((0,s.expand)((e=>this.mercury.get_cells({search_key:i,after_cursor:e.last_cursor})),1),(0,s.takeWhile)((e=>e.objects.length>0)),(0,s.concatMap)((e=>e.objects)),(0,s.scan)(((e,t)=>({cells:e.cells.concat(t),amount:e.amount+BigInt((0,c.toBigUInt128LE)(t.output_data.slice(0,34)))})),{amount:0n,cells:[]}),(0,s.takeWhile)((e=>e.amount<BigInt(n)),!0)),l=await(0,s.lastValueFrom)(a,{defaultValue:{amount:0n,cells:[]}});if(l.amount<BigInt(n))throw new o.NoEnoughUdtError({lock:r,expected:n,actual:u.Amount.from(l.amount).toHex()});return l.cells}getUdtBalance(e,t){const n={script:this.parseToScript(e),filter:{script:t},script_type:"lock"},r=(0,s.from)(this.mercury.get_cells({search_key:n})).pipe((0,s.expand)((e=>this.mercury.get_cells({search_key:n,after_cursor:e.last_cursor})),1),(0,s.takeWhile)((e=>e.objects.length>0)),(0,s.concatMap)((e=>e.objects)),(0,s.reduce)(((e,t)=>e+BigInt((0,c.toBigUInt128LE)(t.output_data.slice(0,34)))),0n));return(0,s.lastValueFrom)(r,{defaultValue:0n}).then((e=>String(e)))}async waitForTransactionCommitted(e,t={}){const{pollIntervalMs:n=1e3,timeoutMs:r=6e4}=t,i=Date.now();let a=null;for(;Date.now()-i<=r;){var c;const t=await this.rpc.get_transaction(e);if("committed"===(null===t||void 0===t||null===(c=t.tx_status)||void 0===c?void 0:c.status)){a=t.transaction;break}await(0,l.asyncSleep)(n)}const s=Number(await this.rpc.get_tip_block_number());for(;Date.now()-i<=r;){const e=await this.mercury.get_tip();if(Number(e.block_number)>=s)break;await(0,l.asyncSleep)(n)}return a}asIndexerCellProvider(){return new d.MercuryCellProvider(this.mercury)}}t.MercuryProvider=f},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(941);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}))},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.byteLenOfSudt=function(e=20){return 40+e+1+32+32+1+16},t.byteLenOfCkbLiveCell=function(e=20){return 40+e+1}},51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={helpers:!0,errors:!0,utils:!0,predefined:!0};Object.defineProperty(t,"predefined",{enumerable:!0,get:function(){return d.predefined}}),t.utils=t.errors=t.helpers=void 0;var i=n(217);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=n(550);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=n(927);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=n(946);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=f(n(482));t.helpers=o;var u=f(n(148));t.errors=u;var l=f(n(147));t.utils=l;var d=n(958);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(r,a,c):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}},526:function(e,t,n){},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractProvider=void 0;var r=n(283),i=n(530);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.AbstractProvider=class{constructor(){a(this,"initialized",!1),a(this,"_config",void 0)}get config(){if(!this._config)throw new Error("Cannot find the config, maybe provider is not initialied");return this._config}getScriptConfig(e){return this.config.SCRIPTS[e]}newScript(e,t){const n=this.getScriptConfig(e);if(n)return{code_hash:n.CODE_HASH,args:t,hash_type:n.HASH_TYPE}}getCellDep(e){const t=this.getScriptConfig(e);if(t)return{dep_type:t.DEP_TYPE,out_point:{tx_hash:t.TX_HASH,index:t.INDEX}}}findCellDepByAddress(e){const t=this.parseToScript(e),n=Object.values(this.config.SCRIPTS);if(null==n)return;const r=n.findIndex((e=>(null===e||void 0===e?void 0:e.CODE_HASH)===t.code_hash&&(null===e||void 0===e?void 0:e.HASH_TYPE)===t.hash_type)),i=n[r];return i?{dep_type:i.DEP_TYPE,out_point:{tx_hash:i.TX_HASH,index:i.INDEX}}:void 0}findCellDepByScript(e){return this.findCellDepByAddress(this.parseToAddress(e))}async init(e){if(!this.initialized){if(e){const t=e.MIN_FEE_RATE?e.MIN_FEE_RATE:(await this.getTxPoolInfo()).min_fee_rate;this._config={...e,MIN_FEE_RATE:t}}else{const e="ckb"===(await this.getChainInfo()).chain,t=await this.getTxPoolInfo();this._config=e?{...r.predefined.LINA,MIN_FEE_RATE:t.min_fee_rate}:{...r.predefined.AGGRON4,MIN_FEE_RATE:t.min_fee_rate}}this.initialized=!0}}parseToAddress(e){return(0,i.generateAddress)(e,{config:this.config})}parseToScript(e){return(0,i.parseAddress)(e,{config:this.config})}}},542:function(e,t,n){"use strict";var r=n(88),i=n(89);Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractWallet=void 0;var a,c=n(334),s=(a=n(218))&&a.__esModule?a:{default:a};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){var t=this;r(this,e),o(this,"descriptor",{name:"Unknown Wallet",features:[],description:"an unknown wallet"}),o(this,"connectStatus","disconnected"),o(this,"signer",void 0),o(this,"emitter",void 0),o(this,"on",(function(e,n){t.emitter.on(e,n)})),this.emitter=new s.default}return i(e,[{key:"connect",value:function(){var e=this,t="disconnected"===this.connectStatus;(0,c.invariant)(t,"[".concat(this.descriptor.name,"]: Do not reconnect the wallet")),t&&(this.emitConnectStatusChanged("connecting"),this.tryConnect().then((function(t){e.emitConnectStatusChanged("connected"),e.emitChangedSigner(t)}),(function(t){e.emitError(t),e.emitConnectStatusChanged("disconnected")})))}},{key:"disconnect",value:function(){this.emitConnectStatusChanged("disconnected"),this.emitter.removeAllListeners()}},{key:"checkSupported",value:function(e){return this.descriptor.features.includes(e)}},{key:"getConnectStatus",value:function(){return this.connectStatus}},{key:"getSigner",value:function(){return this.signer}},{key:"emitConnectStatusChanged",value:function(e){this.connectStatus=e,this.emitter.emit("connectStatusChanged",e)}},{key:"emitChangedSigner",value:function(e){this.signer=e,this.emitter.emit("signerChanged",e)}},{key:"emitError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error("An unknown error occurred in the ".concat(this.descriptor.name));this.emitter.emit("error",e)}},{key:"setDescriptor",value:function(e){var t=e.name,n=void 0===t?this.descriptor.name:t,r=e.features,i=void 0===r?this.descriptor.features:r,a=e.description,c=void 0===a?this.descriptor.description:a;this.descriptor={name:n,features:i,description:c}}}]),e}();t.AbstractWallet=u},543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDebugger=function(e){e.startsWith("ckit-")||(e="ckit-"+e);return(0,i.default)(e)},t.debug=void 0;var r,i=(r=n(544))&&r.__esModule?r:{default:r};var a=(0,i.default)("ckit");t.debug=a},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invariant",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(548))&&r.__esModule?r:{default:r}},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unimplemented=function(){throw new Error("unimplemented")}},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={AcpPwLockWallet:!0,NonAcpPwLockWallet:!0};Object.defineProperty(t,"AcpPwLockWallet",{enumerable:!0,get:function(){return i.AcpPwLockWallet}}),Object.defineProperty(t,"NonAcpPwLockWallet",{enumerable:!0,get:function(){return i.NonAcpPwLockWallet}});var i=n(551),a=n(921);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}))},551:function(e,t,n){"use strict";var r=n(48),i=n(114),a=n(88),c=n(89),s=n(219),o=n(287),u=n(188),l=n(115),d=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.hashMessage=A,t.InternalNonAcpPwLockSigner=t.NonAcpPwLockWallet=t.AcpPwLockWallet=void 0;var p,f=n(556),h=n(217),b=n(16),v=(p=n(918))&&p.__esModule?p:{default:p},j=n(318),y=n(147),m=n(479);function g(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,O(e,t,"get"))}function x(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,O(e,t,"set"),n),n}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function w(){return(0,v.default)().then((function(){return window.ethereum}))}var _=function(e){l(n,e);var t=d(n);function n(e){var r;return a(this,n),(r=t.call(this)).ckitProvider=e,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(s(r),"listener",(function(e){Array.isArray(e)&&(0!==e.length?r.emitChangedSigner(r.produceSigner()):r.emitConnectStatusChanged("disconnected"))})),r.setDescriptor({features:r.describeFeatures(),description:"Interacting with CKB via MetaMask",name:"NonAcpPwLockWallet"}),r}return c(n,[{key:"disconnect",value:function(){var e=this;w().then((function(t){return t.removeEventListener("accountsChanged",e.listener)})).then((function(){return o(u(n.prototype),"disconnect",e).call(e)}))}},{key:"tryConnect",value:function(){var e=i(r.mark((function e(){var t,n=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return(t=e.sent).addListener("accountsChanged",this.listener),e.abrupt("return",t.enable().then((function(){return n.produceSigner()})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(h.AbstractWallet),P=function(e){l(n,e);var t=d(n);function n(e){var r;return a(this,n),(r=t.call(this,{provider:e})).ckitProvider=e,r}return c(n,[{key:"signMessage",value:function(){var e=i(r.mark((function e(t){var n,i,a,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,i=n.selectedAddress,e.next=6,n.request({method:"personal_sign",params:[i,t]});case 6:return a=e.sent,(c=Number.parseInt(a.slice(-2),16))>=27&&(c-=27),e.abrupt("return","0x"+b.Platform.eth.toString(16).padStart(2,"0")+a.slice(2,-2)+c.toString(16).padStart(2,"0"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m.AbstractSingleEntrySigner),k=function(e){l(n,e);var t=d(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"produceSigner",value:function(){return new(function(e){l(n,e);var t=d(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"getAddress",value:function(){var e=i(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ckitProvider.getScriptConfig("PW_ANYONE_CAN_PAY"),e.t0=this.ckitProvider,e.t1=t.HASH_TYPE,e.next=5,w();case 5:return e.t2=e.sent.selectedAddress,e.t3=t.CODE_HASH,e.t4={hash_type:e.t1,args:e.t2,code_hash:e.t3},e.abrupt("return",e.t0.parseToAddress.call(e.t0,e.t4));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P))(this.ckitProvider)}},{key:"describeFeatures",value:function(){return["acp"]}}]),n}(_);t.AcpPwLockWallet=k;var S=function(e){l(n,e);var t=d(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"produceSigner",value:function(){return new(function(e){l(n,e);var t=d(n);function n(){return a(this,n),t.apply(this,arguments)}return c(n,[{key:"getAddress",value:function(){var e=i(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ckitProvider.getScriptConfig("PW_NON_ANYONE_CAN_PAY"),e.t0=this.ckitProvider,e.t1=t.HASH_TYPE,e.next=5,w();case 5:return e.t2=e.sent.selectedAddress,e.t3=t.CODE_HASH,e.t4={hash_type:e.t1,args:e.t2,code_hash:e.t3},e.abrupt("return",e.t0.parseToAddress.call(e.t0,e.t4));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P))(this.ckitProvider)}},{key:"describeFeatures",value:function(){return["issue-sudt"]}}]),n}(_);function A(e){return(new b.Keccak256Hasher).update("\x19Ethereum Signed Message:\n32").update((0,y.hexToBytes)(e).buffer).digest().serializeJson()}t.NonAcpPwLockWallet=S;var C=new WeakMap,T=function(e){l(n,e);var t=d(n);function n(e,r){var i;return a(this,n),(i=t.call(this,{provider:r})).ckitProvider=r,C.set(s(i),{writable:!0,value:void 0}),x(s(i),C,e),i}return c(n,[{key:"getEthAddress",value:function(){var e=(0,j.publicKeyCreate)((0,y.hexToBytes)(g(this,C)),!1).slice(1);return"0x"+(new b.Keccak256Hasher).update(e.buffer).digest().serializeJson().slice(-40)}},{key:"getAddress",value:function(){var e=i(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ckitProvider.getScriptConfig("PW_NON_ANYONE_CAN_PAY"),e.abrupt("return",this.ckitProvider.parseToAddress({code_hash:t.CODE_HASH,hash_type:t.HASH_TYPE,args:this.getEthAddress()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=i(r.mark((function e(t){var n,i,a,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.key.signRecoverable(A(t),g(this,C)),(i=Number.parseInt(n.slice(-2),16))>=27&&(i-=27),a=b.Platform.eth.toString(16).padStart(2,"0"),c=n.slice(2,-2),e.abrupt("return","0x"+a+c+i.toString(16).padStart(2,"0"));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m.AbstractSingleEntrySigner);t.InternalNonAcpPwLockSigner=T},559:function(e,t){},561:function(e,t){},570:function(e,t){},572:function(e,t){},598:function(e,t){},599:function(e,t){},604:function(e,t){},606:function(e,t){},613:function(e,t){},632:function(e,t){},660:function(e,t){},725:function(e,t){},836:function(e,t){},920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=function(e){var t=e.raw;return{raw:{inputs:t.inputs.map((function(e){return{since:e.since,previousOutput:{index:e.previousOutput.index,txHash:e.previousOutput.txHash}}})),inputCells:t.inputCells.map((function(e){return{lock:{args:e.lock.args,codeHash:e.lock.codeHash,hashType:e.lock.hashType},type:e.type&&{args:e.type.args,hashType:e.type.hashType,codeHash:e.type.codeHash},data:e.getHexData(),capacity:{amount:e.capacity.toHexString()},outPoint:{txHash:e.outPoint.txHash,index:e.outPoint.index}}})),outputs:t.outputs.map((function(e){return{capacity:{amount:e.capacity.toHexString()},data:e.getHexData(),lock:{args:e.lock.args,hashType:e.lock.hashType,codeHash:e.lock.codeHash},type:e.type&&{args:e.type.args,hashType:e.type.hashType,codeHash:e.type.codeHash}}})),version:t.version,cellDeps:t.cellDeps.map((function(e){return{depType:e.depType,outPoint:{index:e.outPoint.index,txHash:e.outPoint.txHash}}})),headerDeps:t.headerDeps},witnessArgs:e.witnessArgs,witnesses:e.witnesses}},t.deserialize=function(e){var t=e.raw;return new r.Transaction(new r.RawTransaction(t.inputCells.map(a),t.outputs.map(a),t.cellDeps.map((function(e){return new r.CellDep("code"===e.depType?r.DepType.code:r.DepType.depGroup,new r.OutPoint(e.outPoint.txHash,e.outPoint.index))})),t.headerDeps,t.version),e.witnessArgs)};var r=n(16);function i(e){return new r.Script(e.codeHash,e.args,"type"===e.hashType?r.HashType.type:r.HashType.data)}function a(e){return new r.Cell(new r.Amount(e.capacity.amount,0),i(e.lock),e.type?i(e.type):void 0,"outPoint"in e&&e.outPoint?new r.OutPoint(e.outPoint.txHash,e.outPoint.index):void 0,e.data)}},921:function(e,t,n){"use strict";var r=n(48),i=n(287),a=n(188),c=n(114),s=n(88),o=n(89),u=n(219),l=n(115),d=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.UnipassWallet=void 0;var p=n(217),f=n(479),h=n(922);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){l(n,e);var t=d(n);function n(e){var r;return s(this,n),(r=t.call(this)).provider=e,b(u(r),"adapter",void 0),r.setDescriptor({name:"UnipassWallet",description:"Interacting with CKB via an Email",features:["acp"]}),r.adapter=new h.UnipassRedirectAdapter({host:"https://unipass.xyz",loginDataCacheKey:"__unipass__"}),r}return o(n,[{key:"tryConnect",value:function(){var e=c(r.mark((function e(){var t,n,c,u,p=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.adapter.getLockArgs();case 2:return t=e.sent,n=this.provider,c=function(){return Promise.resolve(n.parseToAddress(n.newScript("UNIPASS",t)))},u=function(e){return Promise.resolve(p.adapter.sign(e))},e.abrupt("return",new(function(e){l(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getAddress",value:function(){return c()}},{key:"signMessage",value:function(e){return u(e)}},{key:"seal",value:function(e){return i(a(n.prototype),"seal",this).call(this,e)}}]),n}(f.AbstractSingleEntrySigner))({provider:this.provider}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(p.AbstractWallet);t.UnipassWallet=v,b(v,"UnipassRedirectAdapter",h.UnipassRedirectAdapter)},922:function(e,t,n){"use strict";var r=n(923),i=n(48),a=n(88),c=n(89),s=n(114),o=n(220);Object.defineProperty(t,"__esModule",{value:!0}),t.pubkeyToLockArgs=f,t.getRetFromSearchParams=h,t.redirect=b,t.UnipassRedirectAdapter=void 0;var u=n(124),l=n(147);function d(e){return"object"===o(e)&&null!==e&&("email"in e&&"pubkey"in e&&"recovery"in e)}function p(e){return"object"===o(e)&&null!==e&&("sig"in e&&"pubkey"in e)}function f(e){return u.utils.ckbHash((0,l.hexToBytes)(e).buffer).serializeJson().slice(0,42)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new URLSearchParams(location.search.slice(1)),r=n.get("unipass_ret");if(r){var i=JSON.parse(r);if(e(i.data)){if(200!==i.code)throw new Error(i.info||"Unknown error when connecting to UniPass");n.delete("unipass_ret");var a=window.location,c=a.pathname,s=a.host,o=a.protocol,u=n.toString(),l="".concat(o,"//").concat(s).concat(c).concat(u?"?".concat(u):"");return t&&window.history.replaceState({path:l},"",l),i.data}}}function b(e){return v.apply(this,arguments)}function v(){return(v=s(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.href=t,e.abrupt("return",new Promise((function(e){return setTimeout(e,6e4)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){function e(t){var n,r,i,c,s;a(this,e),s=void 0,(c="config")in(i=this)?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,this.config={host:null!==(n=t.host)&&void 0!==n?n:"https://unipass.xyz",loginDataCacheKey:null!==(r=t.loginDataCacheKey)&&void 0!==r?r:"__unipass__"}}return c(e,[{key:"saveLoginInfo",value:function(){this.getLoginDataFromUrl()&&this.getLoginDataFromCache()}},{key:"hasSigData",value:function(){return!!h(p)}},{key:"getLockArgs",value:function(){var e=s(i.mark((function e(){var t,n,r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=null!==(n=this.getLoginDataFromCache())&&void 0!==n?n:this.getLoginDataFromUrl())||void 0===t){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,this.redirectToLogin();case 6:e.t0=e.sent;case 7:return r=e.t0,e.abrupt("return",f(r.pubkey));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t;return Promise.resolve(null!==(t=this.getSignatureFromUrl())&&void 0!==t?t:this.redirectToSign(e))}},{key:"redirectToLogin",value:function(){return b(this.generateUnipassNewUrl(this.config.host,"login",{success_url:window.location.href}))}},{key:"redirectToSign",value:function(e){var t,n=null===(t=this.getLoginDataFromCache())||void 0===t?void 0:t.pubkey;if(!n)throw new Error("UniPass should login before sign");return b(this.generateUnipassNewUrl(this.config.host,"sign",{success_url:window.location.href,pubkey:n,message:e}))}},{key:"saveLoginDataToCache",value:function(e){localStorage.setItem(this.config.loginDataCacheKey,JSON.stringify(e))}},{key:"getLoginDataFromCache",value:function(){var e=localStorage.getItem(this.config.loginDataCacheKey);if(null!=e)return JSON.parse(e)}},{key:"getLoginDataFromUrl",value:function(){var e=h(d,!0);if(e)return this.saveLoginDataToCache(e),e}},{key:"getSignatureFromUrl",value:function(){var e=h(p,!0);if(e)return"0x01"+e.sig.replace("0x","")}},{key:"generateUnipassNewUrl",value:function(e,t,n){var i=new URL("".concat(e,"/").concat(t.toLowerCase()));return Object.entries(n).forEach((function(e){var t=r(e,2),n=t[0],a=t[1];return i.searchParams.set(n,a)})),i.href}}]),e}();t.UnipassRedirectAdapter=j},927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(481);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(945);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MercuryClient=void 0;var r=n(930);t.MercuryClient=class{constructor(e){var t,n,i;i=void 0,(n="client")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i;const a=new r.HTTPTransport(e,{headers:{"content-type":"application/json"}});this.client=new r.Client(new r.RequestManager([a]))}get_cells(e){const{search_key:t,order:n="asc",limit:r="0x3e8",after_cursor:i}=e;return this.client.request({method:"get_cells",params:[t,n,r,i]})}get_tip(){return this.client.request({method:"get_tip"})}}},941:function(e,t,n){"use strict";var r=n(942),i=n(287),a=n(188),c=n(115),s=n(116),o=n(220),u=n(88),l=n(89);Object.defineProperty(t,"__esModule",{value:!0}),t.CkbAmount=t.Amount=void 0;var d=n(210),p=n(147);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return"bigint"===typeof e||b.checkIsAmount(e)?new d.BigNumber(String(e)):new d.BigNumber(e)}var b=function(){function e(t){if(u(this,e),f(this,"__isCkitAmount__",!0),f(this,"raw",void 0),!t.isInteger())throw new Error("Amount must be an integer");if(t.lt(0))throw new Error("Amount must cannot be a negative number");this.raw=new d.BigNumber(t)}return l(e,[{key:"humanize",value:function(e){var t=e||{},n=t.decimalPlaces,r=void 0===n?1/0:n,i=t.separator,a=void 0===i||i,c=t.decimals,s=void 0===c?0:c,o=this.raw.times(Math.pow(10,-s)),u=o.decimalPlaces(),l=o.decimalPlaces(Math.min(u,r),d.BigNumber.ROUND_FLOOR);return a?l.toFormat():l.toString()}},{key:"new",value:function(t){return new e(t)}},{key:"toString",value:function(e){return this.raw.toString(e)}},{key:"toHex",value:function(){return"0x"+this.toString(16)}},{key:"eq",value:function(e){return this.raw.eq(h(e))}},{key:"gt",value:function(e){return this.raw.gt(h(e))}},{key:"gte",value:function(e){return this.raw.gte(h(e))}},{key:"lt",value:function(e){return this.raw.lt(h(e))}},{key:"lte",value:function(e){return this.raw.lte(h(e))}},{key:"plus",value:function(e){return this.new(this.raw.plus(h(e)))}},{key:"minus",value:function(e){return this.new(this.raw.minus(h(e)))}},{key:"asBN",value:function(){return new d.BigNumber(this.raw)}}],[{key:"checkIsAmount",value:function(e){return"object"===o(e)&&(null!=e&&("__isCkitAmount__"in e&&e.__isCkitAmount__))}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n<0||!Number.isInteger(n))&&(0,p.boom)("The decimal not valid"),new e("bigint"===typeof t?h(t*Math.pow(10n,BigInt(n))):n?h(t).times(h(10).pow(n)):h(t))}}]),e}();t.Amount=b;var v=function(e){c(n,e);var t=s(n);function n(){return u(this,n),t.apply(this,arguments)}return l(n,[{key:"new",value:function(e){return new n(e)}},{key:"humanize",value:function(e){return i(a(n.prototype),"humanize",this).call(this,r(r({},e),{},{decimals:8}))}}],[{key:"from",value:function(){throw new Error("Use the Amount.from to instead of")}},{key:"fromCkb",value:function(e){return new n(h(e).times(Math.pow(10,8)))}},{key:"fromShannon",value:function(e){return new n(h(e))}}]),n}(b);t.CkbAmount=v},944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MercuryCellProvider=void 0;t.MercuryCellProvider=class{constructor(e){this.mercury=e}collector(e){const{lock:t,type:n}=e;let r;if(void 0!==t)r={script:t,script_type:"lock"},void 0!=n&&"empty"!==n&&(r.filter={script:n});else{if(void 0==n||"empty"==n)throw new Error(`should specify either type or lock in queries, queries now: ${JSON.stringify(e)}`);r={script:n,script_type:"type"}}const i=e.data||"0x",a=this.mercury;return{collect:()=>({async*[Symbol.asyncIterator](){for(;;){const e=(await a.get_cells({search_key:r})).objects;for(const t of e)"any"!==i&&i!==t.output_data||(yield{cell_output:t.output,data:t.output_data,out_point:t.out_point,block_number:t.block_number});if(e.length<100)break}}})}}}},945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CkitProvider=void 0;var r=n(124),i=n(481);class a extends i.MercuryProvider{get config(){return super.config}init(e){return super.init(e)}getScriptConfig(e){const t=super.getScriptConfig(e);if(!t)throw new Error(`cannot find the ${e} script config, maybe init failed`);return t}newScript(e,t="0x"){const n=super.newScript(e,t);if(!n)throw new Error(`cannot find the ${e} script config, maybe init failed`);return n}newSudtScript(e){const t=r.utils.computeScriptHash(this.parseToScript(e));return this.newScript("SUDT",t)}getCellDep(e){const t=super.getCellDep(e);if(!t)throw new Error(`cannot find the ${e} script config, maybe init failed`);return t}}t.CkitProvider=a},946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={AbstractTransactionBuilder:!0,SerializedTx:!0,DeserializedTx:!0};Object.defineProperty(t,"AbstractTransactionBuilder",{enumerable:!0,get:function(){return i.AbstractTransactionBuilder}}),Object.defineProperty(t,"SerializedTx",{enumerable:!0,get:function(){return i.SerializedTx}}),Object.defineProperty(t,"DeserializedTx",{enumerable:!0,get:function(){return i.DeserializedTx}});var i=n(240),a=n(947);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=n(950);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=n(956);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},947:function(e,t,n){"use strict";var r=n(48),i=n(114),a=n(88),c=n(89),s=n(219),o=n(115),u=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.AcpTransferSudtBuilder=void 0;var l=n(148),d=n(240),p=n(948);var f=function(e){o(n,e);var t=u(n);function n(e,r,i){var c,o,u,l;return a(this,n),(c=t.call(this)).options=e,c.provider=r,c.signer=i,o=s(c),l=void 0,(u="builder")in o?Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[u]=l,c.builder=new p.TransferSudtPwBuilder(e,r,i),c}return c(n,[{key:"build",value:function(){var e=i(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signer.getAddress();case 2:if(t=e.sent,!(this.options.recipient===t)){e.next=6;break}throw new l.RecipientSameWithSenderError({address:t});case 6:return e.abrupt("return",this.builder.build());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d.AbstractTransactionBuilder);t.AcpTransferSudtBuilder=f},948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferSudtPwBuilder=void 0;var r=n(16),i=n(170),a=n(147),c=n(328);class s extends c.AbstractPwSenderBuilder{constructor(e,t,n){super(t),this.options=e,this.signer=n}async build(){const{sudt:e,recipient:t,amount:n}=this.options,c=await this.signer.getAddress(),s=await this.provider.collectUdtCells(c,e,n),o=(await this.provider.collectUdtCells(t,e,"0"))[0],u=await this.getCellDeps();o||(0,a.boom)(`recipient ${t} has no cell to carry the udt`);const l=s.map((e=>new r.Cell(new r.Amount(e.output.capacity,0),i.Pw.toPwScript(e.output.lock),e.output.type&&i.Pw.toPwScript(e.output.type),i.Pw.toPwOutPoint(e.out_point),e.output_data))),d=new r.Cell(new r.Amount(o.output.capacity,0),i.Pw.toPwScript(o.output.lock),o.output.type&&i.Pw.toPwScript(o.output.type),i.Pw.toPwOutPoint(o.out_point),o.output_data),p=d.clone();p.setSUDTAmount(p.getSUDTAmount().add(new r.Amount(this.options.amount,0)));const f=l.reduce(((e,t)=>(e.capacity=e.capacity.add(t.capacity),e.setSUDTAmount(e.getSUDTAmount().add(t.getSUDTAmount())),e)));f.setSUDTAmount(f.getSUDTAmount().sub(new r.Amount(this.options.amount,0)));const h=new r.Transaction(new r.RawTransaction([...l,d],[f,p],u),l.map((()=>this.getWitnessPlaceholder(c)))),b=r.Builder.calcFee(h,Number(this.provider.config.MIN_FEE_RATE));return f.capacity=f.capacity.sub(b),f.availableFee().lte(r.Amount.ZERO)&&(0,a.boom)("only the additional capacity of the sudt cell is supported as a fee"),h}}t.TransferSudtPwBuilder=s},949:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCellDeps=function(){if("undefined"===typeof window)return[];let e=i;false;return console.log("[cells]:",false,e),e},t.nets=void 0;var r=n(16);t.nets=[{name:"dev",url:"https://id.unipass.vip",model:1},{name:"Aggron-Preview",url:"https://t.unipass.xyz",model:0},{name:"Lina-Preview",url:"https://rc.unipass.xyz",model:0},{name:"Lina",url:"https://unipass.xyz"}];const i=[new r.CellDep(r.DepType.code,new r.OutPoint("0x04a1ac7fe15e454741d3c5c9a409efb9a967714ad2f530870514417978a9f655","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0xd346695aa3293a84e9f985448668e9692892c959e7e83d6d8042e59c08b8cf5c","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0x194a0f84de41d006a07ece07c96a8130100818599fcf0b2ecf49e512b873ed6e","0x2"))];new r.CellDep(r.DepType.code,new r.OutPoint("0x5c98197999d04fbfa5eb579d0f1c85a3edac2b2f72164f2fc618b101adc71729","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0xf247a0e9dfe9d559ad8486428987071b65d441568075465c2810409e889f4081","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0x1196caaf9e45f1959ea3583f92914ee8306d42e27152f7068f9eeb52ac23eeae","0x0")),new r.CellDep(r.DepType.code,new r.OutPoint("0xf5edd047b3dbd676c9aa1e5a77ff32e3661d154c306e23bb0c13f8da9133f145","0x2"))},950:function(e,t,n){"use strict";var r=n(48),i=n(114),a=n(88),c=n(89),s=n(115),o=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.TransferCkbBuilder=void 0;var u=n(148),l=n(240),d=n(951),p=function(e){s(n,e);var t=o(n);function n(e,r,i){var c;return a(this,n),(c=t.call(this)).options=e,c.provider=r,c.signer=i,c}return c(n,[{key:"build",value:function(){var e=i(r.mark((function e(){var t,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signer.getAddress();case 2:if(t=e.sent,!this.options.recipients.some((function(e){return e.recipient===t&&"findAcp"===e.capacityPolicy}))){e.next=6;break}throw new u.RecipientSameWithSenderError({address:t});case 6:return n=new d.TransferCkbPwBuilder(this.options,this.provider,this.signer),e.abrupt("return",n.build());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l.AbstractTransactionBuilder);t.TransferCkbBuilder=p},951:function(e,t,n){"use strict";var r=n(952),i=n(48),a=n(114),c=n(88),s=n(89),o=n(115),u=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.TransferCkbPwBuilder=void 0;var l=n(16),d=n(333),p=n(148),f=n(170),h=n(483),b=function(e){o(n,e);var t=u(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,r)).options=e,a.signer=i,a}return s(n,[{key:"build",value:function(){var e=a(i.mark((function e(){var t,c,s,o,u,b,v,j,y,m,g,x=this;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.options.recipients.filter((function(e){return"createAcp"===e.capacityPolicy})).map((function(e){return new l.Cell(new l.Amount(e.amount,0),f.Pw.toPwScript(x.provider.parseToScript(e.recipient)))})),c=this.options.recipients.filter((function(e){return"findAcp"===e.capacityPolicy})),s=(0,d.from)(c).pipe((0,d.mergeMap)(function(){var e=a(i.mark((function e(t){var n,r,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.provider.collectCkbLiveCells(t.recipient,"0");case 2:if(n=e.sent,r=n[0]){e.next=6;break}throw new p.NoAvailableCellError({lock:x.provider.parseToScript(t.recipient)});case 6:return(a=f.Pw.toPwCell(r)).capacity=a.capacity.add(new l.Amount(t.amount,0)),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.toArray)()),e.next=5,(0,d.lastValueFrom)(s);case 5:return o=e.sent,u=t.reduce((function(e,t){return e.add(t.capacity)}),l.Amount.ZERO),b=c.reduce((function(e,t){return e.add(new l.Amount(t.amount,0))}),l.Amount.ZERO),e.t0=this.provider,e.next=11,this.signer.getAddress();case 11:return e.t1=e.sent,e.t2=b.add(u).add(new l.Amount(String((0,h.byteLenOfCkbLiveCell)()))).add(new l.Amount("1")).toHexString(),e.next=15,e.t0.collectCkbLiveCells.call(e.t0,e.t1,e.t2);case 15:if(v=e.sent,(j=v.map(f.Pw.toPwCell)).length&&j[0]){e.next=26;break}return e.t3=p.NoAvailableCellError,e.t4=this.provider,e.next=22,this.signer.getAddress();case 22:throw e.t5=e.sent,e.t6=e.t4.parseToScript.call(e.t4,e.t5),e.t7={lock:e.t6},new e.t3(e.t7);case 26:return(y=j[0]).capacity=j.reduce((function(e,t){return e.add(t.capacity)}),new l.Amount("0",0)),e.t8=l.Transaction,e.t9=new l.RawTransaction([].concat(r(j),r(o)),[y].concat(r(o),r(t)),this.getCellDeps()),e.t10=this,e.next=33,this.signer.getAddress();case 33:return e.t11=e.sent,e.t12=e.t10.getWitnessPlaceholder.call(e.t10,e.t11),e.t13=[e.t12],m=new e.t8(e.t9,e.t13),g=n.calcFee(m),y.capacity=y.capacity.sub(u).sub(b).sub(g),e.abrupt("return",m);case 40:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(328).AbstractPwSenderBuilder);t.TransferCkbPwBuilder=b},956:function(e,t,n){"use strict";var r=n(48),i=n(114),a=n(88),c=n(89),s=n(115),o=n(116);Object.defineProperty(t,"__esModule",{value:!0}),t.MintSudtBuilder=void 0;var u=n(148),l=n(240),d=n(957),p=function(e){s(n,e);var t=o(n);function n(e,r,i){var c;return a(this,n),(c=t.call(this)).options=e,c.provider=r,c.signer=i,c}return c(n,[{key:"buildPwTransaction",value:function(){var e=i(r.mark((function e(){var t,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signer.getAddress();case 2:return t=e.sent,n=new d.NonAcpPwMintBuilder(this.options,this.provider,t),e.next=6,n.build();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"build",value:function(){var e=i(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signer.getAddress();case 2:if(t=e.sent,!this.options.recipients.some((function(e){return e.recipient===t&&"findAcp"===e.capacityPolicy}))){e.next=6;break}throw new u.RecipientSameWithSenderError({address:t});case 6:return e.abrupt("return",this.buildPwTransaction());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l.AbstractTransactionBuilder);t.MintSudtBuilder=p},957:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonAcpPwMintBuilder=void 0;var r=n(16),i=n(333),a=n(148),c=n(170),s=n(483),o=n(328);class u extends o.AbstractPwSenderBuilder{constructor(e,t,n){super(t),this.options=e,this.issuerAddress=n}async build(){const e=this.provider.newSudtScript(this.issuerAddress),t=this.options.recipients.filter((e=>"createAcp"===e.capacityPolicy)).map((t=>new r.Cell(new r.Amount(String(BigInt(t.additionalCapacity||0)),0).add(new r.Amount(String((0,s.byteLenOfSudt)()))),c.Pw.toPwScript(this.provider.parseToScript(t.recipient)),c.Pw.toPwScript(e),void 0,new r.Amount(t.amount,0).toUInt128LE()))),n=this.options.recipients.filter((e=>"findAcp"===e.capacityPolicy)),o=(0,i.from)(n).pipe((0,i.mergeMap)((async t=>{const n=(await this.provider.collectUdtCells(t.recipient,e,"0"))[0];if(!n)throw new a.NoAvailableCellError({lock:this.provider.parseToScript(t.recipient),type:e});const i=c.Pw.toPwCell(n);return i.capacity=i.capacity.add(new r.Amount(t.additionalCapacity||"0",0)),i.setSUDTAmount(i.getSUDTAmount().add(new r.Amount(t.amount,0))),i}),5),(0,i.toArray)()),u=await(0,i.lastValueFrom)(o),l=t.reduce(((e,t)=>e.add(t.capacity)),r.Amount.ZERO),d=n.reduce(((e,t)=>e.add(new r.Amount(t.additionalCapacity||"0",0))),r.Amount.ZERO),p=l.add(d).add(new r.Amount(String((0,s.byteLenOfCkbLiveCell)()))).add(new r.Amount("1")),f=(await this.provider.collectCkbLiveCells(this.issuerAddress,p.toHexString())).map(c.Pw.toPwCell),h=f[0].clone();h.capacity=f.reduce(((e,t)=>e.add(t.capacity)),r.Amount.ZERO);const b=new r.RawTransaction([...f,...u],[h,...t,...u],this.getCellDeps()),v=new r.Transaction(b,[this.getWitnessPlaceholder(this.issuerAddress)]),j=r.Builder.calcFee(v,Number(this.provider.config.MIN_FEE_RATE));return h.capacity=h.capacity.sub(j).sub(l).sub(d),v}}t.NonAcpPwMintBuilder=u},958:function(e,t,n){"use strict";function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.predefined=void 0;const i={Aggron:{PREFIX:"ckt",SCRIPTS:function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var s=a?Object.getOwnPropertyDescriptor(e,c):null;s&&(s.get||s.set)?Object.defineProperty(i,c,s):i[c]=e[c]}i.default=e,n&&n.set(e,i);return i}(n(959)).SCRIPTS}};t.predefined=i},959:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCRIPTS=void 0;var r=n(283);const i={SECP256K1_BLAKE160:r.predefined.AGGRON4.SCRIPTS.SECP256K1_BLAKE160,ANYONE_CAN_PAY:r.predefined.AGGRON4.SCRIPTS.ANYONE_CAN_PAY,SUDT:r.predefined.AGGRON4.SCRIPTS.SUDT,PW_ANYONE_CAN_PAY:{CODE_HASH:"0x093ba9759e1c4a79dd81b0a50de83ab108ffe4eb983b05637bf1f5c1834f31eb",HASH_TYPE:"data",TX_HASH:"0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41",INDEX:"0x2",DEP_TYPE:"code"},PW_NON_ANYONE_CAN_PAY:{CODE_HASH:"0x87366c3678f14ccbd6647386a18e05ae27c97978d4a6952fb5820cc698263835",HASH_TYPE:"data",TX_HASH:"0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41",INDEX:"0x3",DEP_TYPE:"code"},UNIPASS:{INDEX:"0x0",TX_HASH:"0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592",DEP_TYPE:"code",CODE_HASH:"0x124a60cd799e1fbca664196de46b3f7f0ecb7138133dcaea4893c51df5b02be6",HASH_TYPE:"type"}};t.SCRIPTS=i}},[[1038,1,2]]]);
//# sourceMappingURL=main.eb57e030.chunk.js.map