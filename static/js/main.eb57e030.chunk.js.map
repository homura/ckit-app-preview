{"version":3,"sources":["hooks/useConfigStorage.tsx","containers/CkitProviderContainer/index.tsx","wallets/ObservableNonAcpPwLockWallet.ts","wallets/ObservableAcpPwLockWallet.ts","wallets/ObservableUnipassWallet.ts","containers/WalletContainer/index.tsx","components/OnLoaded/index.tsx","hooks/useSendTransaction.tsx","components/Styled/index.tsx","components/Wallet/WalletConnect.tsx","utils/AssetAmount.ts","utils/index.ts","hooks/useSendIssueTx.tsx","hooks/useAssetMetaStorage.tsx","components/Wallet/WalletChange.tsx","components/Wallet/WalletList.tsx","views/Account/index.tsx","components/Assets/AssetList/AssetBalance.tsx","components/Assets/AssetList/SendButton.tsx","hooks/useSendTransferTx.tsx","components/Assets/AssetList/index.tsx","components/Assets/AddAssetButton.tsx","views/Assets/index.tsx","components/Issue/AssetMetaDisplay.tsx","components/Issue/IssueOperation.tsx","components/Issue/index.tsx","views/Issue/index.tsx","views/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../../packages/ckit/dist/utils.js","../../../packages/ckit/dist/errors.js","../../../packages/ckit/dist/helpers/pw.js","../../../packages/base/dist/index.js","../../../packages/ckit/dist/tx-builders/AbstractTransactionBuilder.js","../../../packages/ckit/dist/tx-builders/pw/AbstractPwSenderBuilder.js","../../../packages/utils/dist/index.js","../../../packages/ckit/dist/wallets/AbstractSingleEntrySigner.js","../../../packages/ckit/dist/providers/mercury/MercuryProvider.js","../../../packages/ckit/dist/helpers/index.js","../../../packages/ckit/dist/tx-builders/builder-utils.js","../../../packages/ckit/dist/index.js","../../../packages/base/dist/ScriptManager.js","../../../packages/base/dist/AbstractProvider.js","../../../packages/base/dist/AbstractWallet.js","../../../packages/utils/dist/debug.js","../../../packages/utils/dist/invariant.js","../../../packages/utils/dist/assertion.js","../../../packages/ckit/dist/wallets/index.js","../../../packages/ckit/dist/wallets/PwWallet.js","../../../packages/ckit/dist/helpers/pw.serde.js","../../../packages/ckit/dist/wallets/UnipassWallet.js","../../../packages/ckit/dist/wallets/unipass/UnipassAdapter.js","../../../packages/ckit/dist/providers/index.js","../../../packages/mercury-client/dist/index.js","../../../packages/ckit/dist/helpers/Amount.js","../../../packages/ckit/dist/providers/mercury/IndexerCellProvider.js","../../../packages/ckit/dist/providers/CkitProvider.js","../../../packages/ckit/dist/tx-builders/index.js","../../../packages/ckit/dist/tx-builders/AcpTransferSudtBuilder.js","../../../packages/ckit/dist/tx-builders/pw/TransferSudtPwBuilder.js","../../../packages/ckit/dist/tx-builders/unipass/config.js","../../../packages/ckit/dist/tx-builders/TransferCkbBuilder.js","../../../packages/ckit/dist/tx-builders/pw/TransferCkbPwBuilder.js","../../../packages/ckit/dist/tx-builders/MintSudtBuilder.js","../../../packages/ckit/dist/tx-builders/pw/MintSudtPwBuilder.js","../../../packages/ckit/dist/predefined/index.js","../../../packages/ckit/dist/predefined/aggron.js"],"names":["useConfigStorage","initialConfig","useMemo","ckitConfig","predefined","Aggron","mecuryRPC","ckbRPC","nervosExploreTxUrlPrefix","nervosExploreAddressUrlPrefix","nervosExploreSudtUrlPrefix","useLocalStorage","CkitProviderContainer","createContainer","useState","ckitProvider","setCkitProvider","localConfig","useEffect","provider","CkitProvider","init","then","ObservableNonAcpPwLockWallet","NonAcpPwLockWallet","constructor","super","this","setDescriptor","name","makeObservable","connectStatus","observable","signer","ObservableAcpPwLockWallet","AcpPwLockWallet","ObservableUnipassWallet","UnipassWallet","WalletContainer","useContainer","currentWalletName","setCurrentWalletName","wallets","useLocalObservable","signerAddress","setSignerAddress","error","setError","visible","setVisible","setModalVisible","useCallback","runInAction","splice","push","find","value","descriptor","connect","autorun","forEach","wallet","index","on","remainConnectedWallet","w","connectedWallet","Error","err","currentWallet","undefined","getAddress","displayWalletName","OnIncomplete","children","isLoaded","setIsLoaded","useMutation","a","unimplemented","mutateAsync","adapter","UnipassRedirectAdapter","host","saveLoginInfo","hasSigData","StyledCardWrapper","styled","div","WalletConnect","observer","size","onClick","type","AssetAmount","rawAmount","decimals","BigNumber","toString","humanizeAmount","times","originDecimalPlaces","decimalPlaces","ROUND_FLOOR","toFormat","hasProp","obj","key","truncateMiddle","str","start","end","length","slice","useSendIssueTx","input","recipientsParams","recipient","amount","operationKind","capacityPolicy","additionalCapacity","helpers","CkbAmount","fromCkb","toHex","txBuilder","MintSudtBuilder","recipients","build","issueTx","seal","sendTransaction","txHash","onSuccess","href","Modal","success","title","content","target","rel","onError","errorMsg","String","message","width","useAssetMetaStorage","initialAssetMeta","symbol","decimal","WalletChange","truncatedAddress","style","marginTop","marginBottom","span","offset","textAlign","AddressTip","copyable","float","Typography","Text","ModalBorderWrapper","WalletList","closable","onCancel","footer","pagination","dataSource","renderItem","item","Item","WalletListItem","props","UsbOutlined","SyncOutlined","spin","CheckCircleTwoTone","AccountView","Title","level","paddingTop","AssetBalance","script","query","useQuery","address","getUdtBalance","getCkbLiveCellsBalance","enabled","isError","data","fromRaw","toHumanizeString","LoadingOutlined","SendButton","issuableSudtScript","newSudtScript","isMint","code_hash","hash_type","args","buttonContent","assetMeta","ModalForm","AcpTransferSudtBuilder","sudt","txToSend","TransferCkbBuilder","useSendTransferTx","sendTransferTransaction","isTransferLoading","isLoading","sendIssueTransaction","isIssueLoading","onSubmit","values","fromHumanize","toRawString","loading","initialValues","validate","_values","formik","htmlFor","placeholder","errorMessage","submitForm","AssetList","columns","render","record","showHeader","pageSize","AddAssetButton","buttonProps","assets","setAssets","codeHash","hashType","setSubmitting","newAssetMeta","concat","AssetsView","icon","PlusCircleOutlined","fontSize","AssetMetaDisplay","scriptHash","utils","computeScriptHash","ScriptTip","JSON","stringify","Link","IssueOperation","setOperationKind","assetDecimal","assetSymbol","recipientFieldDisplayName","IssueArea","issuerAddress","udtScript","IssueView","isSupportIssue","checkSupported","AppView","BodyWrapper","className","App","queryClient","QueryClient","QueryClientProvider","client","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","boom","Object","defineProperty","exports","asyncSleep","ms","Promise","resolve","setTimeout","randomHexString","lengthWithOut0x","Array","map","Math","floor","random","join","nonNullable","x","bytesToHex","bytes","b","padStart","hexToBytes","hex","match","startsWith","Uint8Array","from","byte","parseInt","asserts","condition","RecipientSameWithSenderError","NoEnoughUdtError","NoEnoughCkbError","NoAvailableCellError","CkitError","metadata","expected","actual","enumerable","get","_pw","serialize","deserialize","Pw","_pwCore","require","fromPwScript","toPwScript","Script","HashType","fromPwCellDep","dep_type","depType","out_point","tx_hash","outPoint","toPwCellDep","CellDep","DepType","depGroup","code","OutPoint","fromPwCell","cell_output","capacity","toHexString","lock","getData","toPwCell","isLumosCell","Cell","Amount","output","output_data","toPwOutPoint","_ScriptManager","ScriptManager","_AbstractProvider","AbstractProvider","ProviderConfig","InitOptions","_AbstractWallet","AbstractWallet","AbstractTransactionBuilder","tx","serde","deserialized","serialized","configurable","writable","AbstractPwSenderBuilder","_utils","_config","Builder","Number","config","MIN_FEE_RATE","getCellDeps","_scripts","getCellDep","getWitnessPlaceholder","isTemplateOf","parseToScript","scriptConfig","getScriptConfig","CODE_HASH","HASH_TYPE","repeat","input_type","output_type","_debug","debug","createDebugger","_invariant","invariant","_assertion","AbstractSingleEntrySigner","PwAdapterSigner","rawSigner","hasher","Blake2bHasher","messages","sigs","signerLock","sameWith","signMessage","sig","Signer","options","_options$hasher","sign","signed","transformers","TransformTransaction","MercuryProvider","_rpc","_base","_mercuryClient","_rxjs","_errors","_helpers","_IndexerCellProvider","_defineProperty","mercuryRpc","ckbRpc","MercuryClient","mercury","RPC","rpc","minimalCapacity","searchKey","script_type","filter","output_data_len_range","cells$","get_cells","search_key","pipe","expand","res","after_cursor","last_cursor","takeWhile","objects","concatMap","cell","scan","acc","next","cells","BigInt","lastValueFrom","defaultValue","balance$","reduce","balance","getTxPoolInfo","tx_pool_info","getChainInfo","get_blockchain_info","send_transaction","udt","minimalAmount","resolvedCell","toBigUInt128LE","pollIntervalMs","timeoutMs","Date","now","result","_tx$tx_status","get_transaction","tx_status","status","transaction","rpcTip","get_tip_block_number","mercuryTip","get_tip","block_number","asIndexerCellProvider","MercuryCellProvider","_Amount","keys","byteLenOfSudt","lockArgsByteLen","byteLenOfCkbLiveCell","_exportNames","errors","_predefined","prototype","hasOwnProperty","call","_wallets","_providers","_txBuilders","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","default","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","_configManager","SCRIPTS","newScript","configKey","DEP_TYPE","TX_HASH","INDEX","findCellDepByAddress","scriptConfigs","findIndex","found","findCellDepByScript","parseToAddress","initialized","min_fee_rate","isMainnet","chain","txPoolInfo","LINA","AGGRON4","generateAddress","parseAddress","_eventemitter","features","description","event","listener","emitter","isDisconnected","emitConnectStatusChanged","tryConnect","emitChangedSigner","e","emitError","removeAllListeners","feature","includes","emit","namespace","_tinyInvariant","_PwWallet","_UnipassWallet","hashMessage","InternalNonAcpPwLockSigner","_hd","_detectProvider","_secp256k","_AbstractSingleEntrySigner","_classPrivateFieldGet","receiver","privateMap","_classApplyDescriptorGet","_classExtractFieldDescriptor","_classPrivateFieldSet","TypeError","_classApplyDescriptorSet","action","detect","window","ethereum","AbstractPwWallet","addresses","isArray","produceSigner","describeFeatures","ethProvider","removeEventListener","addListener","enable","AbstractPwSigner","ethereumProvider","selectedAddress","request","method","params","v","Platform","eth","Keccak256Hasher","update","buffer","digest","serializeJson","_privateKey","privateKey","pubkey","publicKeyCreate","getEthAddress","signRecoverable","platform","raw","inputs","since","previousOutput","inputCells","getHexData","outputs","version","cellDeps","headerDeps","witnessArgs","witnesses","Transaction","RawTransaction","toCell","toScript","_UnipassAdapter","loginDataCacheKey","getLockArgs","unipassLockArgs","pubkeyToLockArgs","getRetFromSearchParams","redirect","isUnipassLoginData","isUnipassSigData","ckbHash","check","replace","searchParams","URLSearchParams","location","search","json","parse","info","delete","pathname","protocol","qs","newUrl","history","replaceState","path","_options$host","_options$loginDataCac","getLoginDataFromUrl","getLoginDataFromCache","_ref","_this$getLoginDataFro","redirectToLogin","loginData","_this$getSignatureFro","getSignatureFromUrl","redirectToSign","generateUnipassNewUrl","success_url","_this$getLoginDataFro2","localStorage","setItem","getItem","saveLoginDataToCache","signature","urlObj","URL","toLowerCase","entries","val","_MercuryProvider","_CkitProvider","_clientJs","uri","transport","HTTPTransport","headers","Client","RequestManager","payload","order","limit","_bignumber","BN","checkIsAmount","bn","isInteger","lt","Infinity","separator","valWithDecimals","rounded","min","base","eq","gt","gte","lte","new","plus","minus","__isCkitAmount__","pow","collector","queries","queryData","collect","Symbol","asyncIterator","liveCells","issuerLockHash","dep","SerializedTx","DeserializedTx","_AbstractTransactionBuilder","_AcpTransferSudtBuilder","_TransferCkbBuilder","_MintSudtBuilder","_TransferSudtPwBuilder","builder","TransferSudtPwBuilder","_AbstractPwSenderBuilder","sender","senderSudts","collectUdtCells","recipientSudt","senderInputs","point","recipientInput","recipientOutput","clone","setSUDTAmount","getSUDTAmount","add","senderOutput","sum","sub","fee","calcFee","availableFee","ZERO","AggronCellDeps","console","log","nets","url","model","_TransferCkbPwBuilder","some","TransferCkbPwBuilder","_builderUtils","recipientCreatedCells","acpOptions","recipientAcpCells$","mergeMap","collectCkbLiveCells","resolveds","resolved","toArray","recipientAcpCells","createdCapacity","totalCapacity","injectedAcpCapacity","senderOutpoints","senderCells","_MintSudtPwBuilder","NonAcpPwMintBuilder","buildPwTransaction","udtType","createdRecipientCells","toUInt128LE","resolvedFindAcpCells","foundRecipientCells$","async","foundRecipientCells","createdRecipientCellsCapacity","createdCell","foundRecipientCellsAdditionalCapacity","foundCell","neededCapacityFromIssuer","issuerCells","issuerOutput","inputCell","rawTx","PREFIX","SECP256K1_BLAKE160","ANYONE_CAN_PAY","SUDT","PW_ANYONE_CAN_PAY","PW_NON_ANYONE_CAN_PAY","UNIPASS"],"mappings":"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","file":"static/js/main.eb57e030.chunk.js","sourcesContent":["import { CkitInitOptions, predefined } from '@ckit/ckit';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { useMemo } from 'react';\n\nexport interface LocalConfig {\n  ckitConfig: CkitInitOptions;\n  mecuryRPC: string;\n  ckbRPC: string;\n  nervosExploreTxUrlPrefix: string;\n  nervosExploreAddressUrlPrefix: string;\n  nervosExploreSudtUrlPrefix: string;\n}\n\n// TODO remove random when predefined config is ready\nexport function useConfigStorage(): [LocalConfig, (newValue: LocalConfig) => void, () => void] {\n  const initialConfig = useMemo<LocalConfig>(() => {\n    // TODO check network first\n    const ckitConfig: CkitInitOptions = predefined.Aggron;\n    const mecuryRPC = 'https://testnet.ckb.dev/indexer';\n    const ckbRPC = 'https://testnet.ckb.dev/rpc';\n    const nervosExploreTxUrlPrefix = 'https://explorer.nervos.org/aggron/transaction/';\n    const nervosExploreAddressUrlPrefix = 'https://explorer.nervos.org/aggron/address/';\n    const nervosExploreSudtUrlPrefix = 'https://explorer.nervos.org/aggron/sudt/';\n    return {\n      ckitConfig: ckitConfig,\n      mecuryRPC: mecuryRPC,\n      ckbRPC: ckbRPC,\n      nervosExploreTxUrlPrefix: nervosExploreTxUrlPrefix,\n      nervosExploreAddressUrlPrefix: nervosExploreAddressUrlPrefix,\n      nervosExploreSudtUrlPrefix: nervosExploreSudtUrlPrefix,\n    };\n  }, []);\n\n  return useLocalStorage<LocalConfig>('localConfig', initialConfig);\n}\n","import { CkitProvider } from '@ckit/ckit';\nimport { useEffect, useState } from 'react';\nimport { createContainer } from 'unstated-next';\nimport { useConfigStorage } from 'hooks/useConfigStorage';\n\nexport const CkitProviderContainer = createContainer<CkitProvider | undefined>(() => {\n  const [ckitProvider, setCkitProvider] = useState<CkitProvider>();\n  const [localConfig] = useConfigStorage();\n  useEffect(() => {\n    const provider = new CkitProvider(localConfig.mecuryRPC, localConfig.ckbRPC);\n    void provider.init({ ...localConfig.ckitConfig }).then(() => setCkitProvider(provider));\n  }, [localConfig]);\n\n  return ckitProvider;\n});\n\nexport function useProvider(): CkitProvider {\n  const provider = CkitProviderContainer.useContainer();\n\n  if (!provider) throw new Error('Cannot find provider, make suer useProvider in CkitProviderContainer');\n\n  return provider;\n}\n","import { CkitProvider, NonAcpPwLockWallet } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableNonAcpPwLockWallet extends NonAcpPwLockWallet {\n  constructor(ckitProvider: CkitProvider) {\n    super(ckitProvider);\n    this.setDescriptor({ name: 'MetaMask(Non-ACP)' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { CkitProvider, AcpPwLockWallet } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableAcpPwLockWallet extends AcpPwLockWallet {\n  constructor(ckitProvider: CkitProvider) {\n    super(ckitProvider);\n    this.setDescriptor({ name: 'MetaMask(ACP)' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { UnipassWallet, CkitProvider } from '@ckit/ckit';\nimport { makeObservable, observable } from 'mobx';\n\nexport class ObservableUnipassWallet extends UnipassWallet {\n  constructor(provider: CkitProvider) {\n    super(provider);\n    this.setDescriptor({ name: 'UniPass' });\n    makeObservable(this, {\n      connectStatus: observable,\n      signer: observable,\n    });\n  }\n}\n","import { AbstractWallet, ConnectStatus } from '@ckit/ckit';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { autorun, runInAction } from 'mobx';\nimport { useLocalObservable } from 'mobx-react-lite';\nimport { useCallback, useEffect, useState } from 'react';\nimport { createContainer } from 'unstated-next';\nimport { CkitProviderContainer } from '../CkitProviderContainer';\nimport { ObservableAcpPwLockWallet, ObservableNonAcpPwLockWallet, ObservableUnipassWallet } from 'wallets';\n\nexport interface WalletConnectError {\n  error: Error;\n  index: number;\n}\n\nfunction useWallet() {\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const [currentWalletName, setCurrentWalletName] = useLocalStorage<string | null>('currentWalletName');\n\n  // TODO refactor to Wallets class\n  const wallets = useLocalObservable<AbstractWallet[]>(() => []);\n  const [signerAddress, setSignerAddress] = useState<string>();\n  const [error, setError] = useState<WalletConnectError | null>(null);\n  const [visible, setVisible] = useState(false);\n\n  const setModalVisible = useCallback((visible: boolean) => {\n    setVisible(visible);\n    setError(null);\n  }, []);\n\n  useEffect(() => {\n    if (!ckitProvider) return;\n    // when the provider has changed, wallets should be construct with the new provider\n    runInAction(() => {\n      wallets.splice(0);\n      wallets.push(\n        new ObservableUnipassWallet(ckitProvider),\n        new ObservableNonAcpPwLockWallet(ckitProvider),\n        new ObservableAcpPwLockWallet(ckitProvider),\n      );\n      wallets.find((value) => value.descriptor.name === currentWalletName)?.connect();\n    });\n  }, [ckitProvider]);\n\n  useEffect(\n    () =>\n      autorun(() => {\n        if (!wallets) return;\n        wallets.forEach((wallet, index) => {\n          const onConnectStatusChanged = (connectStatus: ConnectStatus) => {\n            if (connectStatus === 'disconnected') {\n              const remainConnectedWallet = wallets.find((w) => w.connectStatus === 'connected');\n              if (!remainConnectedWallet) {\n                setCurrentWalletName(null);\n              } else {\n                setCurrentWalletName(remainConnectedWallet.descriptor.name);\n              }\n            }\n            if (connectStatus === 'connected') {\n              setModalVisible(false);\n              const connectedWallet = wallets.find((w) => w.descriptor.name === wallet.descriptor.name);\n              if (!connectedWallet) {\n                throw new Error('exception: wallet could not be found');\n              } else {\n                setCurrentWalletName(connectedWallet.descriptor.name);\n              }\n            }\n          };\n          wallet.on('connectStatusChanged', onConnectStatusChanged);\n          wallet.on('error', (err) =>\n            setError({\n              error: err as Error,\n              index: index,\n            }),\n          );\n        });\n      }),\n    [setModalVisible, wallets],\n  );\n\n  const currentWallet = wallets.find((value) => value.descriptor.name === currentWalletName);\n\n  useEffect(() => {\n    autorun(() => {\n      setSignerAddress(undefined);\n      const wallet = wallets.find((value) => value.descriptor.name === currentWalletName);\n      void wallet?.signer?.getAddress().then(setSignerAddress);\n    });\n  }, [currentWalletName]);\n\n  return {\n    wallets,\n    currentWallet,\n    setCurrentWalletName,\n    signerAddress,\n    error,\n    setError,\n    visible,\n    setModalVisible,\n  };\n}\n\nexport const WalletContainer = createContainer(useWallet);\n\nexport const displayWalletName = (name: string | undefined): string => {\n  return name || 'unknown';\n};\n","import { UnipassWallet, AbstractTransactionBuilder } from '@ckit/ckit';\nimport { Spin } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { WalletContainer } from 'containers';\nimport { useSendTransaction } from 'hooks/useSendTransaction';\n\nexport const OnIncomplete: React.FC = ({ children }) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const { currentWallet } = WalletContainer.useContainer();\n  const { mutateAsync: sendTransaction } = useSendTransaction();\n\n  useEffect(() => {\n    void (async () => {\n      const adapter = new UnipassWallet.UnipassRedirectAdapter({ host: 'https://unipass.xyz' }); // TODO  use the config\n\n      adapter.saveLoginInfo();\n\n      if (adapter.hasSigData()) {\n        //   const savedTx = AbstractTransactionBuilder.serde.deserialize(JSON.parse(localStorage.getItem('...')));\n        //   const sealed = await currentWallet?.signer?.seal(savedTx);\n        //   await sendTransaction(sealed);\n      }\n\n      setIsLoaded(true);\n    })();\n  }, []);\n\n  if (!isLoaded) return <Spin />;\n  return <>{children}</>;\n};\n","import { Hash } from '@ckb-lumos/base';\nimport { unimplemented } from '@ckit/utils';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { CkitProviderContainer } from '../containers';\n\nexport function useSendTransaction(): UseMutationResult<{ txHash: Hash }> {\n  const provider = CkitProviderContainer.useContainer();\n\n  return useMutation(async () => {\n    unimplemented();\n  });\n}\n","import styled from 'styled-components';\n\nexport const StyledCardWrapper = styled.div`\n  width: 360px;\n  padding: 24px;\n  margin-bottom: 48px;\n  border-radius: 16px;\n  background: #fff;\n  box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);\n`;\n","import { Button } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const WalletConnectFC: React.FC = () => {\n  const { currentWallet, setModalVisible } = WalletContainer.useContainer();\n\n  if (currentWallet) {\n    return (\n      <Button size=\"small\" onClick={() => setModalVisible(true)}>\n        connected to {currentWallet.descriptor.name}\n      </Button>\n    );\n  }\n\n  return (\n    <Button size=\"small\" type=\"primary\" onClick={() => setModalVisible(true)}>\n      Connect\n    </Button>\n  );\n};\n\nexport const WalletConnect = observer(WalletConnectFC);\n","import { BigNumber } from 'bignumber.js';\n\nexport class AssetAmount {\n  rawAmount: BigNumber;\n  decimals: number;\n\n  constructor(rawAmount: string | BigNumber, decimals: number) {\n    this.rawAmount = new BigNumber(rawAmount);\n    this.decimals = decimals;\n  }\n\n  static fromRaw(rawAmount: string, decimals: number): AssetAmount {\n    return new AssetAmount(rawAmount, decimals);\n  }\n\n  static fromHumanize(humanizeAmount: string, decimals: number): AssetAmount {\n    const rawAmount = new BigNumber(humanizeAmount).times(10 ** decimals);\n    return new AssetAmount(rawAmount, decimals);\n  }\n\n  toRawString(): string {\n    return this.rawAmount.toString();\n  }\n\n  toHexString(): string {\n    return '0x' + this.rawAmount.toString(16);\n  }\n\n  toHumanizeString(): string {\n    const humanizeAmount = this.rawAmount.times(10 ** -this.decimals);\n    const originDecimalPlaces = humanizeAmount.decimalPlaces();\n    const rounded = humanizeAmount.decimalPlaces(originDecimalPlaces, BigNumber.ROUND_FLOOR);\n    return rounded.toFormat().toString();\n  }\n}\n","export * from './AssetAmount';\n\nexport function hasProp<O, K extends string | number | symbol>(obj: O, key: K): obj is Record<K, unknown> & O {\n  return obj != null && typeof obj === 'object' && key in obj;\n}\n\nexport function truncateMiddle(str: string, start: number, end = start): string {\n  if (!start || !end || start <= 0 || end <= 0) throw new Error('start or end is invalid');\n  if (str.length <= start + end) return str;\n  return str.slice(0, start) + '...' + str.slice(-end);\n}\n","import { Address, HexNumber, Hash } from '@ckb-lumos/base';\nimport { RecipientOptions, helpers, MintSudtBuilder } from '@ckit/ckit';\nimport { Modal } from 'antd';\nimport React from 'react';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { useConfigStorage } from './useConfigStorage';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { hasProp } from 'utils';\n\nexport interface SendIssueTxInput {\n  recipient: Address;\n  amount: HexNumber;\n  operationKind: 'invite' | 'issue';\n}\n\nexport function useSendIssueTx(): UseMutationResult<{ txHash: Hash }, unknown, SendIssueTxInput> {\n  const { currentWallet } = WalletContainer.useContainer();\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const [localConfig] = useConfigStorage();\n\n  return useMutation(\n    ['sendIssueTx'],\n    async (input: SendIssueTxInput) => {\n      if (!currentWallet?.signer) throw new Error('exception: signer undifined');\n      if (!ckitProvider) throw new Error('exception: ckitProvider undifined');\n\n      const recipientsParams: RecipientOptions = {\n        recipient: input.recipient,\n        amount: input.amount,\n      };\n      if (input.operationKind === 'invite') {\n        recipientsParams.capacityPolicy = 'createAcp';\n        recipientsParams.additionalCapacity = helpers.CkbAmount.fromCkb(1).toHex();\n        recipientsParams.amount = '0';\n      } else {\n        recipientsParams.capacityPolicy = 'findAcp';\n      }\n      const txBuilder = new MintSudtBuilder({ recipients: [recipientsParams] }, ckitProvider, currentWallet.signer);\n      const issueTx = await txBuilder.build();\n      const txHash = await ckitProvider.sendTransaction(await currentWallet.signer.seal(issueTx));\n      return { txHash: txHash };\n    },\n    {\n      onSuccess({ txHash }) {\n        const href = localConfig.nervosExploreTxUrlPrefix + txHash;\n        Modal.success({\n          title: 'Tx sent',\n          content: (\n            <p>\n              The transaction was sent, check it in&nbsp;\n              <a href={href} target=\"_blank\" rel=\"noreferrer\">\n                explorer\n              </a>\n              <details>\n                <summary>transaction id</summary>\n                {txHash}\n              </details>\n            </p>\n          ),\n        });\n      },\n      onError(error) {\n        const errorMsg: string = hasProp(error, 'message') ? String(error.message) : 'Unknown error';\n        Modal.error({ title: 'Tx failed', content: errorMsg, width: 360 });\n      },\n    },\n  );\n}\n","import { CkbTypeScript } from '@ckit/base';\nimport { useLocalStorage } from '@rehooks/local-storage';\nimport { useMemo } from 'react';\n\nexport interface AssetMeta {\n  symbol: string;\n  decimal: number;\n  script?: CkbTypeScript;\n}\n\nexport function useAssetMetaStorage(): [AssetMeta[], (newValue: AssetMeta[]) => void, () => void] {\n  const initialAssetMeta = useMemo<AssetMeta[]>(() => [{ symbol: 'ckb', decimal: 8 }], []);\n  return useLocalStorage<AssetMeta[]>('assetMeta', initialAssetMeta);\n}\n","import { Button, Col, Empty, Row, Tooltip, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { WalletContainer } from 'containers/WalletContainer';\nimport { useConfigStorage } from 'hooks';\nimport { truncateMiddle } from 'utils';\n\nexport const WalletChange = observer(() => {\n  const { signerAddress, setModalVisible } = WalletContainer.useContainer();\n  const [localConfig] = useConfigStorage();\n  if (!signerAddress) return <Empty />;\n  const truncatedAddress = truncateMiddle(signerAddress, 8);\n  const href = localConfig.nervosExploreAddressUrlPrefix + signerAddress;\n  return (\n    <div style={{ marginTop: '32px', marginBottom: '32px' }}>\n      <Row>\n        <Col span={8} offset={6}>\n          <div style={{ textAlign: 'center' }}>\n            <Tooltip title={<AddressTip copyable>{signerAddress}</AddressTip>}>\n              <a href={href} target=\"_blank\" rel=\"noreferrer\">\n                {truncatedAddress}\n              </a>\n            </Tooltip>\n          </div>\n        </Col>\n        <Col span={8} offset={2}>\n          <div style={{ float: 'right' }}>\n            <Button size=\"small\" onClick={() => setModalVisible(true)}>\n              change\n            </Button>\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n});\n\nconst AddressTip = styled(Typography.Text)`\n  color: #ffffff;\n`;\n","import { SyncOutlined, CheckCircleTwoTone, UsbOutlined } from '@ant-design/icons';\nimport { AbstractWallet } from '@ckit/base';\nimport { List, Modal, Space, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { displayWalletName, WalletContainer } from 'containers/WalletContainer';\n\nconst ModalBorderWrapper = styled.div`\n  .ant-list-item {\n    padding: 4px 0;\n    margin: 4px 0;\n    border-radius: 8px;\n    border: 1px solid rgba(0, 0, 0, 0);\n\n    &:hover {\n      border: 1px solid rgba(0, 0, 0, 0.2);\n      border-radius: 8px;\n      cursor: pointer;\n    }\n  }\n`;\n\nexport const WalletList = observer(() => {\n  const { wallets, setCurrentWalletName, visible, setError, setModalVisible } = WalletContainer.useContainer();\n\n  return (\n    <Modal\n      closable\n      title={'Choose wallets'}\n      width={312}\n      visible={visible}\n      onCancel={() => setModalVisible(false)}\n      footer={null}\n    >\n      <ModalBorderWrapper>\n        <List\n          pagination={false}\n          dataSource={wallets}\n          renderItem={(item, index) => (\n            <List.Item\n              onClick={() => {\n                setError(null);\n                if (item.connectStatus === 'disconnected') {\n                  item.connect();\n                }\n                if (item.connectStatus === 'connected') {\n                  setCurrentWalletName(item.descriptor.name);\n                  setModalVisible(false);\n                }\n              }}\n            >\n              <WalletListItem wallet={item} index={index} />\n            </List.Item>\n          )}\n        />\n      </ModalBorderWrapper>\n    </Modal>\n  );\n});\n\nexport interface WalletListItemProps {\n  wallet: AbstractWallet;\n  index: number;\n}\n\nexport const WalletListItem = observer((props: WalletListItemProps) => {\n  const { wallet, index } = props;\n  const { error } = WalletContainer.useContainer();\n  if (wallet.connectStatus === 'disconnected') {\n    return (\n      <div>\n        <Space>\n          {displayWalletName(wallet.descriptor.name)}\n          <UsbOutlined />\n        </Space>\n        {error && error.index === index && <Typography.Text type=\"danger\"> {error.error.message}</Typography.Text>}\n      </div>\n    );\n  }\n  if (wallet.connectStatus === 'connecting') {\n    return (\n      <div>\n        <Space>\n          {displayWalletName(wallet.descriptor.name)}\n          <SyncOutlined spin />\n        </Space>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <Space>\n        {displayWalletName(wallet.descriptor.name)}\n        <CheckCircleTwoTone />\n      </Space>\n    </div>\n  );\n});\n","import { Typography, Row, Col } from 'antd';\nimport React from 'react';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletList, WalletChange, WalletConnect } from 'components/Wallet';\n\nexport const AccountView: React.FC = () => {\n  return (\n    <StyledCardWrapper>\n      <div style={{ marginBottom: '24px' }}>\n        <Row>\n          <Col span={12}>\n            <Typography.Title level={3}> Account </Typography.Title>\n          </Col>\n          <Col span={12}>\n            <div style={{ float: 'right', paddingTop: '5px' }}>\n              <WalletConnect />\n            </div>\n          </Col>\n        </Row>\n      </div>\n      <WalletList />\n      <WalletChange />\n    </StyledCardWrapper>\n  );\n};\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Typography } from 'antd';\nimport React from 'react';\nimport { useQuery } from 'react-query';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AssetMeta } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype AssetBalanceProps = Pick<AssetMeta, 'decimal'> & { script: AssetMeta['script'] };\n\nexport const AssetBalance: React.FC<AssetBalanceProps> = (props) => {\n  const { script, decimal } = props;\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const { signerAddress } = WalletContainer.useContainer();\n  const query = useQuery(\n    ['queryBalance', { script: script, address: signerAddress }],\n    () => {\n      if (!ckitProvider || !signerAddress) throw new Error('exception: signer should exist');\n      if (script) {\n        return ckitProvider.getUdtBalance(signerAddress, script);\n      }\n      return ckitProvider.getCkbLiveCellsBalance(signerAddress);\n    },\n    {\n      enabled: !!signerAddress,\n    },\n  );\n  if (query.isError) {\n    return <Typography.Text type=\"danger\">error</Typography.Text>;\n  }\n  if (query.data) {\n    return <Typography.Text>{AssetAmount.fromRaw(query.data, decimal).toHumanizeString()}</Typography.Text>;\n  }\n  return <LoadingOutlined />;\n};\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { CkbTypeScript } from '@ckit/base';\nimport { Button, Col, Modal, Row, Typography } from 'antd';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AssetMeta, useSendIssueTx, useSendTransferTx } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype AssetMetaProps = Pick<AssetMeta, 'symbol' | 'decimal'> & { script: AssetMeta['script'] };\n\nexport const SendButton: React.FC<AssetMetaProps> = (props) => {\n  const [visible, setVisible] = useState<boolean>(false);\n  const provider = CkitProviderContainer.useContainer();\n  const { signerAddress } = WalletContainer.useContainer();\n\n  const issuableSudtScript = useMemo<CkbTypeScript>(() => {\n    if (!provider) throw new Error('excepiton: provider undefined');\n    if (!signerAddress) throw new Error('excepiton: signerAddress undefined');\n    return provider.newSudtScript(signerAddress);\n  }, [provider, signerAddress]);\n\n  const isMint =\n    props.script?.code_hash === issuableSudtScript.code_hash &&\n    props.script.hash_type === issuableSudtScript.hash_type &&\n    props.script.args === issuableSudtScript.args;\n\n  const buttonContent = isMint ? 'mint' : 'send';\n\n  return (\n    <div>\n      <Button type=\"link\" onClick={() => setVisible(true)}>\n        {buttonContent}\n      </Button>\n      <ModalForm visible={visible} setVisible={setVisible} assetMeta={props} isMint={isMint} />\n    </div>\n  );\n};\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  assetMeta: AssetMetaProps;\n  isMint: boolean;\n}\n\ninterface ModalFormValues {\n  recipient: Address;\n  amount: HexNumber;\n}\n\ninterface ModalFormErrors {\n  recipient?: Address;\n  amount?: HexNumber;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, assetMeta, isMint } = props;\n\n  const { mutateAsync: sendTransferTransaction, isLoading: isTransferLoading } = useSendTransferTx();\n  const { mutateAsync: sendIssueTransaction, isLoading: isIssueLoading } = useSendIssueTx();\n\n  const initialValues: ModalFormValues = { recipient: '', amount: '' };\n  const title = (isMint ? 'Mint ' : 'Send ') + assetMeta.symbol;\n  const onSubmit = useCallback(\n    (values: ModalFormValues) => {\n      if (isMint) {\n        sendIssueTransaction({\n          recipient: values.recipient,\n          amount: AssetAmount.fromHumanize(values.amount, assetMeta.decimal).toRawString(),\n          operationKind: 'issue',\n        }).then(() => setVisible(false));\n      } else {\n        sendTransferTransaction({\n          recipient: values.recipient,\n          amount: AssetAmount.fromHumanize(values.amount, assetMeta.decimal).toRawString(),\n          script: assetMeta.script,\n        }).then(() => setVisible(false));\n      }\n    },\n    [isMint, sendIssueTransaction, sendTransferTransaction, assetMeta, setVisible],\n  );\n  const loading = isMint ? isIssueLoading : isTransferLoading;\n\n  const validate = (_values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title={title} closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik initialValues={initialValues} validate={validate} onSubmit={onSubmit}>\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"recipient\">recipient:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"recipient\" type=\"text\" placeholder=\"ckb address\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"recipient\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"amount\">amount:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"amount\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"amount\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button loading={loading} onClick={formik.submitForm}>\n                Submit\n              </Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { Address, HexNumber, Hash, Transaction } from '@ckb-lumos/base';\nimport { AcpTransferSudtBuilder, TransferCkbBuilder } from '@ckit/ckit';\nimport { Modal } from 'antd';\nimport React from 'react';\nimport { useMutation, UseMutationResult } from 'react-query';\nimport { AssetMeta } from './useAssetMetaStorage';\nimport { useConfigStorage } from './useConfigStorage';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { hasProp } from 'utils';\n\nexport interface SendTransferTxInput {\n  recipient: Address;\n  amount: HexNumber;\n  script: AssetMeta['script'];\n}\n\nexport function useSendTransferTx(): UseMutationResult<{ txHash: Hash }, unknown, SendTransferTxInput> {\n  const { currentWallet } = WalletContainer.useContainer();\n  const ckitProvider = CkitProviderContainer.useContainer();\n  const [localConfig] = useConfigStorage();\n\n  return useMutation(\n    ['sendTransferTx'],\n    async (input: SendTransferTxInput) => {\n      if (!currentWallet?.signer) throw new Error('exception: signed undifined');\n      if (!ckitProvider) throw new Error('exception: ckitProvider undifined');\n      let txToSend: unknown;\n\n      if (input.script) {\n        const txBuilder = new AcpTransferSudtBuilder(\n          {\n            recipient: input.recipient,\n            sudt: input.script,\n            amount: input.amount,\n          },\n          ckitProvider,\n          currentWallet.signer,\n        );\n        txToSend = await txBuilder.build();\n      } else {\n        const txBuilder = new TransferCkbBuilder(\n          { recipients: [{ recipient: input.recipient, amount: input.amount, capacityPolicy: 'createAcp' }] },\n          ckitProvider,\n          currentWallet.signer,\n        );\n        txToSend = await txBuilder.build();\n      }\n      const txHash = await ckitProvider.sendTransaction(await currentWallet.signer.seal(txToSend));\n      return { txHash: txHash };\n    },\n    {\n      onSuccess({ txHash }) {\n        const href = localConfig.nervosExploreTxUrlPrefix + txHash;\n        Modal.success({\n          title: 'Tx sent',\n          content: (\n            <p>\n              The transaction was sent, check it in&nbsp;\n              <a href={href} target=\"_blank\" rel=\"noreferrer\">\n                explorer\n              </a>\n              <details>\n                <summary>transaction id</summary>\n                {txHash}\n              </details>\n            </p>\n          ),\n        });\n      },\n      onError(error) {\n        const errorMsg: string = hasProp(error, 'message') ? String(error.message) : 'Unknown error';\n        Modal.error({ title: 'Tx failed', content: errorMsg, width: 360 });\n      },\n    },\n  );\n}\n","import { Table } from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport React from 'react';\nimport { AssetBalance } from './AssetBalance';\nimport { SendButton } from './SendButton';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\nexport const AssetList: React.FC = () => {\n  const [assetMeta] = useAssetMetaStorage();\n  const columns: ColumnsType<AssetMeta> = [\n    {\n      render: (value, record) => <div>{record.symbol}</div>,\n    },\n    {\n      render: (value, record) => <AssetBalance decimal={record.decimal} script={record.script} />,\n    },\n    {\n      render: (value, record) => <SendButton symbol={record.symbol} decimal={record.decimal} script={record.script} />,\n    },\n  ];\n\n  return (\n    <div>\n      <Table size=\"small\" showHeader={false} columns={columns} dataSource={assetMeta} pagination={{ pageSize: 5 }} />\n    </div>\n  );\n};\n","import { Hash, HashType, HexString } from '@ckb-lumos/base';\nimport { Button, ButtonProps, Col, Modal, Row, Typography } from 'antd';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport React, { useState } from 'react';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\ninterface AddAssetButtonProps extends ButtonProps {\n  initialAssetMeta?: Partial<ModalFormValues>;\n  buttonContent?: string;\n}\n\nexport const AddAssetButton: React.FC<AddAssetButtonProps> = (props) => {\n  const { initialAssetMeta, buttonContent, ...buttonProps } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  return (\n    <div>\n      <Button {...buttonProps} onClick={() => setVisible(true)}>\n        {buttonContent ? buttonContent : ''}\n      </Button>\n      <ModalForm visible={visible} setVisible={setVisible} initialAssetMeta={initialAssetMeta} />\n    </div>\n  );\n};\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  initialAssetMeta?: Partial<ModalFormValues>;\n}\n\ninterface ModalFormValues {\n  symbol: string;\n  decimal: number;\n  codeHash: Hash;\n  hashType: HashType;\n  args: HexString;\n}\n\ninterface ModalFormErrors {\n  symbol?: string;\n  decimal?: number;\n  codeHash?: Hash;\n  hashType?: HashType;\n  args?: HexString;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, initialAssetMeta } = props;\n\n  const [assets, setAssets] = useAssetMetaStorage();\n\n  const initialValues: ModalFormValues = {\n    symbol: initialAssetMeta?.symbol ? initialAssetMeta.symbol : '',\n    decimal: initialAssetMeta?.decimal ? initialAssetMeta.decimal : 8,\n    codeHash: initialAssetMeta?.codeHash ? initialAssetMeta.codeHash : '',\n    hashType: initialAssetMeta?.hashType ? initialAssetMeta.hashType : 'type',\n    args: initialAssetMeta?.args ? initialAssetMeta.args : '',\n  };\n\n  const validate = (_values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title=\"Add asset\" closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik\n        initialValues={initialValues}\n        validate={validate}\n        onSubmit={(values: ModalFormValues, { setSubmitting }) => {\n          const newAssetMeta: AssetMeta = {\n            symbol: values.symbol,\n            decimal: values.decimal,\n            script: {\n              code_hash: values.codeHash,\n              hash_type: values.hashType,\n              args: values.args,\n            },\n          };\n          setAssets(assets.concat(newAssetMeta));\n          setSubmitting(false);\n          setVisible(false);\n        }}\n      >\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"symbol\">symbol:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"symbol\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"symbol\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"decimal\">decimal:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"decimal\" type=\"number\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"decimal\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"codeHash\">code hash:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"codeHash\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"codeHash\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"hashType\">hash type:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"hashType\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"hashType\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px' }}>\n              <Row>\n                <Col span={8}>\n                  <label htmlFor=\"args\">args:</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"args\" type=\"text\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"args\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button onClick={formik.submitForm}>Submit</Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { PlusCircleOutlined } from '@ant-design/icons';\nimport { Col, Empty, Row, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { AddAssetButton, AssetList } from 'components/Assets';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const AssetsView: React.FC = observer(() => {\n  const { signerAddress } = WalletContainer.useContainer();\n  return (\n    <div>\n      <StyledCardWrapper>\n        <div style={{ marginBottom: '12px' }}>\n          <Row>\n            <Col span={12}>\n              <Typography.Title level={3}> Assets </Typography.Title>\n            </Col>\n            <Col span={12}>\n              <div style={{ float: 'right' }}>\n                {signerAddress && (\n                  <AddAssetButton type=\"link\" size=\"large\" icon={<PlusCircleOutlined style={{ fontSize: '24px' }} />} />\n                )}\n              </div>\n            </Col>\n          </Row>\n        </div>\n        <div>\n          {signerAddress && <AssetList />}\n          {!signerAddress && <Empty />}\n        </div>\n      </StyledCardWrapper>\n    </div>\n  );\n});\n","import { utils } from '@ckb-lumos/base';\nimport { CkbTypeScript } from '@ckit/base';\nimport { Tooltip, Typography, Row, Col } from 'antd';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useConfigStorage } from 'hooks';\nimport { truncateMiddle } from 'utils';\n\ninterface AssetMetaDisplayProps {\n  symbol: string;\n  decimal: string;\n  script: CkbTypeScript;\n}\n\nexport const AssetMetaDisplay: React.FC<AssetMetaDisplayProps> = (props) => {\n  const { symbol, decimal, script } = props;\n  const [localConfig] = useConfigStorage();\n  const scriptHash = utils.computeScriptHash(script);\n\n  return (\n    <div style={{ marginTop: '24px' }}>\n      <Row>\n        <Col span={7} offset={3}>\n          <Typography.Text>symbol:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Typography.Text>{symbol}</Typography.Text>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: '8px' }}>\n        <Col span={7} offset={3}>\n          <Typography.Text>decimal:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Typography.Text>{decimal}</Typography.Text>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: '8px' }}>\n        <Col span={7} offset={3}>\n          <Typography.Text>script hash:</Typography.Text>\n        </Col>\n        <Col span={14}>\n          <Tooltip title={<ScriptTip copyable>{JSON.stringify(script)}</ScriptTip>}>\n            <Typography.Link\n              href={localConfig.nervosExploreSudtUrlPrefix + scriptHash}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {truncateMiddle(scriptHash, 8)}\n            </Typography.Link>\n          </Tooltip>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nconst ScriptTip = styled(Typography.Text)`\n  color: #ffffff;\n`;\n","import { Address, HexNumber } from '@ckb-lumos/base';\nimport { Button, Col, Modal, Row, Typography } from 'antd';\nimport { Formik, Field, Form, ErrorMessage } from 'formik';\nimport { observer } from 'mobx-react-lite';\nimport React, { useState } from 'react';\nimport { AssetMeta, useSendIssueTx } from 'hooks';\nimport { AssetAmount } from 'utils';\n\ntype OperationKind = 'invite' | 'issue';\n\ninterface IssueOperationProps {\n  assetMeta: AssetMeta;\n}\n\nexport const IssueOperation = observer((props: IssueOperationProps) => {\n  const { assetMeta } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  const [operationKind, setOperationKind] = useState<OperationKind>('invite');\n\n  const onClickInvite = () => {\n    setOperationKind('invite');\n    setVisible(true);\n  };\n  const onClickIssue = () => {\n    setOperationKind('issue');\n    setVisible(true);\n  };\n\n  return (\n    <div style={{ marginBottom: '12px' }}>\n      <Row>\n        <Col span={4} offset={4}>\n          <Button onClick={onClickInvite}>invite</Button>\n        </Col>\n        <Col span={4} offset={8}>\n          <Button onClick={onClickIssue}>issue</Button>\n        </Col>\n      </Row>\n      <ModalForm\n        visible={visible}\n        setVisible={setVisible}\n        operationKind={operationKind}\n        assetDecimal={assetMeta.decimal}\n        assetSymbol={assetMeta.symbol}\n      />\n    </div>\n  );\n});\n\ninterface ModalFormProps {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  operationKind: OperationKind;\n  assetSymbol: string;\n  assetDecimal: number;\n}\n\ninterface ModalFormValues {\n  recipient: Address;\n  amount: HexNumber;\n}\n\ninterface ModalFormErrors {\n  recipient?: Address;\n  amount?: HexNumber;\n}\n\nexport const ModalForm: React.FC<ModalFormProps> = (props) => {\n  const { visible, setVisible, operationKind, assetDecimal, assetSymbol } = props;\n\n  const { mutateAsync: sendIssueTransaction, isLoading: isIssueLoading } = useSendIssueTx();\n\n  const initialValues: ModalFormValues = { recipient: '', amount: '' };\n  const title = operationKind === 'invite' ? 'Invite user' : 'Issue ' + assetSymbol;\n  const recipientFieldDisplayName = operationKind === 'invite' ? 'user:' : 'recipient:';\n\n  const validate = (values: ModalFormValues): ModalFormErrors => {\n    // TODO add validate logic\n    return {};\n  };\n\n  return (\n    <Modal title={title} closable width={312} visible={visible} onCancel={() => setVisible(false)} footer={null}>\n      <Formik\n        initialValues={initialValues}\n        validate={validate}\n        onSubmit={(values: ModalFormValues) => {\n          sendIssueTransaction({\n            recipient: values.recipient,\n            amount: AssetAmount.fromHumanize(values.amount, assetDecimal).toRawString(),\n            operationKind: operationKind,\n          }).then(() => setVisible(false));\n        }}\n      >\n        {(formik) => (\n          <Form>\n            <div>\n              <Row>\n                <Col span={6}>\n                  <label htmlFor=\"recipient\">{recipientFieldDisplayName}</label>\n                </Col>\n                <Col span={16}>\n                  <Field name=\"recipient\" type=\"text\" placeholder=\"ckb address\" />\n                </Col>\n              </Row>\n              <ErrorMessage\n                name=\"recipient\"\n                children={(errorMessage) => {\n                  return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                }}\n              />\n            </div>\n\n            {operationKind === 'issue' && (\n              <div style={{ marginTop: '24px' }}>\n                <Row>\n                  <Col span={6}>\n                    <label htmlFor=\"amount\">amount:</label>\n                  </Col>\n                  <Col span={16}>\n                    <Field name=\"amount\" type=\"text\" />\n                  </Col>\n                </Row>\n                <ErrorMessage\n                  name=\"amount\"\n                  children={(errorMessage) => {\n                    return <Typography.Text type=\"danger\">{errorMessage}</Typography.Text>;\n                  }}\n                />\n              </div>\n            )}\n\n            <div style={{ marginTop: '24px', textAlign: 'center' }}>\n              <Button loading={isIssueLoading} onClick={formik.submitForm}>\n                Submit\n              </Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </Modal>\n  );\n};\n","import { CkbTypeScript } from '@ckit/base';\nimport React, { useMemo } from 'react';\nimport { AddAssetButton } from '../Assets';\nimport { AssetMetaDisplay } from './AssetMetaDisplay';\nimport { IssueOperation } from './IssueOperation';\nimport { CkitProviderContainer } from 'containers';\nimport { AssetMeta, useAssetMetaStorage } from 'hooks';\n\ninterface IssueAreaProps {\n  issuerAddress: string;\n}\n\nexport const IssueArea: React.FC<IssueAreaProps> = (props) => {\n  const { issuerAddress } = props;\n  const provider = CkitProviderContainer.useContainer();\n  const [assets] = useAssetMetaStorage();\n\n  const udtScript = useMemo<CkbTypeScript>(() => {\n    if (!provider) throw new Error('excepiton: provider undefined');\n    return provider.newSudtScript(issuerAddress);\n  }, [provider, issuerAddress]);\n\n  const assetMeta = useMemo<AssetMeta | undefined>(() => {\n    return assets.find(\n      (value) =>\n        value.script?.hash_type === udtScript.hash_type &&\n        value.script.code_hash === udtScript.code_hash &&\n        value.script.args === udtScript.args,\n    );\n  }, [udtScript, assets]);\n\n  const symbol = assetMeta ? assetMeta.symbol : '?';\n  const decimal = assetMeta ? assetMeta.decimal.toString() : '?';\n\n  return (\n    <>\n      <AssetMetaDisplay symbol={symbol} decimal={decimal} script={udtScript} />\n      <div style={{ marginTop: '36px', textAlign: 'center' }}>\n        {!assetMeta && (\n          <AddAssetButton\n            type=\"primary\"\n            buttonContent=\"Add asset info\"\n            initialAssetMeta={{\n              codeHash: udtScript.code_hash,\n              hashType: udtScript.hash_type,\n              args: udtScript.args,\n            }}\n          />\n        )}\n        {assetMeta && <IssueOperation assetMeta={assetMeta} />}\n      </div>\n    </>\n  );\n};\n","import { Empty, Typography } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { IssueArea } from 'components/Issue';\nimport { StyledCardWrapper } from 'components/Styled';\nimport { WalletContainer } from 'containers/WalletContainer';\n\nexport const IssueView: React.FC = observer(() => {\n  const { currentWallet, signerAddress } = WalletContainer.useContainer();\n  const isSupportIssue = currentWallet?.checkSupported('issue-sudt');\n\n  return (\n    <div>\n      {isSupportIssue && (\n        <StyledCardWrapper>\n          <div>\n            <Typography.Title level={3}> Issue </Typography.Title>\n          </div>\n          {!signerAddress && <Empty />}\n          {signerAddress && <IssueArea issuerAddress={signerAddress} />}\n        </StyledCardWrapper>\n      )}\n    </div>\n  );\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { AccountView } from './Account';\nimport { AssetsView } from './Assets';\nimport { IssueView } from './Issue';\n\nexport const AppView: React.FC = () => {\n  return (\n    <BodyWrapper>\n      <div className=\"app\">\n        <AccountView />\n        <IssueView />\n        <AssetsView />\n      </div>\n    </BodyWrapper>\n  );\n};\n\nconst BodyWrapper = styled.div`\n  padding-bottom: 32px;\n  min-height: 100vh;\n  background: linear-gradient(111.44deg, #a6ded2 0%, #8c99c2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n","import React from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { OnIncomplete } from 'components/OnLoaded';\nimport { CkitProviderContainer, WalletContainer } from 'containers';\nimport { AppView } from 'views';\nimport './App.less';\n\nconst App: React.FC = () => {\n  const queryClient = new QueryClient();\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <CkitProviderContainer.Provider>\n        <WalletContainer.Provider>\n          <OnIncomplete>\n            <AppView />\n          </OnIncomplete>\n        </WalletContainer.Provider>\n      </CkitProviderContainer.Provider>\n    </QueryClientProvider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    void import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unimplemented = unimplemented;\nexports.asyncSleep = asyncSleep;\nexports.randomHexString = randomHexString;\nexports.nonNullable = nonNullable;\nexports.bytesToHex = bytesToHex;\nexports.hexToBytes = hexToBytes;\nexports.boom = boom;\nexports.asserts = asserts;\n\nfunction unimplemented() {\n  throw new Error('unimplemented');\n}\n\nfunction asyncSleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n/**\n *\n * @param lengthWithOut0x expected length does not contain the beginning 0x\n * @example\n * ```ts\n * randomHexString(1); // 0xa\n * randomHexString(1); // 0x2\n * randomHexString(2); // 0xf8\n * ```\n */\n\n\nfunction randomHexString(lengthWithOut0x) {\n  return '0x' + [...Array(lengthWithOut0x)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\n}\n\nfunction nonNullable(x) {\n  if (x == null) throw new Error('Null check failed');\n  return x;\n}\n\nfunction bytesToHex(bytes) {\n  return `0x${[...bytes].map(b => b.toString(16).padStart(2, '0')).join('')}`;\n}\n\nfunction hexToBytes(hex) {\n  hex = hex.startsWith('0x') ? hex.slice(2) : hex;\n  const match = hex.match(/.{1,2}/g);\n  if (!match) throw new Error(`cannot parse ${hex} into Uint8Array`);\n  return Uint8Array.from(match.map(byte => parseInt(byte, 16)));\n}\n\nfunction boom(message) {\n  throw new Error(message);\n}\n\nfunction asserts(condition, err) {\n  if (condition) return;\n\n  if (typeof err === 'function') {\n    throw err();\n  }\n\n  if (typeof err === 'string') boom(err);\n  if (err instanceof Error) throw err;\n  boom();\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RecipientSameWithSenderError = exports.NoEnoughUdtError = exports.NoEnoughCkbError = exports.NoAvailableCellError = exports.CkitError = void 0;\n\nclass CkitError extends Error {\n  constructor(metadata, message) {\n    super(message);\n    this.metadata = metadata;\n  }\n\n}\n\nexports.CkitError = CkitError;\n\nclass NoAvailableCellError extends CkitError {\n  constructor(metadata, message = 'Cannot find available cell') {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoAvailableCellError = NoAvailableCellError;\n\nclass NoEnoughCkbError extends CkitError {\n  constructor(metadata, message = `Udt is not enough, expected minimal amount: ${metadata.expected}, actual: ${metadata.actual}`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoEnoughCkbError = NoEnoughCkbError;\n\nclass NoEnoughUdtError extends CkitError {\n  constructor(metadata, message = `Ckb is not enough, expected minimal amount: ${metadata.expected}, actual: ${metadata.actual}`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.NoEnoughUdtError = NoEnoughUdtError;\n\nclass RecipientSameWithSenderError extends CkitError {\n  constructor(metadata, message = `The recipient and sender cannot be the same one`) {\n    super(metadata, message);\n  }\n\n}\n\nexports.RecipientSameWithSenderError = RecipientSameWithSenderError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"serialize\", {\n  enumerable: true,\n  get: function () {\n    return _pw.serialize;\n  }\n});\nObject.defineProperty(exports, \"deserialize\", {\n  enumerable: true,\n  get: function () {\n    return _pw.deserialize;\n  }\n});\nexports.Pw = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"./pw.serde\");\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nfunction fromPwCellDep(x) {\n  return {\n    dep_type: x.depType,\n    out_point: {\n      tx_hash: x.outPoint.txHash,\n      index: x.outPoint.index\n    }\n  };\n}\n\nfunction toPwCellDep(x) {\n  return new _pwCore.CellDep(x.dep_type === 'dep_group' ? _pwCore.DepType.depGroup : _pwCore.DepType.code, new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index));\n}\n\nfunction fromPwScript(x) {\n  return {\n    code_hash: x.codeHash,\n    args: x.args,\n    hash_type: x.hashType\n  };\n}\n\nfunction toPwScript(x) {\n  return new _pwCore.Script(x.code_hash, x.args, x.hash_type === 'type' ? _pwCore.HashType.type : _pwCore.HashType.data);\n}\n\nfunction fromPwCell(x) {\n  return {\n    cell_output: {\n      capacity: x.capacity.toHexString(),\n      type: x.type ? fromPwScript(x.type) : undefined,\n      lock: fromPwScript(x.lock)\n    },\n    out_point: x.outPoint ? {\n      tx_hash: x.outPoint.txHash,\n      index: x.outPoint.index\n    } : undefined,\n    data: x.getData()\n  };\n}\n\nfunction isLumosCell(x) {\n  if (typeof x !== 'object' || x == null) return false;\n  return 'cell_output' in x;\n}\n\nfunction toPwCell(x) {\n  if (isLumosCell(x)) {\n    return new _pwCore.Cell(new _pwCore.Amount(x.cell_output.capacity, 0), toPwScript(x.cell_output.lock), x.cell_output.type ? toPwScript(x.cell_output.type) : undefined, x.out_point ? new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index) : undefined, x.data);\n  }\n\n  return new _pwCore.Cell(new _pwCore.Amount(x.output.capacity, 0), toPwScript(x.output.lock), x.output.type ? toPwScript(x.output.type) : undefined, x.out_point ? new _pwCore.OutPoint(x.out_point.tx_hash, x.out_point.index) : undefined, x.output_data);\n}\n\nfunction toPwOutPoint(x) {\n  return new _pwCore.OutPoint(x.tx_hash, x.index);\n}\n/**\n * from: PW => Lumos\n * to: Lumos => PW\n */\n\n\nconst Pw = {\n  fromPwCellDep,\n  toPwCellDep,\n  fromPwCell,\n  toPwCell,\n  toPwScript,\n  fromPwScript,\n  toPwOutPoint\n};\nexports.Pw = Pw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"ScriptManager\", {\n  enumerable: true,\n  get: function () {\n    return _ScriptManager.ScriptManager;\n  }\n});\nObject.defineProperty(exports, \"AbstractProvider\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.AbstractProvider;\n  }\n});\nObject.defineProperty(exports, \"ProviderConfig\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.ProviderConfig;\n  }\n});\nObject.defineProperty(exports, \"InitOptions\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractProvider.InitOptions;\n  }\n});\nObject.defineProperty(exports, \"AbstractWallet\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractWallet.AbstractWallet;\n  }\n});\n\nvar _ScriptManager = require(\"./ScriptManager\");\n\nvar _AbstractProvider = require(\"./AbstractProvider\");\n\nvar _AbstractWallet = require(\"./AbstractWallet\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractTransactionBuilder = void 0;\n\nvar _pw = require(\"../helpers/pw\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// TODO migrate to mercury mode\nclass AbstractTransactionBuilder {\n  serialize(tx) {\n    return AbstractTransactionBuilder.serde.serialize(tx);\n  }\n\n}\n\nexports.AbstractTransactionBuilder = AbstractTransactionBuilder;\n\n_defineProperty(AbstractTransactionBuilder, \"serde\", {\n  serialize(deserialized) {\n    return (0, _pw.serialize)(deserialized);\n  },\n\n  deserialize(serialized) {\n    return (0, _pw.deserialize)(serialized);\n  }\n\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractPwSenderBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _utils = require(\"../../utils\");\n\nvar _config = require(\"../unipass/config\");\n\n// TODO uncomment me when ran in Aggron or Mainnet\nclass AbstractPwSenderBuilder extends _pwCore.Builder {\n  constructor(provider) {\n    super(Number(provider.config.MIN_FEE_RATE));\n    this.provider = provider;\n  } // TODO refactor to ConfigManager\n\n\n  getCellDeps(_scripts) {\n    return [_pw.Pw.toPwCellDep(this.provider.getCellDep('SUDT')), _pw.Pw.toPwCellDep(this.provider.getCellDep('ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('PW_NON_ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('PW_ANYONE_CAN_PAY')), _pw.Pw.toPwCellDep(this.provider.getCellDep('SECP256K1_BLAKE160')), // TODO uncomment me when ran in Aggron or Mainnet\n    ...(0, _config.getCellDeps)()];\n  } // TODO refactor to ConfigManager\n\n\n  getWitnessPlaceholder(address) {\n    const isTemplateOf = (key, address) => {\n      const script = this.provider.parseToScript(address);\n      const scriptConfig = this.provider.getScriptConfig(key);\n      return scriptConfig.CODE_HASH === script.code_hash && scriptConfig.HASH_TYPE === script.hash_type;\n    };\n\n    if (isTemplateOf('SECP256K1_BLAKE160', address)) {\n      return {\n        lock: '0x' + '0'.repeat(130),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('PW_NON_ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(132),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('PW_NON_ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(132),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('ANYONE_CAN_PAY', address)) {\n      return {\n        lock: '0x' + '0'.repeat(130),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    if (isTemplateOf('UNIPASS', address)) {\n      return {\n        lock: '0x' + '0'.repeat(2082),\n        input_type: '',\n        output_type: ''\n      };\n    }\n\n    (0, _utils.boom)(`Unsupported lock ${address}`);\n  }\n\n}\n\nexports.AbstractPwSenderBuilder = AbstractPwSenderBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"debug\", {\n  enumerable: true,\n  get: function () {\n    return _debug.debug;\n  }\n});\nObject.defineProperty(exports, \"createDebugger\", {\n  enumerable: true,\n  get: function () {\n    return _debug.createDebugger;\n  }\n});\nObject.defineProperty(exports, \"invariant\", {\n  enumerable: true,\n  get: function () {\n    return _invariant.invariant;\n  }\n});\nObject.defineProperty(exports, \"unimplemented\", {\n  enumerable: true,\n  get: function () {\n    return _assertion.unimplemented;\n  }\n});\n\nvar _debug = require(\"./debug\");\n\nvar _invariant = require(\"./invariant\");\n\nvar _assertion = require(\"./assertion\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractSingleEntrySigner = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../helpers/pw\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass PwAdapterSigner extends _pwCore.Signer {\n  constructor(rawSigner, provider, hasher = new _pwCore.Blake2bHasher()) {\n    super(hasher);\n    this.rawSigner = rawSigner;\n    this.provider = provider;\n  }\n\n  async signMessages(messages) {\n    const sigs = [];\n\n    const signerLock = _pw.Pw.toPwScript(this.provider.parseToScript(await this.rawSigner.getAddress()));\n\n    for (const item of messages) {\n      if (item.lock.sameWith(signerLock)) {\n        const sig = await this.rawSigner.signMessage(item.message);\n        sigs.push(sig);\n      } else {\n        sigs.push('0x');\n      }\n    }\n\n    return sigs;\n  }\n\n}\n\nclass AbstractSingleEntrySigner {\n  constructor(options) {\n    var _options$hasher;\n\n    _defineProperty(this, \"adapter\", void 0);\n\n    const hasher = (_options$hasher = options.hasher) !== null && _options$hasher !== void 0 ? _options$hasher : new _pwCore.Blake2bHasher();\n    this.adapter = new PwAdapterSigner(this, options.provider, hasher);\n  }\n\n  // TODO refactor to sig entry to adapt mercury\n\n  /**\n   *\n   * @param tx the tx is actually PwTransaction, but may change in the future in order to migrate to mercury\n   */\n  async seal(tx) {\n    const signed = await this.adapter.sign(tx);\n    return _pwCore.transformers.TransformTransaction(signed);\n  }\n\n}\n\nexports.AbstractSingleEntrySigner = AbstractSingleEntrySigner;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryProvider = void 0;\n\nvar _rpc = require(\"@ckb-lumos/rpc\");\n\nvar _base = require(\"@ckit/base\");\n\nvar _mercuryClient = require(\"@ckit/mercury-client\");\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _helpers = require(\"../../helpers\");\n\nvar _utils = require(\"../../utils\");\n\nvar _IndexerCellProvider = require(\"./IndexerCellProvider\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass MercuryProvider extends _base.AbstractProvider {\n  constructor(mercuryRpc = 'http://127.0.0.1:8116', ckbRpc = 'http://127.0.0.1:8114') {\n    super();\n\n    _defineProperty(this, \"mercury\", void 0);\n\n    _defineProperty(this, \"rpc\", void 0);\n\n    if (mercuryRpc instanceof _mercuryClient.MercuryClient) this.mercury = mercuryRpc;else this.mercury = new _mercuryClient.MercuryClient(mercuryRpc);\n    if (ckbRpc instanceof _rpc.RPC) this.rpc = ckbRpc;else this.rpc = new _rpc.RPC(ckbRpc);\n  }\n\n  async collectCkbLiveCells(address, minimalCapacity) {\n    const lock = this.parseToScript(address);\n    const searchKey = {\n      script: lock,\n      script_type: 'lock',\n      filter: {\n        output_data_len_range: ['0x0', '0x1']\n      } // ckb live cells only\n\n    };\n    const cells$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.filter)(cell => cell.output.type == null), // live cell only\n    (0, _rxjs.scan)((acc, next) => ({\n      cells: acc.cells.concat(next),\n      amount: acc.amount + BigInt(next.output.capacity)\n    }), {\n      amount: 0n,\n      cells: []\n    }), (0, _rxjs.takeWhile)(acc => acc.amount < BigInt(minimalCapacity), true));\n    const acc = await (0, _rxjs.lastValueFrom)(cells$, {\n      defaultValue: {\n        amount: 0n,\n        cells: []\n      }\n    });\n\n    if (acc.amount < BigInt(minimalCapacity)) {\n      throw new _errors.NoEnoughCkbError({\n        lock,\n        expected: minimalCapacity,\n        actual: _helpers.Amount.from(acc.amount).toHex()\n      });\n    }\n\n    return acc.cells;\n  }\n  /**\n   * Calculate the capacity of all cells with only locks\n   */\n\n\n  async getCkbLiveCellsBalance(address) {\n    const searchKey = {\n      script: this.parseToScript(address),\n      script_type: 'lock',\n      filter: {\n        output_data_len_range: ['0x0', '0x1']\n      } // ckb live cells only\n\n    };\n    const balance$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.filter)(cell => cell.output.type == null), (0, _rxjs.reduce)((balance, cell) => balance + BigInt(cell.output.capacity), 0n));\n    const balance = await (0, _rxjs.lastValueFrom)(balance$, {\n      defaultValue: '0x0'\n    });\n    return String(balance);\n  }\n\n  getTxPoolInfo() {\n    return this.rpc.tx_pool_info();\n  }\n\n  getChainInfo() {\n    return this.rpc.get_blockchain_info();\n  }\n\n  sendTransaction(tx) {\n    return this.rpc.send_transaction(tx);\n  }\n\n  async collectUdtCells(address, udt, minimalAmount) {\n    const lock = this.parseToScript(address);\n    const searchKey = {\n      script: lock,\n      filter: {\n        script: udt\n      },\n      script_type: 'lock'\n    };\n    const cells$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.scan)((acc, resolvedCell) => ({\n      cells: acc.cells.concat(resolvedCell),\n      amount: acc.amount + BigInt((0, _pwCore.toBigUInt128LE)(resolvedCell.output_data.slice(0, 34)))\n    }), {\n      amount: 0n,\n      cells: []\n    }), (0, _rxjs.takeWhile)(acc => acc.amount < BigInt(minimalAmount), true) // inclusive last to ensure cells are enough\n    );\n    const acc = await (0, _rxjs.lastValueFrom)(cells$, {\n      defaultValue: {\n        amount: 0n,\n        cells: []\n      }\n    });\n\n    if (acc.amount < BigInt(minimalAmount)) {\n      throw new _errors.NoEnoughUdtError({\n        lock,\n        expected: minimalAmount,\n        actual: _helpers.Amount.from(acc.amount).toHex()\n      });\n    }\n\n    return acc.cells;\n  }\n\n  getUdtBalance(address, udt) {\n    const searchKey = {\n      script: this.parseToScript(address),\n      filter: {\n        script: udt\n      },\n      script_type: 'lock'\n    };\n    const balance$ = (0, _rxjs.from)(this.mercury.get_cells({\n      search_key: searchKey\n    })).pipe((0, _rxjs.expand)(res => this.mercury.get_cells({\n      search_key: searchKey,\n      after_cursor: res.last_cursor\n    }), 1), (0, _rxjs.takeWhile)(res => res.objects.length > 0), (0, _rxjs.concatMap)(res => res.objects), (0, _rxjs.reduce)((acc, resolvedCell) => acc + BigInt((0, _pwCore.toBigUInt128LE)(resolvedCell.output_data.slice(0, 34))), 0n));\n    return (0, _rxjs.lastValueFrom)(balance$, {\n      defaultValue: 0n\n    }).then(x => String(x));\n  }\n\n  async waitForTransactionCommitted(txHash, options = {}) {\n    const {\n      pollIntervalMs = 1000,\n      timeoutMs = 60000\n    } = options;\n    const start = Date.now();\n    let result = null;\n\n    while (Date.now() - start <= timeoutMs) {\n      var _tx$tx_status;\n\n      const tx = await this.rpc.get_transaction(txHash);\n\n      if ((tx === null || tx === void 0 ? void 0 : (_tx$tx_status = tx.tx_status) === null || _tx$tx_status === void 0 ? void 0 : _tx$tx_status.status) === 'committed') {\n        result = tx.transaction;\n        break;\n      }\n\n      await (0, _utils.asyncSleep)(pollIntervalMs);\n    }\n\n    const rpcTip = Number(await this.rpc.get_tip_block_number());\n\n    while (Date.now() - start <= timeoutMs) {\n      const mercuryTip = await this.mercury.get_tip();\n      if (Number(mercuryTip.block_number) >= rpcTip) break;\n      await (0, _utils.asyncSleep)(pollIntervalMs);\n    }\n\n    return result;\n  }\n\n  asIndexerCellProvider() {\n    return new _IndexerCellProvider.MercuryCellProvider(this.mercury);\n  }\n\n}\n\nexports.MercuryProvider = MercuryProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Amount = require(\"./Amount\");\n\nObject.keys(_Amount).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _Amount[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _Amount[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.byteLenOfSudt = byteLenOfSudt;\nexports.byteLenOfCkbLiveCell = byteLenOfCkbLiveCell;\n\nfunction byteLenOfSudt(lockArgsByteLen = 20) {\n  return 8\n  /* capacity: u64 */\n  +\n  /* lock script */\n  32\n  /* code_hash: U256 */\n  + lockArgsByteLen + 1\n  /* hash_type: u8 */\n  +\n  /* type script */\n  32\n  /* code_hash: U256 */\n  + 32\n  /* args: U256, issuer lock hash */\n  + 1\n  /* hash_type: u8 */\n  +\n  /* output_data */\n  16\n  /* data: u128, amount, little-endian */\n  ;\n}\n\nfunction byteLenOfCkbLiveCell(lockArgsByteLen = 20) {\n  // prettier-ignore\n  return 8\n  /* capacity: u64 */\n  + 32\n  /* code_hash: U256 */\n  + lockArgsByteLen + 1\n  /* hash_type: u8 */\n  ;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  helpers: true,\n  errors: true,\n  utils: true,\n  predefined: true\n};\nObject.defineProperty(exports, \"predefined\", {\n  enumerable: true,\n  get: function () {\n    return _predefined.predefined;\n  }\n});\nexports.utils = exports.errors = exports.helpers = void 0;\n\nvar _base = require(\"@ckit/base\");\n\nObject.keys(_base).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _base[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _base[key];\n    }\n  });\n});\n\nvar _wallets = require(\"./wallets\");\n\nObject.keys(_wallets).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _wallets[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _wallets[key];\n    }\n  });\n});\n\nvar _providers = require(\"./providers\");\n\nObject.keys(_providers).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _providers[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _providers[key];\n    }\n  });\n});\n\nvar _txBuilders = require(\"./tx-builders\");\n\nObject.keys(_txBuilders).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _txBuilders[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _txBuilders[key];\n    }\n  });\n});\n\nvar _helpers = _interopRequireWildcard(require(\"./helpers\"));\n\nexports.helpers = _helpers;\n\nvar _errors = _interopRequireWildcard(require(\"./errors\"));\n\nexports.errors = _errors;\n\nvar _utils = _interopRequireWildcard(require(\"./utils\"));\n\nexports.utils = _utils;\n\nvar _predefined = require(\"./predefined\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractProvider = void 0;\n\nvar _configManager = require(\"@ckb-lumos/config-manager\");\n\nvar _helpers = require(\"@ckb-lumos/helpers\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AbstractProvider {\n  constructor() {\n    _defineProperty(this, \"initialized\", false);\n\n    _defineProperty(this, \"_config\", void 0);\n  }\n\n  get config() {\n    if (!this._config) throw new Error('Cannot find the config, maybe provider is not initialied');\n    return this._config;\n  }\n\n  getScriptConfig(key) {\n    return this.config.SCRIPTS[key];\n  }\n\n  newScript(configKey, args) {\n    const scriptConfig = this.getScriptConfig(configKey);\n    if (!scriptConfig) return undefined;\n    return {\n      code_hash: scriptConfig.CODE_HASH,\n      args,\n      hash_type: scriptConfig.HASH_TYPE\n    };\n  }\n\n  getCellDep(configKey) {\n    const scriptConfig = this.getScriptConfig(configKey);\n    if (!scriptConfig) return undefined;\n    return {\n      dep_type: scriptConfig.DEP_TYPE,\n      out_point: {\n        tx_hash: scriptConfig.TX_HASH,\n        index: scriptConfig.INDEX\n      }\n    };\n  }\n\n  findCellDepByAddress(address) {\n    const script = this.parseToScript(address);\n    const scriptConfigs = Object.values(this.config.SCRIPTS);\n    if (scriptConfigs == null) return undefined;\n    const index = scriptConfigs.findIndex(scriptConfig => (scriptConfig === null || scriptConfig === void 0 ? void 0 : scriptConfig.CODE_HASH) === script.code_hash && (scriptConfig === null || scriptConfig === void 0 ? void 0 : scriptConfig.HASH_TYPE) === script.hash_type);\n    const found = scriptConfigs[index];\n    if (!found) return undefined;\n    return {\n      dep_type: found.DEP_TYPE,\n      out_point: {\n        tx_hash: found.TX_HASH,\n        index: found.INDEX\n      }\n    };\n  }\n\n  findCellDepByScript(script) {\n    return this.findCellDepByAddress(this.parseToAddress(script));\n  }\n  /**\n   * init the provider\n   * @param config if no config is provided, {@link getChainInfo} will be called to check the network type, and using the predefined config\n   */\n\n\n  async init(config) {\n    if (this.initialized) return;\n\n    if (config) {\n      const MIN_FEE_RATE = config.MIN_FEE_RATE ? config.MIN_FEE_RATE : (await this.getTxPoolInfo()).min_fee_rate;\n      this._config = { ...config,\n        MIN_FEE_RATE\n      };\n    } else {\n      const chainInfo = await this.getChainInfo();\n      const isMainnet = chainInfo.chain === 'ckb';\n      const txPoolInfo = await this.getTxPoolInfo();\n      this._config = isMainnet ? { ..._configManager.predefined.LINA,\n        MIN_FEE_RATE: txPoolInfo.min_fee_rate\n      } : { ..._configManager.predefined.AGGRON4,\n        MIN_FEE_RATE: txPoolInfo.min_fee_rate\n      };\n    }\n\n    this.initialized = true;\n  }\n\n  parseToAddress(script) {\n    return (0, _helpers.generateAddress)(script, {\n      config: this.config\n    });\n  }\n  /**\n   * parse an {@link Address} to script, throws an error when parsing failed\n   * @param address\n   */\n\n\n  parseToScript(address) {\n    return (0, _helpers.parseAddress)(address, {\n      config: this.config\n    });\n  }\n\n}\n\nexports.AbstractProvider = AbstractProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AbstractWallet = void 0;\n\nvar _utils = require(\"@ckit/utils\");\n\nvar _eventemitter = _interopRequireDefault(require(\"eventemitter3\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AbstractWallet {\n  // do **NOT** change the value manually\n  // use {@link getConnectStatus} instead of\n  // do **NOT** change the value manually\n  // use {@link getSigner} instead of\n  constructor() {\n    _defineProperty(this, \"descriptor\", {\n      name: 'Unknown Wallet',\n      features: [],\n      description: 'an unknown wallet'\n    });\n\n    _defineProperty(this, \"connectStatus\", 'disconnected');\n\n    _defineProperty(this, \"signer\", void 0);\n\n    _defineProperty(this, \"emitter\", void 0);\n\n    _defineProperty(this, \"on\", (event, listener) => {\n      this.emitter.on(event, listener);\n    });\n\n    this.emitter = new _eventemitter.default();\n  }\n\n  connect() {\n    const isDisconnected = this.connectStatus === 'disconnected';\n    (0, _utils.invariant)(isDisconnected, `[${this.descriptor.name}]: Do not reconnect the wallet`);\n    if (!isDisconnected) return;\n    this.emitConnectStatusChanged('connecting');\n    void this.tryConnect().then(signer => {\n      this.emitConnectStatusChanged('connected');\n      this.emitChangedSigner(signer);\n    }, e => {\n      this.emitError(e);\n      this.emitConnectStatusChanged('disconnected');\n    });\n  }\n\n  disconnect() {\n    this.emitConnectStatusChanged('disconnected');\n    this.emitter.removeAllListeners();\n  }\n\n  checkSupported(feature) {\n    return this.descriptor.features.includes(feature);\n  }\n\n  getConnectStatus() {\n    return this.connectStatus;\n  }\n\n  getSigner() {\n    return this.signer;\n  }\n\n  emitConnectStatusChanged(status) {\n    this.connectStatus = status;\n    this.emitter.emit('connectStatusChanged', status);\n  }\n\n  emitChangedSigner(signer) {\n    this.signer = signer;\n    this.emitter.emit('signerChanged', signer);\n  }\n\n  emitError(error = new Error(`An unknown error occurred in the ${this.descriptor.name}`)) {\n    this.emitter.emit('error', error);\n  }\n\n  setDescriptor(descriptor) {\n    const {\n      name = this.descriptor.name,\n      features = this.descriptor.features,\n      description = this.descriptor.description\n    } = descriptor;\n    this.descriptor = {\n      name,\n      features,\n      description\n    };\n  }\n\n}\n\nexports.AbstractWallet = AbstractWallet;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDebugger = createDebugger;\nexports.debug = void 0;\n\nvar _debug = _interopRequireDefault(require(\"debug\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createDebugger(namespace) {\n  if (!namespace.startsWith('ckit-')) namespace = 'ckit-' + namespace;\n  return (0, _debug.default)(namespace);\n}\n\nconst debug = (0, _debug.default)('ckit');\nexports.debug = debug;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"invariant\", {\n  enumerable: true,\n  get: function () {\n    return _tinyInvariant.default;\n  }\n});\n\nvar _tinyInvariant = _interopRequireDefault(require(\"tiny-invariant\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unimplemented = unimplemented;\n\nfunction unimplemented() {\n  throw new Error('unimplemented');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  AcpPwLockWallet: true,\n  NonAcpPwLockWallet: true\n};\nObject.defineProperty(exports, \"AcpPwLockWallet\", {\n  enumerable: true,\n  get: function () {\n    return _PwWallet.AcpPwLockWallet;\n  }\n});\nObject.defineProperty(exports, \"NonAcpPwLockWallet\", {\n  enumerable: true,\n  get: function () {\n    return _PwWallet.NonAcpPwLockWallet;\n  }\n});\n\nvar _PwWallet = require(\"./PwWallet\");\n\nvar _UnipassWallet = require(\"./UnipassWallet\");\n\nObject.keys(_UnipassWallet).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _UnipassWallet[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _UnipassWallet[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hashMessage = hashMessage;\nexports.InternalNonAcpPwLockSigner = exports.NonAcpPwLockWallet = exports.AcpPwLockWallet = void 0;\n\nvar _hd = require(\"@ckb-lumos/hd\");\n\nvar _base = require(\"@ckit/base\");\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _secp256k = require(\"secp256k1\");\n\nvar _utils = require(\"../utils\");\n\nvar _AbstractSingleEntrySigner = require(\"./AbstractSingleEntrySigner\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\n\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction detect() {\n  return (0, _detectProvider.default)().then(() => window.ethereum);\n}\n\nclass AbstractPwWallet extends _base.AbstractWallet {\n  constructor(ckitProvider) {\n    super();\n    this.ckitProvider = ckitProvider;\n\n    _defineProperty(this, \"listener\", addresses => {\n      if (!Array.isArray(addresses)) return;\n\n      if (addresses.length === 0) {\n        this.emitConnectStatusChanged('disconnected');\n        return;\n      }\n\n      this.emitChangedSigner(this.produceSigner());\n    });\n\n    this.setDescriptor({\n      features: this.describeFeatures(),\n      description: 'Interacting with CKB via MetaMask',\n      name: 'NonAcpPwLockWallet'\n    });\n  }\n\n  disconnect() {\n    void detect().then(ethProvider => ethProvider.removeEventListener('accountsChanged', this.listener)).then(() => super.disconnect());\n  }\n\n  async tryConnect() {\n    const ethProvider = await detect();\n    ethProvider.addListener('accountsChanged', this.listener);\n    return ethProvider.enable().then(() => this.produceSigner());\n  }\n\n}\n\nclass AbstractPwSigner extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n  constructor(ckitProvider) {\n    super({\n      provider: ckitProvider\n    });\n    this.ckitProvider = ckitProvider;\n  }\n\n  async signMessage(message) {\n    const ethereumProvider = await detect();\n    const from = ethereumProvider.selectedAddress;\n    const result = await ethereumProvider.request({\n      method: 'personal_sign',\n      params: [from, message]\n    });\n    let v = Number.parseInt(result.slice(-2), 16);\n    if (v >= 27) v -= 27;\n    return '0x' + _pwCore.Platform.eth.toString(16).padStart(2, '0') + result.slice(2, -2) + v.toString(16).padStart(2, '0');\n  }\n\n}\n\nclass AcpPwLockWallet extends AbstractPwWallet {\n  produceSigner() {\n    return new class extends AbstractPwSigner {\n      async getAddress() {\n        const config = this.ckitProvider.getScriptConfig('PW_ANYONE_CAN_PAY');\n        return this.ckitProvider.parseToAddress({\n          hash_type: config.HASH_TYPE,\n          args: (await detect()).selectedAddress,\n          code_hash: config.CODE_HASH\n        });\n      }\n\n    }(this.ckitProvider);\n  }\n\n  describeFeatures() {\n    return ['acp'];\n  }\n\n}\n\nexports.AcpPwLockWallet = AcpPwLockWallet;\n\nclass NonAcpPwLockWallet extends AbstractPwWallet {\n  produceSigner() {\n    return new class extends AbstractPwSigner {\n      async getAddress() {\n        const config = this.ckitProvider.getScriptConfig('PW_NON_ANYONE_CAN_PAY');\n        return this.ckitProvider.parseToAddress({\n          hash_type: config.HASH_TYPE,\n          args: (await detect()).selectedAddress,\n          code_hash: config.CODE_HASH\n        });\n      }\n\n    }(this.ckitProvider);\n  }\n\n  describeFeatures() {\n    return ['issue-sudt'];\n  }\n\n}\n\nexports.NonAcpPwLockWallet = NonAcpPwLockWallet;\n\nfunction hashMessage(message) {\n  // https://github.com/XuJiandong/pw-lock/blob/develop/c/pw_chain_ethereum.h#L43\n  return new _pwCore.Keccak256Hasher().update('\\x19Ethereum Signed Message:\\n32').update((0, _utils.hexToBytes)(message).buffer).digest().serializeJson();\n}\n\nvar _privateKey = /*#__PURE__*/new WeakMap();\n\nclass InternalNonAcpPwLockSigner extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n  constructor(privateKey, ckitProvider) {\n    super({\n      provider: ckitProvider\n    });\n    this.ckitProvider = ckitProvider;\n\n    _privateKey.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldSet(this, _privateKey, privateKey);\n  }\n\n  getEthAddress() {\n    const pubkey = (0, _secp256k.publicKeyCreate)((0, _utils.hexToBytes)(_classPrivateFieldGet(this, _privateKey)), false).slice(1);\n    const keccak = new _pwCore.Keccak256Hasher();\n    return '0x' + keccak.update(pubkey.buffer).digest().serializeJson().slice(-40);\n  }\n\n  async getAddress() {\n    const config = this.ckitProvider.getScriptConfig('PW_NON_ANYONE_CAN_PAY');\n    return this.ckitProvider.parseToAddress({\n      code_hash: config.CODE_HASH,\n      hash_type: config.HASH_TYPE,\n      args: this.getEthAddress()\n    });\n  }\n\n  async signMessage(message) {\n    const result = _hd.key.signRecoverable(hashMessage(message), _classPrivateFieldGet(this, _privateKey));\n\n    let v = Number.parseInt(result.slice(-2), 16);\n    if (v >= 27) v -= 27;\n\n    const platform = _pwCore.Platform.eth.toString(16).padStart(2, '0');\n\n    const sig = result.slice(2, -2);\n    return '0x' + platform + sig + v.toString(16).padStart(2, '0');\n  }\n\n}\n\nexports.InternalNonAcpPwLockSigner = InternalNonAcpPwLockSigner;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serialize = serialize;\nexports.deserialize = deserialize;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nfunction serialize(tx) {\n  const raw = tx.raw;\n  return {\n    raw: {\n      inputs: raw.inputs.map(item => ({\n        since: item.since,\n        previousOutput: {\n          index: item.previousOutput.index,\n          txHash: item.previousOutput.txHash\n        }\n      })),\n      inputCells: raw.inputCells.map(item => ({\n        lock: {\n          args: item.lock.args,\n          codeHash: item.lock.codeHash,\n          hashType: item.lock.hashType\n        },\n        type: item.type && {\n          args: item.type.args,\n          hashType: item.type.hashType,\n          codeHash: item.type.codeHash\n        },\n        data: item.getHexData(),\n        capacity: {\n          amount: item.capacity.toHexString()\n        },\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        outPoint: {\n          txHash: item.outPoint.txHash,\n          index: item.outPoint.index\n        }\n      })),\n      outputs: raw.outputs.map(item => ({\n        capacity: {\n          amount: item.capacity.toHexString()\n        },\n        data: item.getHexData(),\n        lock: {\n          args: item.lock.args,\n          hashType: item.lock.hashType,\n          codeHash: item.lock.codeHash\n        },\n        type: item.type && {\n          args: item.type.args,\n          hashType: item.type.hashType,\n          codeHash: item.type.codeHash\n        }\n      })),\n      version: raw.version,\n      cellDeps: raw.cellDeps.map(item => ({\n        depType: item.depType,\n        outPoint: {\n          index: item.outPoint.index,\n          txHash: item.outPoint.txHash\n        }\n      })),\n      headerDeps: raw.headerDeps\n    },\n    witnessArgs: tx.witnessArgs,\n    witnesses: tx.witnesses\n  };\n}\n\nfunction toScript(x) {\n  return new _pwCore.Script(x.codeHash, x.args, x.hashType === 'type' ? _pwCore.HashType.type : _pwCore.HashType.data);\n}\n\nfunction toCell(x) {\n  return new _pwCore.Cell(new _pwCore.Amount(x.capacity.amount, 0), toScript(x.lock), x.type ? toScript(x.type) : undefined, 'outPoint' in x && x.outPoint ? new _pwCore.OutPoint(x.outPoint.txHash, x.outPoint.index) : undefined, x.data);\n}\n\nfunction deserialize(tx) {\n  const raw = tx.raw;\n  return new _pwCore.Transaction(new _pwCore.RawTransaction(raw.inputCells.map(toCell), raw.outputs.map(toCell), raw.cellDeps.map(item => new _pwCore.CellDep(item.depType === 'code' ? _pwCore.DepType.code : _pwCore.DepType.depGroup, new _pwCore.OutPoint(item.outPoint.txHash, item.outPoint.index))), raw.headerDeps, raw.version), tx.witnessArgs);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnipassWallet = void 0;\n\nvar _base = require(\"@ckit/base\");\n\nvar _AbstractSingleEntrySigner = require(\"./AbstractSingleEntrySigner\");\n\nvar _UnipassAdapter = require(\"./unipass/UnipassAdapter\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass UnipassWallet extends _base.AbstractWallet {\n  constructor(provider) {\n    super();\n    this.provider = provider;\n\n    _defineProperty(this, \"adapter\", void 0);\n\n    this.setDescriptor({\n      name: 'UnipassWallet',\n      description: 'Interacting with CKB via an Email',\n      features: ['acp']\n    }); // TODO check the network and choose a right UniPass host\n\n    this.adapter = new _UnipassAdapter.UnipassRedirectAdapter({\n      host: 'https://unipass.xyz',\n      loginDataCacheKey: '__unipass__'\n    });\n  }\n\n  async tryConnect() {\n    const unipassLockArgs = await this.adapter.getLockArgs();\n    const provider = this.provider;\n\n    const getAddress = () => {\n      return Promise.resolve(provider.parseToAddress(provider.newScript('UNIPASS', unipassLockArgs)));\n    };\n\n    const signMessage = message => {\n      return Promise.resolve(this.adapter.sign(message));\n    };\n\n    return new class extends _AbstractSingleEntrySigner.AbstractSingleEntrySigner {\n      getAddress() {\n        return getAddress();\n      }\n\n      signMessage(message) {\n        return signMessage(message);\n      }\n\n      seal(tx) {\n        return super.seal(tx);\n      }\n\n    }({\n      provider: this.provider\n    });\n  }\n\n}\n\nexports.UnipassWallet = UnipassWallet;\n\n_defineProperty(UnipassWallet, \"UnipassRedirectAdapter\", _UnipassAdapter.UnipassRedirectAdapter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pubkeyToLockArgs = pubkeyToLockArgs;\nexports.getRetFromSearchParams = getRetFromSearchParams;\nexports.redirect = redirect;\nexports.UnipassRedirectAdapter = void 0;\n\nvar _base = require(\"@ckb-lumos/base\");\n\nvar _utils = require(\"../../utils\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction isUnipassLoginData(x) {\n  if (typeof x !== 'object' || x === null) return false;\n  return 'email' in x && 'pubkey' in x && 'recovery' in x;\n}\n\nfunction isUnipassSigData(x) {\n  if (typeof x !== 'object' || x === null) return false;\n  return 'sig' in x && 'pubkey' in x;\n}\n\nfunction pubkeyToLockArgs(pubkey) {\n  return _base.utils.ckbHash((0, _utils.hexToBytes)(pubkey).buffer).serializeJson().slice(0, 42);\n}\n\nfunction getRetFromSearchParams(check, replace = false) {\n  const searchParams = new URLSearchParams(location.search.slice(1));\n  const json = searchParams.get('unipass_ret');\n  if (!json) return undefined;\n  const res = JSON.parse(json);\n  if (!check(res.data)) return undefined;\n  if (res.code !== 200) throw new Error(res.info || 'Unknown error when connecting to UniPass');\n  searchParams.delete('unipass_ret');\n  const {\n    pathname,\n    host,\n    protocol\n  } = window.location;\n  const qs = searchParams.toString();\n  const newUrl = `${protocol}//${host}${pathname}${qs ? `?${qs}` : ''}`;\n  if (replace) window.history.replaceState({\n    path: newUrl\n  }, '', newUrl);\n  return res.data;\n}\n\nasync function redirect(href) {\n  window.location.href = href; // wait 60s to avoid error before redirect\n\n  return new Promise(resolve => setTimeout(resolve, 60 * 1000));\n}\n\nclass UnipassRedirectAdapter {\n  constructor(options) {\n    var _options$host, _options$loginDataCac;\n\n    _defineProperty(this, \"config\", void 0);\n\n    this.config = {\n      host: (_options$host = options.host) !== null && _options$host !== void 0 ? _options$host : 'https://unipass.xyz',\n      loginDataCacheKey: (_options$loginDataCac = options.loginDataCacheKey) !== null && _options$loginDataCac !== void 0 ? _options$loginDataCac : '__unipass__'\n    };\n  }\n  /**\n   * check is logged, if `unipass_ret` is found, it will clear the clear the `unipass_ret` and save the unipass login data to cache\n   */\n\n\n  saveLoginInfo() {\n    this.getLoginDataFromUrl() && this.getLoginDataFromCache();\n  }\n\n  hasSigData() {\n    return !!getRetFromSearchParams(isUnipassSigData);\n  }\n  /**\n   * get unipass lock_args. If it is not retrieved from the cache or url, it will redirect to the unipass page\n   */\n\n\n  async getLockArgs() {\n    var _ref, _this$getLoginDataFro;\n\n    const loginData = (_ref = (_this$getLoginDataFro = this.getLoginDataFromCache()) !== null && _this$getLoginDataFro !== void 0 ? _this$getLoginDataFro : this.getLoginDataFromUrl()) !== null && _ref !== void 0 ? _ref : await this.redirectToLogin();\n    return pubkeyToLockArgs(loginData.pubkey);\n  }\n\n  sign(message) {\n    var _this$getSignatureFro;\n\n    return Promise.resolve((_this$getSignatureFro = this.getSignatureFromUrl()) !== null && _this$getSignatureFro !== void 0 ? _this$getSignatureFro : this.redirectToSign(message));\n  }\n\n  redirectToLogin() {\n    const loginUrl = this.generateUnipassNewUrl(this.config.host, 'login', {\n      success_url: window.location.href\n    });\n    return redirect(loginUrl);\n  }\n\n  redirectToSign(message) {\n    var _this$getLoginDataFro2;\n\n    const pubkey = (_this$getLoginDataFro2 = this.getLoginDataFromCache()) === null || _this$getLoginDataFro2 === void 0 ? void 0 : _this$getLoginDataFro2.pubkey;\n    if (!pubkey) throw new Error('UniPass should login before sign');\n    const signUrl = this.generateUnipassNewUrl(this.config.host, 'sign', {\n      success_url: window.location.href,\n      pubkey,\n      message\n    });\n    return redirect(signUrl);\n  }\n\n  saveLoginDataToCache(data) {\n    localStorage.setItem(this.config.loginDataCacheKey, JSON.stringify(data));\n  }\n\n  getLoginDataFromCache() {\n    const serialized = localStorage.getItem(this.config.loginDataCacheKey);\n    if (serialized == null) return;\n    return JSON.parse(serialized);\n  }\n\n  getLoginDataFromUrl() {\n    const loginData = getRetFromSearchParams(isUnipassLoginData, true);\n    if (!loginData) return;\n    this.saveLoginDataToCache(loginData);\n    return loginData;\n  }\n\n  getSignatureFromUrl() {\n    const signature = getRetFromSearchParams(isUnipassSigData, true);\n    if (!signature) return; // FIXME comment meaning for the 0x01\n\n    return '0x01' + signature.sig.replace('0x', '');\n  }\n\n  generateUnipassNewUrl(host, action, params) {\n    const urlObj = new URL(`${host}/${action.toLowerCase()}`);\n    Object.entries(params).forEach(([key, val]) => urlObj.searchParams.set(key, val));\n    return urlObj.href;\n  }\n\n}\n\nexports.UnipassRedirectAdapter = UnipassRedirectAdapter;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MercuryProvider = require(\"./mercury/MercuryProvider\");\n\nObject.keys(_MercuryProvider).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _MercuryProvider[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _MercuryProvider[key];\n    }\n  });\n});\n\nvar _CkitProvider = require(\"./CkitProvider\");\n\nObject.keys(_CkitProvider).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (key in exports && exports[key] === _CkitProvider[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _CkitProvider[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryClient = void 0;\n\nvar _clientJs = require(\"@open-rpc/client-js\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass MercuryClient {\n  constructor(uri) {\n    _defineProperty(this, \"client\", void 0);\n\n    const transport = new _clientJs.HTTPTransport(uri, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    });\n    this.client = new _clientJs.Client(new _clientJs.RequestManager([transport]));\n  }\n\n  get_cells(payload) {\n    const {\n      search_key,\n      order = 'asc',\n      limit = '0x3e8'\n      /*1_000*/\n      ,\n      after_cursor\n    } = payload;\n    return this.client.request({\n      method: 'get_cells',\n      params: [search_key, order, limit, after_cursor]\n    });\n  }\n\n  get_tip() {\n    return this.client.request({\n      method: 'get_tip'\n    });\n  }\n\n}\n\nexports.MercuryClient = MercuryClient;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CkbAmount = exports.Amount = void 0;\n\nvar _bignumber = require(\"bignumber.js\");\n\nvar _utils = require(\"../utils\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction BN(val) {\n  if (typeof val === 'bigint') return new _bignumber.BigNumber(String(val));\n  if (Amount.checkIsAmount(val)) return new _bignumber.BigNumber(String(val));\n  return new _bignumber.BigNumber(val);\n}\n\nclass Amount {\n  static checkIsAmount(x) {\n    if (typeof x !== 'object') return false;\n    if (x == null) return false;\n    return '__isCkitAmount__' in x && x.__isCkitAmount__;\n  }\n  /**\n   *\n   * @param value\n   * @param decimals\n   * @example\n   * ```ts\n   * Amount.from(1).eq(1) // true\n   * Amount.from(1, 8).eq(1_00000000) // true\n   * ```\n   */\n\n\n  static from(value, decimals = 0) {\n    if (decimals < 0 || !Number.isInteger(decimals)) (0, _utils.boom)('The decimal not valid');\n    if (typeof value === 'bigint') return new Amount(BN(value * 10n ** BigInt(decimals)));\n    if (!decimals) return new Amount(BN(value));\n    return new Amount(BN(value).times(BN(10).pow(decimals)));\n  }\n  /**\n   * value without decimals\n   * @private\n   */\n\n\n  constructor(bn) {\n    _defineProperty(this, \"__isCkitAmount__\", true);\n\n    _defineProperty(this, \"raw\", void 0);\n\n    if (!bn.isInteger()) throw new Error('Amount must be an integer');\n    if (bn.lt(0)) throw new Error('Amount must cannot be a negative number');\n    this.raw = new _bignumber.BigNumber(bn);\n  }\n\n  humanize(options) {\n    const {\n      decimalPlaces = Infinity,\n      separator = true,\n      decimals = 0\n    } = options ? options : {};\n    const valWithDecimals = this.raw.times(10 ** -decimals);\n    const originDecimalPlaces = valWithDecimals.decimalPlaces();\n    const rounded = valWithDecimals.decimalPlaces(Math.min(originDecimalPlaces, decimalPlaces), _bignumber.BigNumber.ROUND_FLOOR);\n    if (separator) return rounded.toFormat();\n    return rounded.toString();\n  }\n\n  new(val) {\n    return new Amount(val);\n  }\n\n  toString(base) {\n    return this.raw.toString(base);\n  }\n\n  toHex() {\n    return '0x' + this.toString(16);\n  }\n\n  eq(val) {\n    return this.raw.eq(BN(val));\n  }\n\n  gt(val) {\n    return this.raw.gt(BN(val));\n  }\n\n  gte(val) {\n    return this.raw.gte(BN(val));\n  }\n\n  lt(val) {\n    return this.raw.lt(BN(val));\n  }\n\n  lte(val) {\n    return this.raw.lte(BN(val));\n  }\n\n  plus(val) {\n    return this.new(this.raw.plus(BN(val)));\n  }\n\n  minus(val) {\n    return this.new(this.raw.minus(BN(val)));\n  }\n\n  asBN() {\n    return new _bignumber.BigNumber(this.raw);\n  }\n\n}\n\nexports.Amount = Amount;\n\nclass CkbAmount extends Amount {\n  /**\n   * @deprecated\n   */\n  static from() {\n    throw new Error('Use the Amount.from to instead of');\n  }\n\n  static fromCkb(value) {\n    return new CkbAmount(BN(value).times(10 ** 8));\n  }\n\n  static fromShannon(value) {\n    return new CkbAmount(BN(value));\n  }\n\n  new(val) {\n    return new CkbAmount(val);\n  }\n\n  humanize(options) {\n    return super.humanize({ ...options,\n      decimals: 8\n    });\n  }\n\n}\n\nexports.CkbAmount = CkbAmount;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MercuryCellProvider = void 0;\n\nclass MercuryCellProvider {\n  constructor(mercury) {\n    this.mercury = mercury;\n  }\n\n  collector(queries) {\n    const {\n      lock,\n      type\n    } = queries;\n    let searchKey;\n\n    if (lock !== undefined) {\n      searchKey = {\n        script: lock,\n        script_type: 'lock'\n      };\n\n      if (type != undefined && type !== 'empty') {\n        searchKey.filter = {\n          script: type\n        };\n      }\n    } else {\n      if (type != undefined && type != 'empty') {\n        searchKey = {\n          script: type,\n          script_type: 'type'\n        };\n      } else {\n        throw new Error(`should specify either type or lock in queries, queries now: ${JSON.stringify(queries)}`);\n      }\n    }\n\n    const queryData = queries.data || '0x';\n    const mercury = this.mercury;\n    return {\n      collect() {\n        return {\n          async *[Symbol.asyncIterator]() {\n            const sizeLimit = 100;\n\n            for (;;) {\n              const res = await mercury.get_cells({\n                search_key: searchKey\n              });\n              const liveCells = res.objects;\n\n              for (const cell of liveCells) {\n                if (queryData === 'any' || queryData === cell.output_data) {\n                  yield {\n                    cell_output: cell.output,\n                    data: cell.output_data,\n                    out_point: cell.out_point,\n                    block_number: cell.block_number\n                  };\n                }\n              }\n\n              if (liveCells.length < sizeLimit) {\n                break;\n              }\n            }\n          }\n\n        };\n      }\n\n    };\n  }\n\n}\n\nexports.MercuryCellProvider = MercuryCellProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CkitProvider = void 0;\n\nvar _base = require(\"@ckb-lumos/base\");\n\nvar _MercuryProvider = require(\"./mercury/MercuryProvider\");\n\nclass CkitProvider extends _MercuryProvider.MercuryProvider {\n  get config() {\n    return super.config;\n  }\n\n  init(config) {\n    return super.init(config);\n  }\n\n  getScriptConfig(key) {\n    const scriptConfig = super.getScriptConfig(key);\n    if (!scriptConfig) throw new Error(`cannot find the ${key} script config, maybe init failed`);\n    return scriptConfig;\n  }\n\n  newScript(configKey, args = '0x') {\n    const script = super.newScript(configKey, args);\n    if (!script) throw new Error(`cannot find the ${configKey} script config, maybe init failed`);\n    return script;\n  }\n\n  newSudtScript(issuerAddress) {\n    const issuerLockHash = _base.utils.computeScriptHash(this.parseToScript(issuerAddress));\n\n    return this.newScript('SUDT', issuerLockHash);\n  }\n\n  getCellDep(configKey) {\n    const dep = super.getCellDep(configKey);\n    if (!dep) throw new Error(`cannot find the ${configKey} script config, maybe init failed`);\n    return dep;\n  }\n\n}\n\nexports.CkitProvider = CkitProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  AbstractTransactionBuilder: true,\n  SerializedTx: true,\n  DeserializedTx: true\n};\nObject.defineProperty(exports, \"AbstractTransactionBuilder\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.AbstractTransactionBuilder;\n  }\n});\nObject.defineProperty(exports, \"SerializedTx\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.SerializedTx;\n  }\n});\nObject.defineProperty(exports, \"DeserializedTx\", {\n  enumerable: true,\n  get: function () {\n    return _AbstractTransactionBuilder.DeserializedTx;\n  }\n});\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _AcpTransferSudtBuilder = require(\"./AcpTransferSudtBuilder\");\n\nObject.keys(_AcpTransferSudtBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _AcpTransferSudtBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _AcpTransferSudtBuilder[key];\n    }\n  });\n});\n\nvar _TransferCkbBuilder = require(\"./TransferCkbBuilder\");\n\nObject.keys(_TransferCkbBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _TransferCkbBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _TransferCkbBuilder[key];\n    }\n  });\n});\n\nvar _MintSudtBuilder = require(\"./MintSudtBuilder\");\n\nObject.keys(_MintSudtBuilder).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _MintSudtBuilder[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _MintSudtBuilder[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AcpTransferSudtBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _TransferSudtPwBuilder = require(\"./pw/TransferSudtPwBuilder\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass AcpTransferSudtBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n\n    _defineProperty(this, \"builder\", void 0);\n\n    this.builder = new _TransferSudtPwBuilder.TransferSudtPwBuilder(options, provider, signer);\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const transferToSelf = this.options.recipient === signerAddress;\n    if (transferToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    return this.builder.build();\n  }\n\n}\n\nexports.AcpTransferSudtBuilder = AcpTransferSudtBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferSudtPwBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _utils = require(\"../../utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass TransferSudtPwBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, signer) {\n    super(provider);\n    this.options = options;\n    this.signer = signer;\n  }\n\n  async build() {\n    const {\n      sudt,\n      recipient,\n      amount\n    } = this.options;\n    const sender = await this.signer.getAddress();\n    const senderSudts = await this.provider.collectUdtCells(sender, sudt, amount);\n    const recipientSudt = (await this.provider.collectUdtCells(recipient, sudt, '0'))[0];\n    const cellDeps = await this.getCellDeps();\n    if (!recipientSudt) (0, _utils.boom)(`recipient ${recipient} has no cell to carry the udt`);\n    const senderInputs = senderSudts.map(point => new _pwCore.Cell(new _pwCore.Amount(point.output.capacity, 0), _pw.Pw.toPwScript(point.output.lock), point.output.type && _pw.Pw.toPwScript(point.output.type), _pw.Pw.toPwOutPoint(point.out_point), point.output_data));\n    const recipientInput = new _pwCore.Cell(new _pwCore.Amount(recipientSudt.output.capacity, 0), _pw.Pw.toPwScript(recipientSudt.output.lock), recipientSudt.output.type && _pw.Pw.toPwScript(recipientSudt.output.type), _pw.Pw.toPwOutPoint(recipientSudt.out_point), recipientSudt.output_data); // increase recipient sudt\n\n    const recipientOutput = recipientInput.clone();\n    recipientOutput.setSUDTAmount(recipientOutput.getSUDTAmount().add(new _pwCore.Amount(this.options.amount, 0)));\n    const senderOutput = senderInputs.reduce((sum, input) => {\n      sum.capacity = sum.capacity.add(input.capacity);\n      sum.setSUDTAmount(sum.getSUDTAmount().add(input.getSUDTAmount()));\n      return sum;\n    }); // decrease sender sudt\n\n    senderOutput.setSUDTAmount(senderOutput.getSUDTAmount().sub(new _pwCore.Amount(this.options.amount, 0)));\n    const tx = new _pwCore.Transaction(new _pwCore.RawTransaction([...senderInputs, recipientInput], [senderOutput, recipientOutput], cellDeps), senderInputs.map(() => this.getWitnessPlaceholder(sender))); // TODO fix fee\n    // fee from sender sudt capacity\n\n    const fee = _pwCore.Builder.calcFee(tx, Number(this.provider.config.MIN_FEE_RATE));\n\n    senderOutput.capacity = senderOutput.capacity.sub(fee); // TODO collect another cell for fee\n\n    if (senderOutput.availableFee().lte(_pwCore.Amount.ZERO)) {\n      (0, _utils.boom)('only the additional capacity of the sudt cell is supported as a fee');\n    }\n\n    return tx;\n  }\n\n}\n\nexports.TransferSudtPwBuilder = TransferSudtPwBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCellDeps = getCellDeps;\nexports.nets = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\n// TODO\n//  unipass is not open source at this stage,\n//  there is only some sample code, when unipass is open source, you need to replace these codes\nconst nets = [// {\n//   name: '',\n//   url: 'http://localhost:3000/'\n// },\n{\n  name: 'dev',\n  url: 'https://id.unipass.vip',\n  model: 1\n}, {\n  name: 'Aggron-Preview',\n  url: 'https://t.unipass.xyz',\n  model: 0\n}, {\n  name: 'Lina-Preview',\n  url: 'https://rc.unipass.xyz',\n  model: 0\n}, {\n  name: 'Lina',\n  url: 'https://unipass.xyz'\n}];\nexports.nets = nets;\nconst AggronCellDeps = [new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x04a1ac7fe15e454741d3c5c9a409efb9a967714ad2f530870514417978a9f655', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xd346695aa3293a84e9f985448668e9692892c959e7e83d6d8042e59c08b8cf5c', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x194a0f84de41d006a07ece07c96a8130100818599fcf0b2ecf49e512b873ed6e', '0x2'))];\nconst LinaCellDeps = [new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x5c98197999d04fbfa5eb579d0f1c85a3edac2b2f72164f2fc618b101adc71729', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xf247a0e9dfe9d559ad8486428987071b65d441568075465c2810409e889f4081', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0x1196caaf9e45f1959ea3583f92914ee8306d42e27152f7068f9eeb52ac23eeae', '0x0')), new _pwCore.CellDep(_pwCore.DepType.code, new _pwCore.OutPoint('0xf5edd047b3dbd676c9aa1e5a77ff32e3661d154c306e23bb0c13f8da9133f145', '0x2'))]; // const testCKB = {\n//   NODE_URL: 'https://testnet.ckb.dev',\n//   INDEXER_URL: 'https://testnet.ckb.dev/indexer',\n//   CHAIN_ID: ChainID.ckb_testnet,\n// };\n// const mainCKB = {\n//   NODE_URL: 'https://lina.ckb.dev',\n//   INDEXER_URL: 'https://mainnet.ckb.dev/indexer',\n//   CHAIN_ID: ChainID.ckb,\n// };\n// const LocalStorage = {\n//   set(key: string, val: unknown): void {\n//     localStorage.set(key, JSON.stringify(val));\n//   },\n//   remove(key: string): void {\n//     localStorage.removeItem(key);\n//   },\n//   getItem(key: string): unknown {\n//     const item = localStorage.getItem(key);\n//     if (!item) return null;\n//     return JSON.parse(item);\n//   },\n// };\n// export function saveEnvData(url: string): void {\n//   if (url == 'https://rc.unipass.xyz' || url == 'https://unipass.xyz') {\n//     LocalStorage.set('lina', true);\n//   } else {\n//     LocalStorage.remove('lina');\n//   }\n// }\n// export function getCkbEnv(): Url {\n//   const isLina = LocalStorage.getItem('lina');\n//   let data = testCKB;\n//   if (isLina) data = mainCKB;\n//   console.log('[cells]:', isLina, data);\n//   return data;\n// }\n\nfunction getCellDeps() {\n  // const isLina = LocalStorage.getItem('lina');\n  // for node test\n  if (typeof window === 'undefined') return [];\n  const isLina = false;\n  let data = AggronCellDeps;\n  if (isLina) data = LinaCellDeps;\n  console.log('[cells]:', isLina, data);\n  return data;\n} // export function getRpc() {\n//   const isLina = LocalStorage.getItem('lina');\n//   let url = testCKB.NODE_URL;\n//   if (isLina) url = mainCKB.NODE_URL;\n//   const rpc = new RPC(url);\n//   return rpc;\n// }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferCkbBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _TransferCkbPwBuilder = require(\"./pw/TransferCkbPwBuilder\");\n\n// just for testing case, do not use it\nclass TransferCkbBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const transferToSelf = this.options.recipients.some(item => item.recipient === signerAddress && item.capacityPolicy === 'findAcp');\n    if (transferToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    const builder = new _TransferCkbPwBuilder.TransferCkbPwBuilder(this.options, this.provider, this.signer);\n    return builder.build();\n  }\n\n}\n\nexports.TransferCkbBuilder = TransferCkbBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransferCkbPwBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _builderUtils = require(\"../builder-utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass TransferCkbPwBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, signer) {\n    super(provider);\n    this.options = options;\n    this.signer = signer;\n  }\n\n  async build() {\n    const recipientCreatedCells = this.options.recipients.filter(item => item.capacityPolicy === 'createAcp').map(item => new _pwCore.Cell(new _pwCore.Amount(item.amount, 0), _pw.Pw.toPwScript(this.provider.parseToScript(item.recipient))));\n    const acpOptions = this.options.recipients.filter(item => item.capacityPolicy === 'findAcp');\n    const recipientAcpCells$ = (0, _rxjs.from)(acpOptions).pipe((0, _rxjs.mergeMap)(async item => {\n      const resolveds = await this.provider.collectCkbLiveCells(item.recipient, '0');\n      const resolved = resolveds[0];\n      if (!resolved) throw new _errors.NoAvailableCellError({\n        lock: this.provider.parseToScript(item.recipient)\n      }); // increase capacity\n\n      const cell = _pw.Pw.toPwCell(resolved);\n\n      cell.capacity = cell.capacity.add(new _pwCore.Amount(item.amount, 0));\n      return cell;\n    }), (0, _rxjs.toArray)());\n    const recipientAcpCells = await (0, _rxjs.lastValueFrom)(recipientAcpCells$);\n    const createdCapacity = recipientCreatedCells.reduce((totalCapacity, cell) => totalCapacity.add(cell.capacity), _pwCore.Amount.ZERO);\n    const injectedAcpCapacity = acpOptions.reduce((totalCapacity, item) => totalCapacity.add(new _pwCore.Amount(item.amount, 0)), _pwCore.Amount.ZERO);\n    const senderOutpoints = await this.provider.collectCkbLiveCells(await this.signer.getAddress(), injectedAcpCapacity.add(createdCapacity) // 61 ckb to ensure change cell capacity is enough\n    .add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfCkbLiveCell)()))) // additional 1 ckb for tx fee, not all 1ckb will be paid,\n    // but the real fee will be calculated based on feeRate\n    .add(new _pwCore.Amount('1')).toHexString());\n    const senderCells = senderOutpoints.map(_pw.Pw.toPwCell);\n\n    if (!senderCells.length || !senderCells[0]) {\n      throw new _errors.NoAvailableCellError({\n        lock: this.provider.parseToScript(await this.signer.getAddress())\n      });\n    } // accumulate all sender capacity into one cell\n\n\n    const senderOutput = senderCells[0];\n    senderOutput.capacity = senderCells.reduce((acc, cell) => acc.add(cell.capacity), new _pwCore.Amount('0', 0));\n    const tx = new _pwCore.Transaction(new _pwCore.RawTransaction([...senderCells, ...recipientAcpCells], [senderOutput, ...recipientAcpCells, ...recipientCreatedCells], // TODO getDeps by all script\n    this.getCellDeps()), [this.getWitnessPlaceholder(await this.signer.getAddress())]);\n    const fee = TransferCkbPwBuilder.calcFee(tx);\n    senderOutput.capacity = senderOutput.capacity.sub(createdCapacity).sub(injectedAcpCapacity).sub(fee);\n    return tx;\n  }\n\n}\n\nexports.TransferCkbPwBuilder = TransferCkbPwBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MintSudtBuilder = void 0;\n\nvar _errors = require(\"../errors\");\n\nvar _AbstractTransactionBuilder = require(\"./AbstractTransactionBuilder\");\n\nvar _MintSudtPwBuilder = require(\"./pw/MintSudtPwBuilder\");\n\nclass MintSudtBuilder extends _AbstractTransactionBuilder.AbstractTransactionBuilder {\n  constructor(options, provider, signer) {\n    super();\n    this.options = options;\n    this.provider = provider;\n    this.signer = signer;\n  }\n\n  async buildPwTransaction() {\n    const signerAddress = await this.signer.getAddress();\n    const builder = new _MintSudtPwBuilder.NonAcpPwMintBuilder(this.options, this.provider, signerAddress);\n    return await builder.build();\n  }\n\n  async build() {\n    const signerAddress = await this.signer.getAddress();\n    const mintToSelf = this.options.recipients.some(item => item.recipient === signerAddress && item.capacityPolicy === 'findAcp');\n    if (mintToSelf) throw new _errors.RecipientSameWithSenderError({\n      address: signerAddress\n    });\n    return this.buildPwTransaction();\n  }\n\n}\n\nexports.MintSudtBuilder = MintSudtBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NonAcpPwMintBuilder = void 0;\n\nvar _pwCore = require(\"@lay2/pw-core\");\n\nvar _rxjs = require(\"rxjs\");\n\nvar _errors = require(\"../../errors\");\n\nvar _pw = require(\"../../helpers/pw\");\n\nvar _builderUtils = require(\"../builder-utils\");\n\nvar _AbstractPwSenderBuilder = require(\"./AbstractPwSenderBuilder\");\n\nclass NonAcpPwMintBuilder extends _AbstractPwSenderBuilder.AbstractPwSenderBuilder {\n  constructor(options, provider, issuerAddress) {\n    super(provider);\n    this.options = options;\n    this.issuerAddress = issuerAddress;\n  }\n\n  async build() {\n    const udtType = this.provider.newSudtScript(this.issuerAddress); // capacity provided by issuer\n\n    const createdRecipientCells = this.options.recipients.filter(item => item.capacityPolicy === 'createAcp').map(item => new _pwCore.Cell(new _pwCore.Amount(String(BigInt(item.additionalCapacity || 0)), 0).add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfSudt)()))), _pw.Pw.toPwScript(this.provider.parseToScript(item.recipient)), // recipient lock\n    _pw.Pw.toPwScript(udtType), // issued sudt type\n    undefined, new _pwCore.Amount(item.amount, 0).toUInt128LE())); // capacity provided by recipient\n\n    const resolvedFindAcpCells = this.options.recipients.filter(item => item.capacityPolicy === 'findAcp');\n    const foundRecipientCells$ = (0, _rxjs.from)(resolvedFindAcpCells).pipe( // collect the udt cell from recipients, throw an error if no udt cell is found\n    (0, _rxjs.mergeMap)(async item => {\n      const resolved = (await this.provider.collectUdtCells(item.recipient, udtType, '0'))[0];\n\n      if (!resolved) {\n        throw new _errors.NoAvailableCellError({\n          lock: this.provider.parseToScript(item.recipient),\n          type: udtType\n        });\n      }\n\n      const cell = _pw.Pw.toPwCell(resolved);\n\n      cell.capacity = cell.capacity.add(new _pwCore.Amount(item.additionalCapacity || '0', 0));\n      cell.setSUDTAmount(cell.getSUDTAmount().add(new _pwCore.Amount(item.amount, 0)));\n      return cell;\n    }, 5), (0, _rxjs.toArray)());\n    const foundRecipientCells = await (0, _rxjs.lastValueFrom)(foundRecipientCells$);\n    const createdRecipientCellsCapacity = createdRecipientCells.reduce((sum, createdCell) => sum.add(createdCell.capacity), _pwCore.Amount.ZERO);\n    const foundRecipientCellsAdditionalCapacity = resolvedFindAcpCells.reduce((sum, foundCell) => sum.add(new _pwCore.Amount(foundCell.additionalCapacity || '0', 0)), _pwCore.Amount.ZERO);\n    const neededCapacityFromIssuer = createdRecipientCellsCapacity.add(foundRecipientCellsAdditionalCapacity) // additional 61 ckb to ensure capacity is enough for change cell\n    .add(new _pwCore.Amount(String((0, _builderUtils.byteLenOfCkbLiveCell)()))) // additional 1 ckb for tx fee, not all 1ckb will be paid,\n    // but the real fee will be calculated based on feeRate\n    .add(new _pwCore.Amount('1'));\n    const issuerOutpoints = await this.provider.collectCkbLiveCells(this.issuerAddress, neededCapacityFromIssuer.toHexString());\n    const issuerCells = issuerOutpoints.map(_pw.Pw.toPwCell); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    const issuerOutput = issuerCells[0].clone();\n    issuerOutput.capacity = issuerCells.reduce((sum, inputCell) => sum.add(inputCell.capacity), _pwCore.Amount.ZERO);\n    const rawTx = new _pwCore.RawTransaction([...issuerCells, ...foundRecipientCells], [issuerOutput, ...createdRecipientCells, ...foundRecipientCells], this.getCellDeps());\n    const tx = new _pwCore.Transaction(rawTx, [this.getWitnessPlaceholder(this.issuerAddress)]);\n\n    const fee = _pwCore.Builder.calcFee(tx, Number(this.provider.config.MIN_FEE_RATE));\n\n    issuerOutput.capacity = issuerOutput.capacity.sub(fee).sub(createdRecipientCellsCapacity).sub(foundRecipientCellsAdditionalCapacity);\n    return tx;\n  }\n\n}\n\nexports.NonAcpPwMintBuilder = NonAcpPwMintBuilder;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.predefined = void 0;\n\nvar Aggron = _interopRequireWildcard(require(\"./aggron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst AggronCkitConfig = {\n  PREFIX: 'ckt',\n  SCRIPTS: Aggron.SCRIPTS\n};\nconst predefined = {\n  Aggron: AggronCkitConfig\n};\nexports.predefined = predefined;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SCRIPTS = void 0;\n\nvar _configManager = require(\"@ckb-lumos/config-manager\");\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n// function toScriptConfig(obj: typeof CHAIN_SPECS.Aggron.pwLock): ScriptConfig {\n//   return {\n//     CODE_HASH: obj.script.codeHash,\n//     HASH_TYPE: obj.script.hashType,\n//     DEP_TYPE: obj.cellDep.depType,\n//     TX_HASH: obj.cellDep.outPoint.txHash,\n//     INDEX: obj.cellDep.outPoint.index,\n//   };\n// }\nconst SCRIPTS = {\n  SECP256K1_BLAKE160: _configManager.predefined.AGGRON4.SCRIPTS.SECP256K1_BLAKE160,\n  ANYONE_CAN_PAY: _configManager.predefined.AGGRON4.SCRIPTS.ANYONE_CAN_PAY,\n  SUDT: _configManager.predefined.AGGRON4.SCRIPTS.SUDT,\n  // TODO replace me when deployed\n  PW_ANYONE_CAN_PAY: {\n    CODE_HASH: '0x093ba9759e1c4a79dd81b0a50de83ab108ffe4eb983b05637bf1f5c1834f31eb',\n    HASH_TYPE: 'data',\n    TX_HASH: '0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41',\n    INDEX: '0x2',\n    DEP_TYPE: 'code'\n  },\n  // TODO replace me when deployed\n  PW_NON_ANYONE_CAN_PAY: {\n    CODE_HASH: '0x87366c3678f14ccbd6647386a18e05ae27c97978d4a6952fb5820cc698263835',\n    HASH_TYPE: 'data',\n    TX_HASH: '0x834d1827950545da5cca779903ca8268aecbc7bfadb1d1cc18ba90f3b312cd41',\n    INDEX: '0x3',\n    DEP_TYPE: 'code'\n  },\n  // TODO replace me when deployed\n  UNIPASS: {\n    INDEX: '0x0',\n    TX_HASH: '0x03dd2a5594ed2d79196b396c83534e050ba0ad07fa5c1cd61a7094f9fb60a592',\n    DEP_TYPE: 'code',\n    CODE_HASH: '0x124a60cd799e1fbca664196de46b3f7f0ecb7138133dcaea4893c51df5b02be6',\n    HASH_TYPE: 'type'\n  }\n};\nexports.SCRIPTS = SCRIPTS;"],"sourceRoot":""}